import{a as ne}from"./chunk-OQJP2FG5.js";import{a as x}from"./chunk-6IEWE3OU.js";import{a as re}from"./chunk-AVIANEB4.js";import{a as ae}from"./chunk-OFEOPKCC.js";import{a as oe}from"./chunk-UHDIKLYJ.js";import"./chunk-CHOSRW5W.js";import{a as ie}from"./chunk-33XTDNRI.js";import{c as H}from"./chunk-JND367CQ.js";import{h as U}from"./chunk-7U4JZNVG.js";import{C as ee,G as te,b as q,i as J,p as W,s as X,v as Y,z as Z}from"./chunk-JLNARVDU.js";import{$ as z,fa as K,ja as I}from"./chunk-DARKUWJB.js";import"./chunk-EENLYY7H.js";import{a as Q}from"./chunk-U7HZP7QI.js";import{b as R,d as w,e as L}from"./chunk-DJAHQBBJ.js";import{f as E,g as _,i as A,j as g,l as C,r as B}from"./chunk-NP3GUERB.js";import{$ as P,Cb as r,Db as a,Eb as u,Fb as O,Gb as $,Ob as k,Qb as F,X as M,Yb as d,Za as s,Zb as c,_a as j,dc as G,ea as D,ec as S,fa as p,fc as N,ka as y,mc as b,nc as v,oc as V,pb as f,q as h,rb as l}from"./chunk-32HXX3OB.js";import"./chunk-NEB6MB4Y.js";var T=(()=>{let t=class t{constructor(o,e){this._http=o,this.appSettings=e}getCobros(){return this._http.get(this.appSettings.cobroTrabajadores.url.base)}getCobroEmpleado(o){return this._http.get(`${this.appSettings.cobroTrabajadores.url.base}/${o}`)}getCobrosGrid(o){return this._http.get(`${this.appSettings.cobroTrabajadores.url.baseTabla}/${o}`)}};t.\u0275fac=function(e){return new(e||t)(D(B),D(Q))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function pe(i,t){if(i&1&&(r(0,"mat-option",14),d(1),a()),i&2){let m=t.$implicit;l("value",m.id),s(),c(m.nombre)}}function ce(i,t){if(i&1&&(O(0),f(1,pe,2,2,"mat-option",13),$()),i&2){let m=t.ngIf;s(),l("ngForOf",m.data)}}var de=(()=>{let t=class t{constructor(o){this._matDialog=o,this.datePipe=p(g),this.router=p(w),this.estadoDatosService=p(ae),this.currencyPipe=p(C),this.cobroTrabadorService=p(T),this.estadoCreditosService=p(ne),this.fb=p(Z),this.estados=new X([""]),this.searchTerm="",this.estadoCreditos$=this.estadoCreditosService.getEstadoCobros().pipe(M(e=>{let n=e.data;n&&(this.estados.setValue(n[1].id),this.cobros(n[1].id))})),this.data=[],this.columns=["Nombre completo","Deuda total","Empresa","Estado"],this.columnPropertyMap={"Nombre completo":"nombreTrabajador","Deuda total":"deudaTotal",Empresa:"nombreSubEmpresa",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:e=>{console.log("Editing",e),this.selectedData=e,this.router.navigate(["pages/gestion-cobros/cobros/cobro",this.selectedData.idTrabajador])}}]}onSelect(o){let e=o.value;this.cobros(e)}cobros(o){this.subcription$=this.cobroTrabadorService.getCobrosGrid(o).pipe(h(e=>(e.data.forEach(n=>{n.estado?n.estado=x.ACTIVO:n.estado=x.INACTIVO}),e)),h(e=>(e.data.forEach(n=>{n.deudaTotal=this.currencyPipe.transform(n.deudaTotal,"USD","symbol","1.2-2")}),e))).subscribe(e=>{e?this.data=e.data:this.data=[]},e=>{this.data=[]})}getCobros(){this.subcription$=this.cobroTrabadorService.getCobros().pipe(h(o=>(o.data.forEach(e=>{e.estado?e.estado=x.ACTIVO:e.estado=x.INACTIVO}),o)),h(o=>(o.data.forEach(e=>{e.fechaCobro=this.datePipe.transform(e.fechaCobro,"dd/MM/yyyy"),e.valorPendiente=this.currencyPipe.transform(e.valorPendiente,"USD","symbol","1.2-2"),e.valorPago=e.valorPago?this.currencyPipe.transform(e.valorPago,"USD","symbol","1.2-2"):"-"}),o))).subscribe(o=>{o?this.data=o.data:this.data=[]},o=>{this.data=[]})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.listenGrid()}};t.\u0275fac=function(e){return new(e||t)(j(H))},t.\u0275cmp=y({type:t,selectors:[["app-grid-cobros-empleados"]],standalone:!0,features:[G([g,C]),S],decls:17,vars:14,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0","w-1/2","gap-2.5"],[1,"fuse-mat-dense","rounded-lg","w-1/2",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"w-1/2"],[3,"selectionChange","formControl"],[4,"ngIf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons","searchTerm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3,"Cobro Trabajadores"),a(),r(4,"div",3)(5,"mat-form-field",4),u(6,"mat-icon",5)(7,"input",6),a(),r(8,"mat-form-field",7)(9,"mat-label"),d(10,"Estados"),a(),r(11,"mat-select",8),k("selectionChange",function(me){return n.onSelect(me)}),f(12,ce,2,1,"ng-container",9),b(13,"async"),a()()()(),r(14,"div",10)(15,"div",11),u(16,"app-custom-table",12),a()()()),e&2&&(s(5),l("subscriptSizing","dynamic"),s(),l("svgIcon","heroicons_solid:magnifying-glass"),s(),l("autocomplete","off")("placeholder","Buscar"),s(4),l("formControl",n.estados),s(),l("ngIf",v(13,12,n.estadoCreditos$)),s(4),l("columns",n.columns)("displayedColumns",n.columns)("columnPropertyMap",n.columnPropertyMap)("data",n.data)("buttons",n.buttons)("searchTerm",n.searchTerm))},dependencies:[re,J,I,te,q,z,ie,E,_,A,ee,W,Y]});let i=t;return i})();var fe=()=>["/pages/gestion-cobros/cobros"];function ue(i,t){if(i&1&&(r(0,"div",13),u(1,"mat-divider"),r(2,"div",14)(3,"div")(4,"h3",15),d(5,"Fecha de compra"),a()(),r(6,"p",16),d(7),b(8,"date"),a()(),r(9,"div",14)(10,"div")(11,"h3",15),d(12,"Valor pendiente"),a()(),r(13,"p",16),d(14),b(15,"currency"),a()(),r(16,"div",17)(17,"p",15),d(18,"Valor cuota"),a(),r(19,"p",16),d(20),b(21,"currency"),a()(),r(22,"div",18)(23,"p",15),d(24,"Cantidad cuotas"),a(),r(25,"p",16),d(26),a()(),r(27,"div",19)(28,"p",15),d(29,"Estado "),a(),r(30,"p",16),d(31),a()()()),i&2){let m=t.$implicit;s(7),c(V(8,5,m.fechaCobro,"dd/MM/yyyy")),s(7),c(v(15,8,m.valorPendiente)),s(6),c(v(21,10,m.montoCuota)),s(6),c(m.numCuota),s(5),c(m.nombreEstadoCredito)}}function be(i,t){if(i&1&&(r(0,"div",10)(1,"div",11),f(2,ue,32,12,"div",12),a()()),i&2){let m=F(2);s(2),l("ngForOf",m.detalle)}}function he(i,t){if(i&1&&(r(0,"div",8),f(1,be,3,1,"div",9),a()),i&2){let m=F();s(),l("ngIf",m.detalle)}}var le=(()=>{let t=class t{constructor(){this.router=p(w),this.activatedRoute=p(R),this.cobroTrabadorService=p(T),this.idCredito=""}ngOnDestroy(){}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getDetalle(this.idCredito)}getDetalle(o){this.subcription$=this.cobroTrabadorService.getCobroEmpleado(o).subscribe(e=>{console.log(e),this.detalle=e.data})}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=y({type:t,selectors:[["app-form-cobros-empleados"]],standalone:!0,features:[S],decls:10,vars:4,consts:[["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","print:p-0","w-full"],[1,"bg-card","shadow","print:bg-transparent","print:p-0","print:shadow-none","rounded-2xl","max-w-xl","mx-auto","overflow-hidden"],[1,"bg-crediblue-50","px-6","py-4","flex","items-center","justify-between"],["mat-button","",1,"flex","items-center",3,"routerLink"],[1,"text-white",3,"svgIcon"],[1,"text-xl","font-bold","text-white"],["class","p-6",4,"ngIf"],[1,"p-6"],["class","w-full h-full px-4",4,"ngIf"],[1,"w-full","h-full","px-4"],[1,"max-w-2xl","mx-auto","p-4","bg-white","shadow-lg","rounded-lg"],["class","space-y-4 mb-12",4,"ngFor","ngForOf"],[1,"space-y-4","mb-12"],[1,"flex","justify-between","items-center","border-b","pb-2"],[1,"text-lg","font-semibold","text-gray-700"],[1,"text-lg","font-bold","text-gray-800"],[1,"flex","justify-between","items-center"],[1,"flex","justify-between","items-center","pt-4","border-t"],[1,"flex","justify-between","items-center","border-t","pt-4"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),u(6,"mat-icon",5),a()(),r(7,"h2",6),d(8,"Cobro trabajadores"),a()(),f(9,he,2,1,"div",7),a()()()),e&2&&(s(5),l("routerLink",N(3,fe)),s(),l("svgIcon","heroicons_outline:arrow-long-left"),s(3),l("ngIf",n.detalle))},dependencies:[U,C,g,K,I,_,L,E,oe]});let i=t;return i})();var Ze=[{path:"",component:de},{path:"cobro/:id",component:le}];export{Ze as default};
