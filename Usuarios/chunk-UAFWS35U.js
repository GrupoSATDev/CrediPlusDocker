import{a as y}from"./chunk-WVBHYJUP.js";import{a as I}from"./chunk-6IEWE3OU.js";import{a as K}from"./chunk-GTJMBBHF.js";import{a as Q}from"./chunk-YYEPHEMI.js";import{a as C}from"./chunk-MO2NC6JB.js";import"./chunk-DXTAURWF.js";import{a as J}from"./chunk-TRVR57AA.js";import{a as N}from"./chunk-VGYH6GAK.js";import"./chunk-OIDWJWJT.js";import{g as j}from"./chunk-KOHPUW4T.js";import{a as k,b as G,c as R}from"./chunk-2APB6LD7.js";import"./chunk-SVJNALL6.js";import{C as q,G as x,b as O,i as D,l as z,p as L,q as P,u as B,w as H,x as $,z as W}from"./chunk-HT3W5V35.js";import{ea as S,ja as V}from"./chunk-A6IWXEM5.js";import"./chunk-LZ5XM2X6.js";import"./chunk-KDIFW2XS.js";import"./chunk-CLM5DCBX.js";import{$a as v,$b as T,Db as a,Eb as s,Fb as p,Pb as f,Zb as c,_a as i,fc as b,ga as m,la as h,q as A,sb as n}from"./chunk-RICNMTJI.js";import{a as u,d as F}from"./chunk-NEB6MB4Y.js";var M=(()=>{let r=class r{constructor(){this.fb=m(W),this._locacionService=m(y),this.dialogRef=m(k),this.fuseService=m(j),this.estadosDatosService=m(C),this.toasService=m(Q),this._matData=m(G),this.swalService=m(J)}ngOnInit(){this.createForm();let t=this._matData;if(t.edit){let e=t.data;this.form.patchValue(e)}}onSave(){if(this.form.valid)if(this._matData.edit){let e=this.form.getRawValue(),{codigoDane:l}=e,w=F(e,["codigoDane"]),E=u({codigoDane:Number(l)},w);this.fuseService.open(u({},N)).afterClosed().subscribe(_=>{_==="confirmed"?this._locacionService.putDepartamento(E).subscribe(g=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro actualizado con exito!",timer:4e3}),this.closeDialog()},g=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un problema al actualizar el registro!",timer:4e3})}):this.closeDialog()})}else{let t=this.form.getRawValue(),{codigoDane:l}=t,w=F(t,["codigoDane"]),E=u({codigoDane:Number(l)},w);this.fuseService.open(u({},N)).afterClosed().subscribe(_=>{_==="confirmed"?this._locacionService.postDepartamento(E).subscribe(g=>{console.log(g),this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro creado con exito!",timer:4e3}),this.closeDialog()},g=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un problema al crear el registro!",timer:4e3})}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],codigoDane:[""],nombre:[""]})}closeDialog(){this.dialogRef.close()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=h({type:r,selectors:[["app-form-departamentos"]],standalone:!0,features:[b],decls:20,vars:6,consts:[[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],["floatLabel","always",1,"w-full"],["matInput","","placeholder","C\xF3digo del DANE",3,"formControlName"],["matInput","","placeholder","Nombre",3,"formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),c(3),s(),a(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),c(7,"C\xF3digo del DANE"),s(),p(8,"input",5),s(),a(9,"mat-form-field",4)(10,"mat-label"),c(11,"Nombre"),s(),p(12,"input",6),s(),a(13,"div",7)(14,"button",8),f("click",function(){return o.closeDialog()}),a(15,"span"),c(16," Cancelar "),s()(),a(17,"button",9),f("click",function(){return o.onSave()}),a(18,"span"),c(19," Guardar "),s()()()()()()),e&2&&(i(3),T(" ",o._matData.edit?"Actualizar departamento":"Agregar departamento"," "),i(),n("formGroup",o.form),i(4),n("formControlName","codigoDane"),i(4),n("formControlName","nombre"),i(2),n("color","primary"),i(3),n("color","primary"))},dependencies:[S,D,x,O,q,B,z,L,P,H,$]});let d=r;return d})();var U=(()=>{let r=class r{constructor(t,e,o){this._matDialog=t,this.estadoDatosService=e,this.locacionService=o,this.data=[],this.columns=["Estado","C\xF3digo DANE","Nombre departamento"],this.columnPropertyMap={Estado:"estado","Nombre departamento":"nombre","C\xF3digo DANE":"codigoDane"},this.buttons=[{label:"Edit",icon:"edit",action:l=>{console.log("Editing",l),this.selectedData=l,this.onEdit()}}]}onNew(){this._matDialog.open(M,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%",disableClose:!0})}onEdit(){this._matDialog.open(M,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%",disableClose:!0})}getDepartamentos(){this.subcription$=this.locacionService.getDepartamentos().pipe(A(t=>(t.data.forEach(e=>{e.estado?e.estado=I.ACTIVO:e.estado=I.INACTIVO}),t))).subscribe(t=>{this.data=t.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{e&&this.getDepartamentos()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getDepartamentos(),this.listenGrid()}};r.\u0275fac=function(e){return new(e||r)(v(R),v(C),v(y))},r.\u0275cmp=h({type:r,selectors:[["app-grid-departamentos"]],standalone:!0,features:[b],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","rounded-lg","d","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),c(3,"Departamentos"),s(),a(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5)(7,"input",6),s(),a(8,"button",7),f("click",function(){return o.onNew()}),p(9,"mat-icon",8),a(10,"span",9),c(11,"Agregar"),s()()()(),a(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),s()()()),e&2&&(i(5),n("subscriptSizing","dynamic"),i(),n("svgIcon","heroicons_solid:magnifying-glass"),i(),n("autocomplete","off")("placeholder","Buscar"),i(),n("color","primary"),i(),n("svgIcon","heroicons_outline:plus"),i(5),n("columns",o.columns)("displayedColumns",o.columns)("columnPropertyMap",o.columnPropertyMap)("data",o.data)("buttons",o.buttons))},dependencies:[K,S,D,V,x]});let d=r;return d})();var Ne=[{path:"",component:U}];export{Ne as default};
