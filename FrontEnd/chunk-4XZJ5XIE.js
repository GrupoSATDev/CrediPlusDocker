import{a as lt}from"./chunk-HUEDZF6U.js";import{a as st}from"./chunk-ZDZCRNZ2.js";import{a as Ye}from"./chunk-SFMTOCCF.js";import{a as et}from"./chunk-UKGXJ34S.js";import{a as tt,b as it,d as nt}from"./chunk-ECHOO3YL.js";import{b as mt}from"./chunk-PEZYCTDT.js";import{a as ot,b as at,c as rt}from"./chunk-OPXIPHVN.js";import{a as de}from"./chunk-3L6CDPYN.js";import{a as Xe}from"./chunk-QSGJPTM7.js";import{a as Je,b as Ke,c as We}from"./chunk-VMONEH2L.js";import{a as pe,b as ce}from"./chunk-5E3BI53K.js";import{a as $}from"./chunk-6IEWE3OU.js";import{a as ue}from"./chunk-24W6POED.js";import{a as Qe}from"./chunk-HKOJEADL.js";import{a as me}from"./chunk-UFLWJOQO.js";import{a as se}from"./chunk-4WJQLHI3.js";import{a as B}from"./chunk-HDKW2ETT.js";import{a as Ze}from"./chunk-YRFWKKCQ.js";import"./chunk-ZVTEZKTX.js";import{g as O}from"./chunk-WPQBWK4Z.js";import{a as ke,b as Ne,c as Pe,d as Ve}from"./chunk-4EGREALI.js";import{h as te}from"./chunk-D266PZ43.js";import{a as Ue}from"./chunk-DTC2A3GX.js";import"./chunk-QBODUMHZ.js";import{B as j,C as le,G as R,b as ie,c as Oe,e as je,i as V,l as re,n as y,p as ne,q as Be,s as $e,u as Ge,v as Le,w as qe,x as He,z as ze}from"./chunk-BFUN2CON.js";import{$ as Me,Q as Y,R as ee,ea as oe,fa as ae,ja as A}from"./chunk-PKP5UGVL.js";import"./chunk-WKKRDNHB.js";import"./chunk-NSFGWBZH.js";import{a as Re}from"./chunk-QLANGENB.js";import{b as W,d as P,e as X}from"./chunk-EH2C4XHQ.js";import{e as J,f as K,g as w,i as Te,j as h,m as S,s as Fe}from"./chunk-D7SIZTGA.js";import{$b as o,Bb as _e,Cb as Ee,Db as Ie,Eb as De,Fb as t,Gb as a,Hb as f,Ib as b,Jb as x,Lb as U,Rb as k,Tb as v,Y as q,_b as be,aa as ye,ab as r,ac as c,bc as N,dc as Z,fa as ge,ga as p,hc as E,ic as I,jc as Q,la as _,lc as we,mc as Ae,q as M,qc as g,rc as C,sb as u,sc as D,ub as m,wa as H,xa as z}from"./chunk-KIIQGHZ6.js";import{a as L,d as Se}from"./chunk-NEB6MB4Y.js";var G=(()=>{let n=class n{constructor(l,s){this._http=l,this.appSettings=s}getCreditos(l){return this._http.get(`${this.appSettings.creditos.url.base}/${l}`)}getCredito(l){return this._http.get(`${this.appSettings.creditos.url.base}/${l}`)}putCredito(l){let s=l.id;return delete l.id,this._http.put(`${this.appSettings.creditos.url.base}/${s}`,l)}};n.\u0275fac=function(s){return new(s||n)(ge(Fe),ge(Re))},n.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var T=function(e){return e.EN_PROCESO="EnProceso",e.BLOQUEADO="Bloqueado",e.VENCIDO="Vencido",e.EN_REVISION="EnRevision",e.CERRADO="Cerrado",e.APROBADO="Aprobado",e}(T||{}),xe=function(e){return e.APROBADO="e626ea69-e915-5462-be9a-905326714782",e.RECHAZADA="",e}(xe||{});function xt(e,n){if(e&1&&(b(0),f(1,"app-custom-table",17),x()),e&2){let i=v(2);r(),m("columns",i.columns)("displayedColumns",i.columns)("columnPropertyMap",i.columnPropertyMap)("data",i.data)("buttons",i.buttons)}}function ht(e,n){if(e&1&&u(0,xt,2,5,"ng-container",16),e&2){let i=v();m("ngIf",i.data.length)}}function Ct(e,n){if(e&1&&(b(0),f(1,"app-custom-table",17),x()),e&2){let i=v(2);r(),m("columns",i.columnsAprobadas)("displayedColumns",i.columnsAprobadas)("columnPropertyMap",i.columnPropertyAprobadas)("data",i.data)("buttons",i.buttonsView)}}function St(e,n){if(e&1&&u(0,Ct,2,5,"ng-container",16),e&2){let i=v();m("ngIf",i.data.length)}}function yt(e,n){if(e&1&&(b(0),f(1,"app-custom-table",17),x()),e&2){let i=v(2);r(),m("columns",i.columnsAprobadas)("displayedColumns",i.columnsAprobadas)("columnPropertyMap",i.columnPropertyAprobadas)("data",i.data)("buttons",i.buttons)}}function _t(e,n){if(e&1&&u(0,yt,2,5,"ng-container",16),e&2){let i=v();m("ngIf",i.data.length)}}function Et(e,n){if(e&1&&(b(0),f(1,"app-custom-table",17),x()),e&2){let i=v(2);r(),m("columns",i.columnsAprobadas)("displayedColumns",i.columnsAprobadas)("columnPropertyMap",i.columnPropertyAprobadas)("data",i.data)("buttons",i.buttons)}}function It(e,n){if(e&1&&u(0,Et,2,5,"ng-container",16),e&2){let i=v();m("ngIf",i.data.length)}}var dt=(()=>{let n=class n{constructor(){this.datePipe=p(h),this.router=p(P),this.estadoDatosService=p(B),this.creditoService=p(G),this.selectedTab=T.EN_REVISION,this.currencyPipe=p(S),this.data=[],this.columns=["Fecha de solicitud","Solicitante","Cupo solicitado","Empresa","Estado"],this.columnsAprobadas=["Fecha de aprobaci\xF3n","Solicitante","Cupo aprobado","Empresa","Estado"],this.columnPropertyMap={"Fecha de solicitud":"fechaCreacion",Solicitante:"nombreTrabajador","Cupo solicitado":"cupoSolicitado",Empresa:"nombreEmpresaMaestra",Estado:"nombreEstadoCredito"},this.columnPropertyAprobadas={"Fecha de aprobaci\xF3n":"fechaAprobacion",Solicitante:"nombreTrabajador","Cupo aprobado":"cupoAprobado",Empresa:"nombreEmpresaMaestra",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:l=>{console.log("Approve",l),this.selectedData=l,this.router.navigate(["pages/gestion-creditos/creditos/detalle",this.selectedData.id])}}],this.buttonsView=[{label:"View",icon:"visibility",action:l=>{console.log("Approve",l),this.selectedData=l,this.router.navigate(["pages/gestion-creditos/creditos/view-detalle",this.selectedData.id])}}],this.tabChanged=l=>{console.log("tabChangeEvent => ",l),console.log("index => ",l.index),this.selectedTab=l.index==0?T.EN_REVISION:l.index==1?T.APROBADO:l.index==2?T.VENCIDO:l.index==3?T.BLOQUEADO:T.EN_REVISION,this.getCreditos(this.selectedTab)}}getCreditos(l){this.subcription$=this.creditoService.getCreditos(l).pipe(M(s=>(s.data.forEach(d=>{d.estado?d.estado=$.ACTIVO:d.estado=$.INACTIVO}),s)),M(s=>(s.data.forEach(d=>{d.fechaCreacion=this.datePipe.transform(d.fechaCreacion,"dd/MM/yyyy"),d.fechaAprobacion=this.datePipe.transform(d.fechaAprobacion,"dd/MM/yyyy"),d.cupoAprobado=this.currencyPipe.transform(d.cupoAprobado,"USD","symbol","1.2-2")}),s))).subscribe(s=>{s?this.data=s.data:this.data=[]},s=>{this.data=[]})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(s=>{s&&this.getCreditos(this.selectedTab)})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getCreditos(this.selectedTab),this.listenGrid()}};n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=_({type:n,selectors:[["app-grid-creditos"]],standalone:!0,features:[E([h,S]),I],decls:20,vars:5,consts:[["tabGroup",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],["mat-stretch-tabs","false",1,"sm:px-2",3,"selectedTabChange","animationDuration"],["label","En revisi\xF3n"],["matTabContent",""],["label","Aprobado"],["label","Vencido"],["label","Bloqueado"],[4,"ngIf"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(s,d){if(s&1){let F=U();t(0,"div",1)(1,"div",2)(2,"div",3),o(3,"Cr\xE9ditos"),a(),t(4,"div",4)(5,"mat-form-field",5),f(6,"mat-icon",6)(7,"input",7),a()()(),t(8,"div",8)(9,"div",9)(10,"mat-tab-group",10,0),k("selectedTabChange",function(ve){return H(F),z(d.tabChanged(ve))}),t(12,"mat-tab",11),u(13,ht,1,1,"ng-template",12),a(),t(14,"mat-tab",13),u(15,St,1,1,"ng-template",12),a(),t(16,"mat-tab",14),u(17,_t,1,1,"ng-template",12),a(),t(18,"mat-tab",15),u(19,It,1,1,"ng-template",12),a()()()()()}s&2&&(r(5),m("subscriptSizing","dynamic"),r(),m("svgIcon","heroicons_solid:magnifying-glass"),r(),m("autocomplete","off")("placeholder","Buscar"),r(3),m("animationDuration","500"))},dependencies:[Qe,V,A,R,at,ot,rt,w]});let e=n;return e})();var wt=()=>["/pages/gestion-creditos/creditos"];function At(e,n){if(e&1&&(t(0,"mat-option",32),o(1),a()),e&2){let i=n.$implicit;m("value",i.id),r(),c(i.nombre)}}function Tt(e,n){if(e&1&&(b(0),u(1,At,2,2,"mat-option",31),x()),e&2){let i=n.ngIf;r(),m("ngForOf",i.data)}}function Ft(e,n){if(e&1&&(t(0,"mat-option",32),o(1),a()),e&2){let i=n.$implicit;m("value",i.id),r(),c(i.detalleInversion+" - "+i.rubroInversion)}}function Mt(e,n){if(e&1&&(b(0),u(1,Ft,2,2,"mat-option",31),x()),e&2){let i=n.ngIf;r(),m("ngForOf",i.data)}}function kt(e,n){if(e&1&&(t(0,"mat-form-field",18)(1,"mat-label"),o(2,"Tasa de interes"),a(),t(3,"mat-select",33)(4,"mat-option",32),o(5),a()()()),e&2){let i=n.$implicit;r(3),m("formControlName","idTasaInteres"),r(),m("value",i.id),r(),c(i.porcentaje)}}function Nt(e,n){e&1&&Ie(0,kt,6,3,"mat-form-field",18,Ee),e&2&&De(n.data)}function Pt(e,n){e&1&&(t(0,"div",22)(1,"fuse-alert",34)(2,"span",35),o(3,"Informaci\xF3n"),a(),o(4," No hay tasas de inter\xE9s disponibles, por favor comuniquese con el administrador. "),a()()),e&2&&(r(),m("type","info")("appearance","outline"))}function Vt(e,n){if(e&1){let i=U();t(0,"div",10)(1,"div",11)(2,"div")(3,"h3",12),o(4),a(),t(5,"p",13),o(6,"Identificaci\xF3n: "),t(7,"span",14),o(8),a()(),t(9,"p",13),o(10,"Empresa: "),t(11,"span",14),o(12),a()(),t(13,"p",15),o(14,"Cargo: "),t(15,"span",14),o(16),a()(),t(17,"p",13),o(18,"Correo: "),t(19,"span",14),o(20),a()(),t(21,"p",13),o(22,"Direcci\xF3n: "),t(23,"span",14),o(24),a()(),t(25,"p",13),o(26,"Tel\xE9fono: "),t(27,"span",14),o(28),a()()(),t(29,"div")(30,"p",13),o(31,"N\xFAmero de cr\xE9dito: "),t(32,"span",14),o(33),a()(),t(34,"p",13),o(35,"Cupo solicitado: "),t(36,"span",14),o(37),g(38,"currency"),a()(),t(39,"p",13),o(40,"Fecha de Solicitud: "),t(41,"span",14),o(42),g(43,"date"),a()()()(),f(44,"hr"),t(45,"div")(46,"p",16),o(47,"Informaci\xF3n de Cr\xE9dito"),a(),t(48,"form",17)(49,"mat-form-field",18)(50,"mat-label"),o(51,"Tipo de pago"),a(),t(52,"mat-select",19),u(53,Tt,2,1,"ng-container",20),g(54,"async"),a()(),t(55,"mat-form-field",18)(56,"mat-label"),o(57,"Capital de inversi\xF3n"),a(),t(58,"mat-select",21),u(59,Mt,2,1,"ng-container",20),g(60,"async"),a()(),u(61,Nt,2,0),g(62,"async"),u(63,Pt,5,2,"div",22),t(64,"mat-form-field",18)(65,"mat-label"),o(66,"Cantidad de cuotas"),a(),f(67,"input",23),a(),t(68,"mat-form-field",18)(69,"mat-label"),o(70,"Cupo sugerido"),a(),f(71,"input",24),a(),t(72,"mat-form-field",18)(73,"mat-label"),o(74,"Cupo aprobado"),a(),f(75,"input",25),a(),t(76,"mat-form-field",18)(77,"mat-label"),o(78,"Fecha de vencimiento"),a(),f(79,"input",26)(80,"mat-datepicker-toggle",27)(81,"mat-datepicker",null,0),a(),t(83,"mat-form-field",18)(84,"mat-label"),o(85,"Fecha de corte"),a(),f(86,"input",26)(87,"mat-datepicker-toggle",27)(88,"mat-datepicker",null,1),a()()(),b(90),t(91,"div",28)(92,"button",29),o(93," Rechazar "),a(),t(94,"button",30),k("click",function(){H(i);let s=v();return z(s.onSave())}),o(95," Aprobar "),a()(),x(),a()}if(e&2){let i,l=be(82),s=be(89),d=v();r(4),Z("",d.items.trabajador.primerNombre," ",d.items.trabajador.segundoNombre," ",d.items.trabajador.primerApellido," ",d.items.trabajador.segundoApellido," "),r(4),c(d.items.trabajador.numDoc),r(4),c(d.items.nombreSubEmpresa),r(4),c(d.items.trabajador.cargo),r(4),c(d.items.trabajador.correo),r(4),c(d.items.trabajador.direccion),r(4),c(d.items.trabajador.telefono),r(5),c(d.items.numCredito),r(4),c(C(38,30,d.items.cupoSolicitado)),r(5),c(D(43,32,d.items.fechaCreacion,"dd/MM/yyyy")),r(6),m("formGroup",d.form),r(4),m("formControlName","idTipoPago"),r(),m("ngIf",C(54,35,d.tipoPagos$)),r(5),m("formControlName","idCapitalInversion"),r(),m("ngIf",C(60,37,d.capital$)),r(2),_e((i=C(62,39,d.tasas$))?61:63,i),r(6),m("formControlName","cantCuotas"),r(4),m("readonly",!0),r(4),m("formControlName","cupoAprobado"),r(4),m("matDatepicker",l)("formControlName","fechaVencimiento"),r(),m("for",l),r(6),m("matDatepicker",s)("formControlName","fechaCorte"),r(),m("for",s),r(5),m("disabled",d.form.invalid),r(2),m("disabled",d.form.invalid)}}var Ot={validation:!1},pt=(()=>{let n=class n{constructor(){this.toasService=p(me),this.fuseService=p(O),this.estadosDatosService=p(B),this.activatedRoute=p(W),this.creditoService=p(G),this.router=p(P),this.tiposPagos=p(Ye),this.capitalInversion=p(Xe),this.estadoCreditoService=p(lt),this.tasaService=p(et),this.fb=p(ze),this.datePipe=p(h),this.swalService=p(ue),this.parametroTasa="Activas",this.tipoPagos$=this.tiposPagos.getTiposPagos().pipe(q(l=>{let s=l.data;s&&this.form.get("idTipoPago").setValue(s[0].id)})),this.capital$=this.capitalInversion.getCapitales().pipe(q(l=>{let s=l.data;s&&this.form.get("idCapitalInversion").setValue(s[0].id)})),this.estadoCredito=[],this.tasas$=this.tasaService.getTasasParametros(this.parametroTasa).pipe(q(l=>{let s=l.data;s&&this.form.get("idTasaInteres").setValue(s[0].id)})),this.idCredito="",this.CodigosEstadosSolicitudes=nt}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getCredito(this.idCredito),this.getEstadoCredito(),this.createForm()}getCredito(l){this.subcription$=this.creditoService.getCredito(l).subscribe(s=>{this.items=s.data})}getEstadoCredito(){this.subcription$=this.estadoCreditoService.getEstadoCreditos().pipe(M(l=>(l.data.forEach(s=>{s.estado?s.estado=$.ACTIVO:s.estado=$.INACTIVO}),l))).subscribe(l=>{this.estadoCredito=l.data})}onSave(){if(this.form.valid){let l=this.form.getRawValue(),{fechaVencimiento:d,fechaCorte:F,cupoAprobado:he}=l,ve=Se(l,["fechaVencimiento","fechaCorte","cupoAprobado"]),ft=this.datePipe.transform(d,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),vt=this.datePipe.transform(F,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),Ce=L({fechaVencimiento:ft,fechaCorte:vt,idEstadoCredito:xe.APROBADO,cupoAprobado:Number(he),id:this.idCredito},ve);console.log(Ce),this.fuseService.open(L({},se)).afterClosed().subscribe(gt=>{gt==="confirmed"&&this.creditoService.putCredito(Ce).subscribe(bt=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.router.navigate(["/pages/gestion-creditos/creditos"])},bt=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})})})}}createForm(){this.form=this.fb.group({cupoAprobado:["",[y.required]],idTipoPago:[""],idCapitalInversion:[""],idTasaInteres:["",[y.required]],fechaVencimiento:["",[y.required]],fechaCorte:["",[y.required]],cantCuotas:["",[y.required]]})}ngOnDestroy(){this.subcription$.unsubscribe()}};n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=_({type:n,selectors:[["app-form-detalle"]],standalone:!0,features:[E([{provide:ee,useClass:de},{provide:Y,useValue:"en-GB"},h,pe(Ot)]),I],decls:10,vars:4,consts:[["picker",""],["fechaCorte",""],["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","print:p-0","w-full"],[1,"bg-card","shadow","print:bg-transparent","print:p-0","print:shadow-none","rounded-2xl","mx-auto","overflow-hidden","w-full","max-w-3xl"],[1,"bg-crediblue-50","px-6","py-4","flex","items-center","justify-between"],["mat-button","",1,"flex","items-center",3,"routerLink"],[1,"text-white",3,"svgIcon"],[1,"text-lg","sm:text-xl","font-bold","text-white"],["class","p-4 sm:p-6",4,"ngIf"],[1,"p-4","sm:p-6"],[1,"mb-4","grid","grid-cols-1","md:grid-cols-2","gap-4","justify-items-stretch","lg:justify-items-center"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-800"],[1,"font-medium","text-gray-600"],[1,"text-md","text-secondary"],[1,"text-gray-600","font-semibold"],[1,"text-lg","text-gray-600","font-bold","mb-10"],[3,"formGroup"],["floatLabel","always",1,"w-full"],[3,"formControlName"],[4,"ngIf"],["placeholder","Capital de inversion",3,"formControlName"],[1,"inline-block","mb-4","print:p-0","w-full"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Cantidad de cuotas",3,"formControlName"],["matInput","","value","1000000","mask","separator.0","thousandSeparator",".","placeholder","cupo sugerido",3,"readonly"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Cupo aprobado",3,"formControlName"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],[1,"flex","flex-wrap","justify-end","items-center","mt-7","gap-2.5"],["mat-flat-button","",1,"lg:w-auto","w-full","bg-crediorange-100","text-white","font-semibold","py-2","px-4","rounded-lg","transition","duration-200",3,"disabled"],["mat-flat-button","",1,"lg:w-auto","w-full","bg-crediblue-50","hover:bg-crediblue-100","text-white","font-semibold","py-2","px-4","rounded-lg","transition","duration-200",3,"click","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Tasa de interes",3,"formControlName"],[3,"type","appearance"],["fuseAlertTitle",""]],template:function(s,d){s&1&&(t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div")(5,"a",6),f(6,"mat-icon",7),a()(),t(7,"h2",8),o(8,"Detalle de Cr\xE9dito"),a()(),u(9,Vt,96,41,"div",9),a()()()),s&2&&(r(5),m("routerLink",Q(3,wt)),r(),m("svgIcon","heroicons_outline:arrow-long-left"),r(3),m("ngIf",d.items))},dependencies:[te,ae,A,X,w,S,h,oe,Te,V,ie,Me,Ze,K,j,Ge,re,ne,Be,R,Je,Ke,We,je,le,qe,He,ce,Ue]});let e=n;return e})();var jt=(e,n)=>({"bg-crediblue-50":e,"bg-credigray-100":n});function Rt(e,n){e&1&&(t(0,"mat-error"),o(1,"El valor es requerido!"),a())}function Bt(e,n){e&1&&(t(0,"mat-error"),o(1,"El valor ingresado no puede superar el cupo disponible!"),a())}var $t={validation:!1},ct=(()=>{let n=class n{constructor(){this._matData=p(Ne),this.swalService=p(ue),this.tipoSolicitudService=p(it),this.tipoSolicitud$=this.tipoSolicitudService.getTipos().pipe(M(l=>(this.idSolicitud=l.data[0].id,l))).subscribe(),this.cupo=new $e(""),this.fuseService=p(O),this.solicitudService=p(tt),this.dialogRef=p(ke)}validarCampo(){this.cupoAvance=this._matData.data.cupoAprobado-this._matData.data.cupoAprobado*20/100,this.cupo.setValidators(y.compose([y.required,Gt(this.cupoAvance)])),this.cupo.updateValueAndValidity()}onSave(){let l={cupo:Number(this.cupo.value),idTipoSolicitud:this.idSolicitud};this.fuseService.open(L({},se)).afterClosed().subscribe(d=>{d==="confirmed"?this.solicitudService.postSolicitudes(l).subscribe(F=>{this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.closeDialog()},F=>{this.swalService.ToastAler({icon:"info",title:F.error.errorMenssages[0],timer:6e3})}):this.closeDialog()})}closeDialog(){this.dialogRef.close()}ngOnInit(){this.validarCampo()}};n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=_({type:n,selectors:[["app-dialog-confirm-desembolso"]],standalone:!0,features:[E([pe($t)]),I],decls:25,vars:17,consts:[[1,"relative","flex","h-full","w-full","flex-col"],[1,"flex","flex-auto","flex-col","items-center","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","rounded-full","sm:mr-4","bg-blue-100","text-blue-600","dark:bg-blue-600","dark:text-blue-50"],[3,"svgIcon"],[1,"flex","flex-col","items-center","space-y-1","text-center","sm:mt-0","sm:items-start","sm:pr-8","sm:text-left"],[1,"text-xl","font-medium","leading-6"],[1,"text-secondary"],[1,"mt-4","flex","flex-col","items-center","space-y-1","text-center","sm:mt-0","sm:items-start","sm:text-left"],[1,"w-full"],["matInput","","thousandSeparator",".","placeholder","Valor solicitado",3,"formControl","mask"],[4,"ngIf"],[1,"flex","items-center","justify-center","space-x-3","bg-gray-50","py-4","dark:bg-black","dark:bg-opacity-10","sm:justify-end"],["mat-stroked-button","",1,"fuse-mat-button-large","bg-crediorange-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"matDialogClose"],["mat-flat-button","",1,"fuse-mat-button-large","hover:bg-crediblue-100","text-white","font-semibold","py-2","px-4","rounded-lg","transition","duration-200",3,"click","color","matDialogClose","ngClass","disabled"]],template:function(s,d){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),f(3,"mat-icon",3),a(),t(4,"div",4)(5,"div",5),o(6," Confirmacion "),a(),t(7,"div",6),o(8," Tu cupo disponible para avance es de "),t(9,"b"),o(10),g(11,"currency"),a(),o(12,", puedes solicitar un valor menor o igual a este. "),a()()(),t(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),o(16,"Valor"),a(),f(17,"input",9),u(18,Rt,2,0,"mat-error",10)(19,Bt,2,0,"mat-error",10),a()(),t(20,"div",11)(21,"button",12),o(22," Cancelar "),a(),t(23,"button",13),k("click",function(){return d.onSave()}),o(24," Confirmar "),a()()()),s&2&&(r(3),m("svgIcon","heroicons_solid:question-mark-circle"),r(7),c(D(11,11,d.cupoAvance,"USD")),r(7),m("formControl",d.cupo)("mask","separator.0"),r(),m("ngIf",d.cupo.touched&&d.cupo.hasError("required")),r(),m("ngIf",(d.cupo.touched||d.cupo.dirty)&&d.cupo.hasError("notEqual")),r(2),m("matDialogClose","cancelled"),r(2),m("color","primary")("matDialogClose","confirmed")("ngClass",we(14,jt,d.cupo.valid,d.cupo.invalid))("disabled",d.cupo.invalid))},dependencies:[j,re,ne,oe,V,A,R,ie,Ve,le,Le,w,Oe,S,ce,J]});let e=n;return e})();function Gt(e){return n=>{let i=n.value;return console.log(e),i>e?{notEqual:!0}:null}}var Lt=()=>["/pages/gestion-creditos/creditos"],qt=(e,n,i)=>({"bg-green-600":e,"bg-yellow-600":n,"bg-red-600":i});function Ht(e,n){e&1&&(t(0,"p",16),o(1,"Movimientos"),a())}function zt(e,n){if(e&1&&(b(0),t(1,"fuse-card",20)(2,"div",21)(3,"p",22),o(4),a(),t(5,"p",22),o(6),g(7,"date"),a()(),t(8,"div",21)(9,"p",22),o(10),a(),t(11,"p",23),o(12),g(13,"currency"),a()(),t(14,"div",21)(15,"p",22),o(16),a(),t(17,"p",22),o(18),a()(),t(19,"div",21)(20,"p",22),o(21),a()(),t(22,"div",24),f(23,"p",25),a()(),x()),e&2){let i=n.$implicit,l=v(3);r(4),c(i.nombreSubEmpresa),r(2),c(D(7,8,i.fechaCreacion,"dd/MM/yyyy")),r(4),N("Factura: ",i.numeroFactura,""),r(2),N("Valor: ",C(13,11,i.montoConsumo),""),r(4),N("Cuotas: ",i.cantidadCuotas,""),r(2),c(i.nombreEstadoCredito),r(3),N("Tipo: ",i.nombreTipoConsumo,""),r(2),m("ngClass",Ae(13,qt,i.idEstadoCredito==l.CodigosDetalleConsumo.APROBADA,i.idEstadoCredito==l.CodigosDetalleConsumo.EN_REVISION,i.idEstadoCredito==l.CodigosDetalleConsumo.RECHAZADA))}}function Ut(e,n){if(e&1&&(t(0,"div",17)(1,"div",18),u(2,zt,24,17,"ng-container",19),a()()),e&2){let i=v(2);r(2),m("ngForOf",i.items.detalleConsumos)}}function Zt(e,n){if(e&1&&(t(0,"div",8)(1,"div",9)(2,"div")(3,"h3",10),o(4),a(),t(5,"p",11),o(6,"Identificaci\xF3n: "),t(7,"span",12),o(8),a()(),t(9,"p",11),o(10,"Empresa: "),t(11,"span",12),o(12),a()(),t(13,"p",11),o(14,"Cargo: "),t(15,"span",12),o(16),a()(),t(17,"p",11),o(18,"Correo: "),t(19,"span",12),o(20),a()(),t(21,"p",11),o(22,"Direcci\xF3n: "),t(23,"span",12),o(24),a()(),t(25,"p",11),o(26,"Tel\xE9fono: "),t(27,"span",12),o(28),a()()(),t(29,"div")(30,"p",11),o(31,"N\xFAmero de cr\xE9dito: "),t(32,"span",12),o(33),a()(),t(34,"p",11),o(35,"Cupo aprobado: "),t(36,"span",12),o(37),g(38,"currency"),a()(),t(39,"p",11),o(40,"Tasa de interes: "),t(41,"span",12),o(42),a()(),t(43,"p",11),o(44,"Fecha de aprobaci\xF3n: "),t(45,"span",12),o(46),g(47,"date"),a()(),t(48,"p",11),o(49,"Fecha de vencimiento: "),t(50,"span",12),o(51),g(52,"date"),a()(),t(53,"p",11),o(54,"Cupo utilizado: "),t(55,"span",12),o(56),g(57,"currency"),a()(),t(58,"p",11),o(59,"Saldo disponible: "),t(60,"span",12),o(61),g(62,"currency"),a()()()(),f(63,"hr",13),u(64,Ht,2,0,"p",14)(65,Ut,3,1,"div",15),a()),e&2){let i=v();r(4),Z("",i.items.trabajador.primerNombre," ",i.items.trabajador.segundoNombre," ",i.items.trabajador.primerApellido," ",i.items.trabajador.segundoApellido," "),r(4),c(i.items.trabajador.numDoc),r(4),c(i.items.nombreSubEmpresa),r(4),c(i.items.trabajador.cargo),r(4),c(i.items.trabajador.correo),r(4),c(i.items.trabajador.direccion),r(4),c(i.items.trabajador.telefono),r(5),c(i.items.numCredito),r(4),c(C(38,19,i.items.cupoAprobado)),r(5),N("",i.items.porcTasaInteres,"%"),r(4),c(D(47,21,i.items.fechaAprobacion,"dd/MM/yyyy")),r(5),c(D(52,24,i.items.fechaVencimiento,"dd/MM/yyyy")),r(5),c(C(57,27,i.items.cupoConsumido)),r(5),c(C(62,29,i.items.cupoDisponible)),r(3),m("ngIf",i.items.detalleConsumos),r(),m("ngIf",i.items.detalleConsumos)}}var ut=(()=>{let n=class n{constructor(){this.toasService=p(me),this.fuseService=p(O),this.estadosDatosService=p(B),this.activatedRoute=p(W),this.creditoService=p(G),this.router=p(P),this.datePipe=p(h),this.data=[],this.capital=[],this.estadoCredito=[],this.tasas=[],this.idCredito="",this._matDialog=p(Pe),this.CodigosDetalleConsumo=mt}ngOnDestroy(){this.subcription$.unsubscribe()}onSolicitud(){this._matDialog.open(ct,{data:{data:this.items},width:"30%",disableClose:!0})}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getCredito(this.idCredito)}getCredito(l){this.subcription$=this.creditoService.getCredito(l).subscribe(s=>{this.items=s.data})}};n.\u0275fac=function(s){return new(s||n)},n.\u0275cmp=_({type:n,selectors:[["app-form-view-detalle"]],standalone:!0,features:[E([{provide:ee,useClass:de},{provide:Y,useValue:"en-GB"},h]),I],decls:10,vars:4,consts:[["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-4","sm:p-8","print:p-0","w-full"],[1,"bg-card","shadow","print:bg-transparent","print:p-0","print:shadow-none","rounded-2xl","mx-auto","overflow-hidden","w-full","max-w-5xl"],[1,"bg-crediblue-50","px-6","py-4","flex","items-center","justify-between"],["mat-button","",1,"flex","items-center",3,"routerLink"],[1,"text-white",3,"svgIcon"],[1,"text-lg","sm:text-xl","font-bold","text-white"],["class","p-4 sm:p-6",4,"ngIf"],[1,"p-4","sm:p-6"],[1,"mb-4","grid","grid-cols-1","md:grid-cols-2","gap-4","justify-items-stretch","lg:justify-items-center"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-800"],[1,"text-gray-600","font-bold"],[1,"text-gray-800"],[1,"my-4"],["class","text-lg text-black font-bold mb-6",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"text-lg","text-black","font-bold","mb-6"],[1,"mb-4"],[1,"flex","flex-wrap","gap-2.5","justify-center"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","p-4","rounded-2xl","shadow-lg","w-full","md:w-1/2","lg:w-1/3"],[1,"flex","justify-between"],[1,"text-gray-800","font-semibold"],[1,"text-gray-800","font-bold"],[1,"w-full","mt-2"],[1,"h-2.5","rounded-full",3,"ngClass"]],template:function(s,d){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),f(6,"mat-icon",5),a()(),t(7,"h2",6),o(8,"Detalle de Cr\xE9dito"),a()(),u(9,Zt,66,31,"div",7),a()()()),s&2&&(r(5),m("routerLink",Q(3,Lt)),r(),m("svgIcon","heroicons_outline:arrow-long-left"),r(3),m("ngIf",d.items))},dependencies:[te,S,h,j,ae,A,K,w,X,st,J]});let e=n;return e})();var jo=[{path:"",component:dt},{path:"detalle/:id",component:pt},{path:"view-detalle/:id",component:ut}];export{jo as default};
