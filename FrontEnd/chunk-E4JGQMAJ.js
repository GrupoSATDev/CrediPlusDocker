import{a as $}from"./chunk-PWHPCRCN.js";import{a as Me}from"./chunk-43SPP6HY.js";import{a as Ie,b as Fe,c as Ne}from"./chunk-CHRBUJKG.js";import{a as Te}from"./chunk-Z2MQWE4K.js";import{a as we}from"./chunk-BPPQTQZC.js";import{a as xe}from"./chunk-VLAQALEV.js";import{a as ke}from"./chunk-YS72ZEKI.js";import{a as U}from"./chunk-6IEWE3OU.js";import{a as Ce}from"./chunk-LBLJGZM7.js";import{a as H,c as A,d as De}from"./chunk-JM6PAC2Q.js";import{a as ye}from"./chunk-55LFJ2HF.js";import"./chunk-CHOSRW5W.js";import{a as me,b as le,c as se,k as de}from"./chunk-GIPKHLVS.js";import"./chunk-7U4JZNVG.js";import{B as Ee,E as Se,I as k,b as pe,e as ce,i as M,l as ue,p as ge,q as ve,t as he,w as _e,x as be}from"./chunk-CURMXRYA.js";import{$ as re,Q as ne,R as ae,ea as T,ja as w}from"./chunk-DARKUWJB.js";import"./chunk-EENLYY7H.js";import{a as fe}from"./chunk-EJW5UVWF.js";import{f as ee,g as te,i as ie,j as W,r as oe}from"./chunk-NP3GUERB.js";import{$ as K,Cb as n,Db as e,Eb as c,Fb as h,Gb as _,Ib as X,Ob as b,Qb as B,Wa as Q,Xb as z,Yb as l,Za as t,Zb as E,_a as F,_b as L,dc as Y,ea as R,ec as N,fa as u,ka as I,mc as S,nc as y,pb as g,pc as Z,q as j,rb as i,ua as x,va as D}from"./chunk-32HXX3OB.js";import{a as C,d as O}from"./chunk-NEB6MB4Y.js";var $e=(()=>{let r=class r{constructor(m,a){this._http=m,this.appSettings=a}getCargos(){return this._http.get(this.appSettings.cargos.url.base)}postCargos(m){return delete m.id,this._http.post(this.appSettings.cargos.url.base,m)}putCargos(m){let a=m.id;return delete m.id,this._http.put(`${this.appSettings.cargos.url.base}/${a}`,m)}};r.\u0275fac=function(a){return new(a||r)(R(oe),R(fe))},r.\u0275prov=K({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();function Pe(o,r){if(o&1&&(h(0),c(1,"img",27),_()),o&2){let s=B();t(),i("src",s.image,Q)("alt","Profile avatar")}}function Oe(o,r){if(o&1&&(n(0,"div",28),l(1),e()),o&2){let s,m=B();t(),L(" ",(s=m.form.get("primerNombre").value.charAt(0))!==null&&s!==void 0?s:"P"," ")}}function je(o,r){if(o&1&&(n(0,"mat-option",30),l(1),e()),o&2){let s=r.$implicit;i("value",s.id),t(),E(s.nombre)}}function Re(o,r){if(o&1&&(h(0),g(1,je,2,2,"mat-option",29),_()),o&2){let s=r.ngIf;t(),i("ngForOf",s.data)}}function Be(o,r){if(o&1&&(n(0,"mat-option",30),l(1),e()),o&2){let s=r.$implicit;i("value",s.id),t(),E(s.nombre)}}function ze(o,r){if(o&1&&(h(0),g(1,Be,2,2,"mat-option",29),_()),o&2){let s=r.ngIf;t(),i("ngForOf",s.data)}}function Le(o,r){if(o&1&&(n(0,"mat-option",30),l(1),e()),o&2){let s=r.$implicit;i("value",s.id),t(),E(s.nombre)}}function We(o,r){if(o&1&&(h(0),g(1,Le,2,2,"mat-option",29),_()),o&2){let s=r.ngIf;t(),i("ngForOf",s.data)}}function He(o,r){if(o&1&&(n(0,"mat-option",30),l(1),e()),o&2){let s=r.$implicit;i("value",s.id),t(),E(s.nombre)}}function Ue(o,r){if(o&1&&(h(0),g(1,He,2,2,"mat-option",29),_()),o&2){let s=r.ngIf;t(),i("ngForOf",s.data)}}function Je(o,r){if(o&1&&(n(0,"mat-option",30),l(1),e()),o&2){let s=r.$implicit;i("value",s.id),t(),E(s.razonSocial)}}function qe(o,r){if(o&1&&(h(0),g(1,Je,2,2,"mat-option",29),_()),o&2){let s=r.ngIf;t(),i("ngForOf",s.data)}}var J=(()=>{let r=class r{constructor(){this.fb=u(Ee),this.dialogRef=u(me),this.fuseService=u(de),this.estadosDatosService=u(A),this.toasService=u(De),this.tiposDocumentosService=u(we),this._locacionService=u(xe),this.generoService=u(ke),this.empresaClienteService=u(Me),this.datePipe=u(W),this.empleadosServices=u($),this.cargosServices=u($e),this.departamentos$=this._locacionService.getDepartamentos(),this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos(),this.generos$=this.generoService.getGeneros(),this.empresasClientes$=this.empresaClienteService.getEmpresas(),this.cargos$=this.cargosServices.getCargos(),this._matData=u(le),this.profile={avatar:"",name:"Pedro"}}ngOnInit(){this.createForm();let m=this._matData;if(m.edit){let a=m.data;this.form.patchValue(a);let{idDepartamento:p,fechaNacimiento:f}=a,d=new Date(f);this.form.patchValue({fechaNacimiento:d}),this.municipios$=this._locacionService.getMunicipio(p),this.image=`data:image/png;base64,  ${a.foto}`}}onFileSelected(m){let a=m.target;if(a.files&&a.files.length>0){let p=a.files[0],f=new FileReader;f.onload=()=>{let d=f.result;this.image=d;let v=d.split(",")[1];this.form.get("foto").setValue(v)},f.readAsDataURL(p)}}getMunicipios(m){let a=m.value;this.municipios$=this._locacionService.getMunicipio(a)}onSave(){if(this.form.valid)if(this._matData.edit){let a=this.form.getRawValue(),{idDepartamento:f,fechaNacimiento:d}=a,v=O(a,["idDepartamento","fechaNacimiento"]),G=this.datePipe.transform(d,"dd/MM/yyyy"),V=C({fechaNacimiento:G},v);this.fuseService.open(C({},H)).afterClosed().subscribe(P=>{P==="confirmed"?this.empleadosServices.putEmpleados(V).subscribe(q=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let m=this.form.getRawValue(),{idDepartamento:f,fechaNacimiento:d}=m,v=O(m,["idDepartamento","fechaNacimiento"]),G=this.datePipe.transform(d,"dd/MM/yyyy"),V=C({fechaNacimiento:G},v);this.fuseService.open(C({},H)).afterClosed().subscribe(P=>{P==="confirmed"?this.empleadosServices.postEmpleados(V).subscribe(q=>{console.log(q),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],primerNombre:[""],segundoNombre:[""],primerApellido:[""],segundoApellido:[""],idTipoDoc:[""],numDoc:[""],idDepartamento:[""],idMunicipio:[""],telefono:[""],telefono2:[""],direccion:[""],idGenero:[""],correo:[""],cargo:[""],fechaNacimiento:[""],foto:[""],firma:[""],idSubEmpresa:[""]})}closeDialog(){this.dialogRef.close()}};r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=I({type:r,selectors:[["app-form-empleados"]],standalone:!0,features:[Y([{provide:ae,useClass:Te},{provide:ne,useValue:"en-GB"},W]),N],decls:133,vars:44,consts:[["noAvatar",""],["picker",""],["data",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full","mb-8"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],["type","file",1,"absolute","inset-0","opacity-0","cursor-pointer",3,"change"],[4,"ngIf","ngIfElse"],[1,"font-bold","mb-4","text-2xl"],[1,"flex","gap-2.5"],[1,"w-full"],["matInput","",3,"formControlName"],[3,"formControlName"],[4,"ngIf"],["matInput","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],[3,"selectionChange","formControlName"],["matInput","",3,"matDatepicker"],["matInput",""],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"],[1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,p){if(a&1){let f=X();n(0,"div",3)(1,"div",4)(2,"div",5),l(3),e(),n(4,"form",6)(5,"div",7)(6,"div",8),c(7,"mat-icon",9),n(8,"div",10),l(9," Cambiar foto "),e(),n(10,"input",11),b("change",function(v){return x(f),D(p.onFileSelected(v))}),e()(),g(11,Pe,2,2,"ng-container",12)(12,Oe,2,1,"ng-template",null,0,Z),e(),n(14,"div")(15,"p",13),l(16,"Informaci\xF3n general"),e(),n(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),l(20,"Primer nombre"),e(),c(21,"input",16),e(),n(22,"mat-form-field",15)(23,"mat-label"),l(24,"Segundo nombre"),e(),c(25,"input",16),e()(),n(26,"div",14)(27,"mat-form-field",15)(28,"mat-label"),l(29,"Primer apellido"),e(),c(30,"input",16),e(),n(31,"mat-form-field",15)(32,"mat-label"),l(33,"Segundo apellido"),e(),c(34,"input",16),e()(),n(35,"div",14)(36,"mat-form-field",15)(37,"mat-label"),l(38,"Tipo de documento"),e(),n(39,"mat-select",17),g(40,Re,2,1,"ng-container",18),S(41,"async"),e()(),n(42,"mat-form-field",15)(43,"mat-label"),l(44,"N\xFAmero de identificaci\xF3n"),e(),c(45,"input",16),e()(),n(46,"div",14)(47,"mat-form-field",15)(48,"mat-label"),l(49,"G\xE9nero"),e(),n(50,"mat-select",17),g(51,ze,2,1,"ng-container",18),S(52,"async"),e()(),n(53,"mat-form-field",15)(54,"mat-label"),l(55,"Fecha de nacimiento"),e(),c(56,"input",19)(57,"mat-datepicker-toggle",20)(58,"mat-datepicker",null,1),e()()(),n(60,"div")(61,"p",13),l(62,"Informaci\xF3n demogr\xE1fica"),e(),n(63,"div",14)(64,"mat-form-field",15)(65,"mat-label"),l(66,"Departamento"),e(),n(67,"mat-select",21,2),b("selectionChange",function(v){return x(f),D(p.getMunicipios(v))}),g(69,We,2,1,"ng-container",18),S(70,"async"),e()(),n(71,"mat-form-field",15)(72,"mat-label"),l(73,"Ciudad"),e(),n(74,"mat-select",17),g(75,Ue,2,1,"ng-container",18),S(76,"async"),e()()(),n(77,"div",14)(78,"mat-form-field",15)(79,"mat-label"),l(80,"Direcci\xF3n"),e(),c(81,"input",16),e(),n(82,"mat-form-field",15)(83,"mat-label"),l(84,"Celular"),e(),c(85,"input",16),e()(),n(86,"div",14)(87,"mat-form-field",15)(88,"mat-label"),l(89,"Tel\xE9fono"),e(),c(90,"input",16),e(),n(91,"mat-form-field",15)(92,"mat-label"),l(93,"Email"),e(),c(94,"input",16),e()(),n(95,"div",14)(96,"mat-form-field",15)(97,"mat-label"),l(98,"Empresa"),e(),n(99,"mat-select",17),g(100,qe,2,1,"ng-container",18),S(101,"async"),e()(),n(102,"mat-form-field",15)(103,"mat-label"),l(104,"Cargo"),e(),c(105,"input",16),e()(),n(106,"div",14)(107,"mat-form-field",15)(108,"mat-label"),l(109,"Inicio de contrato"),e(),c(110,"input",22)(111,"mat-datepicker-toggle",20)(112,"mat-datepicker",null,1),e(),n(114,"mat-form-field",15)(115,"mat-label"),l(116,"Fin de contrato"),e(),c(117,"input",22)(118,"mat-datepicker-toggle",20)(119,"mat-datepicker",null,1),e()(),n(121,"div",14)(122,"mat-form-field",15)(123,"mat-label"),l(124,"Salario devengado"),e(),c(125,"input",23),e()()(),n(126,"div",24)(127,"button",25),b("click",function(){return x(f),D(p.closeDialog())}),n(128,"span"),l(129," Cancelar "),e()(),n(130,"button",26),b("click",function(){return x(f),D(p.onSave())}),n(131,"span"),l(132," Guardar "),e()()()()()()}if(a&2){let f=z(13),d=z(59);t(3),L(" ",p._matData.edit?"Actualizar empleado":"Agregar empleado"," "),t(),i("formGroup",p.form),t(3),i("svgIcon","heroicons_outline:camera"),t(4),i("ngIf",p.form.get("foto").value)("ngIfElse",f),t(10),i("formControlName","primerNombre"),t(4),i("formControlName","segundoNombre"),t(5),i("formControlName","primerApellido"),t(4),i("formControlName","segundoApellido"),t(5),i("formControlName","idTipoDoc"),t(),i("ngIf",y(41,34,p.tiposDocumentos$)),t(5),i("formControlName","numDoc"),t(5),i("formControlName","idGenero"),t(),i("ngIf",y(52,36,p.generos$)),t(5),i("matDatepicker",d)("formControlName","fechaNacimiento"),t(),i("for",d),t(10),i("formControlName","idDepartamento"),t(2),i("ngIf",y(70,38,p.departamentos$)),t(5),i("formControlName","idMunicipio"),t(),i("ngIf",y(76,40,p.municipios$)),t(6),i("formControlName","direccion"),t(4),i("formControlName","telefono"),t(5),i("formControlName","telefono2"),t(4),i("formControlName","correo"),t(5),i("formControlName","idSubEmpresa"),t(),i("ngIf",y(101,42,p.empresasClientes$)),t(5),i("formControlName","cargo"),t(5),i("matDatepicker",d),t(),i("for",d),t(6),i("matDatepicker",d),t(),i("for",d),t(9),i("color","primary"),t(3),i("color","primary")}},dependencies:[T,M,k,pe,Se,he,ue,ge,ve,_e,be,ie,re,ye,ee,te,Ie,Fe,Ne,ce,w]});let o=r;return o})();var Ge=(()=>{let r=class r{constructor(m,a,p){this._matDialog=m,this.estadoDatosService=a,this.empleadoService=p,this.data=[],this.columns=["Estado","Documento","Identificaci\xF3n","Nombre completo","Tel\xE9fono","Cargo"],this.columnPropertyMap={Estado:"estado",Documento:"nombreTipoDocumento",Identificaci\u00F3n:"numDoc","Nombre completo":"nombreCompleto",Tel\u00E9fono:"telefono",Cargo:"cargo"},this.buttons=[{label:"Edit",icon:"edit",action:f=>{console.log("Editing",f),this.selectedData=f,this.onEdit()}}]}onNew(){this._matDialog.open(J,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",width:"50%",maxWidth:"100%"})}onEdit(){this._matDialog.open(J,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",width:"50%",maxWidth:"100%"})}getEmpleados(){this.subcription$=this.empleadoService.getEmpleados().pipe(j(m=>(m.data.forEach(a=>{a.estado?a.estado=U.ACTIVO:a.estado=U.INACTIVO}),m)),j(m=>(m.data.forEach(a=>{a&&(a.nombreCompleto=a.primerNombre.concat(" ",a.segundoNombre?a.segundoNombre+" ":"",a.primerApellido," ",a.segundoApellido))}),m))).subscribe(m=>{this.data=m.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(a=>{a&&this.getEmpleados()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEmpleados(),this.listenGrid()}};r.\u0275fac=function(a){return new(a||r)(F(se),F(A),F($))},r.\u0275cmp=I({type:r,selectors:[["app-grid-empleados"]],standalone:!0,features:[N],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(a,p){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Empleados"),e(),n(4,"div",3)(5,"mat-form-field",4),c(6,"mat-icon",5)(7,"input",6),e(),n(8,"button",7),b("click",function(){return p.onNew()}),c(9,"mat-icon",8),n(10,"span",9),l(11,"Agregar"),e()()()(),n(12,"div",10)(13,"div",11),c(14,"app-custom-table",12),e()()()),a&2&&(t(5),i("subscriptSizing","dynamic"),t(),i("svgIcon","heroicons_solid:magnifying-glass"),t(),i("autocomplete","off")("placeholder","Buscar"),t(),i("color","primary"),t(),i("svgIcon","heroicons_outline:plus"),t(5),i("columns",p.columns)("displayedColumns",p.columns)("columnPropertyMap",p.columnPropertyMap)("data",p.data)("buttons",p.buttons))},dependencies:[Ce,T,M,w,k]});let o=r;return o})();var Ot=[{path:"",component:Ge}];export{Ot as default};
