import{a as I}from"./chunk-6IEWE3OU.js";import{a as T,b as X}from"./chunk-YSXUMPA6.js";import{a as x}from"./chunk-T5QDQ6JU.js";import{b as U}from"./chunk-T4MK3X37.js";import{a as N,b as P,c as R,k as $}from"./chunk-NOTZUBRJ.js";import"./chunk-JGIPM7RV.js";import{B as Q,F as S,b as O,i as v,l as B,p as W,q as H,t as L,v as q,w as J,y as K}from"./chunk-AZYYSVXK.js";import{ea as b,ja as V}from"./chunk-JWHB23S2.js";import"./chunk-TAOXPEWO.js";import{a as z}from"./chunk-RNHPHDKV.js";import{r as A}from"./chunk-TI3VW26V.js";import{$ as k,Cb as r,Db as m,Eb as p,Ob as u,Yb as d,Za as o,_a as h,_b as G,ea as C,ec as g,fa as c,ka as f,q as E,rb as s}from"./chunk-MZ7JCHPI.js";import{a as y,d as j}from"./chunk-NEB6MB4Y.js";var D=(()=>{let i=class i{constructor(e,t){this._http=e,this.appSettingService=t}getTass(){return this._http.get(this.appSettingService.tasasIntereses.url.base)}postTasas(e){return delete e.id,this._http.post(this.appSettingService.tasasIntereses.url.base,e)}putTasas(e){let t=e.id;return delete e.id,this._http.put(`${this.appSettingService.tasasIntereses.url.base}/${t}`,e)}};i.\u0275fac=function(t){return new(t||i)(C(A),C(z))},i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var M=(()=>{let i=class i{constructor(){this.fb=c(K),this.dialogRef=c(N),this.fuseService=c($),this.estadosDatosService=c(x),this.toasService=c(X),this._matData=c(P),this.tasasService=c(D)}ngOnInit(){this.createForm();let e=this._matData;if(e.edit){let t=e.data;this.form.patchValue(t)}}onSave(){if(this.form.valid)if(this._matData.edit){let t=this.form.getRawValue(),{porcentaje:a}=t,l={porcentaje:Number(a)};this.fuseService.open(y({},T)).afterClosed().subscribe(w=>{w==="confirmed"?this.tasasService.putTasas(l).subscribe(F=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let e=this.form.getRawValue(),{porcentaje:a}=e,l=j(e,["porcentaje"]),_={porcentaje:Number(a)};this.fuseService.open(y({},T)).afterClosed().subscribe(F=>{F==="confirmed"?this.tasasService.postTasas(_).subscribe(tt=>{console.log(tt),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],porcentaje:[""]})}closeDialog(){this.dialogRef.close()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["app-form-tasas"]],standalone:!0,features:[g],decls:16,vars:5,consts:[[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex","flex-wrap","justify-between"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3),m(),r(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),d(7,"Porcentaje %"),m(),p(8,"input",5),m(),r(9,"div",6)(10,"button",7),u("click",function(){return a.closeDialog()}),r(11,"span"),d(12," Cancelar "),m()(),r(13,"button",8),u("click",function(){return a.onSave()}),r(14,"span"),d(15," Guardar "),m()()()()()()),t&2&&(o(3),G(" ",a._matData.edit?"Actualizar tasa":"Crear tasa"," "),o(),s("formGroup",a.form),o(4),s("formControlName","porcentaje"),o(2),s("color","primary"),o(3),s("color","primary"))},dependencies:[b,v,S,O,Q,L,B,W,H,q,J]});let n=i;return n})();var Z=(()=>{let i=class i{constructor(e,t,a){this._matDialog=e,this.estadoDatosService=t,this.tasasService=a,this.data=[],this.columns=["Estado","Porcentaje %"],this.columnPropertyMap={Estado:"estado","Porcentaje %":"porcentaje"},this.buttons=[{label:"Edit",icon:"edit",action:l=>{console.log("Editing",l),this.selectedData=l,this.onEdit()}}]}onNew(){this._matDialog.open(M,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%"})}onEdit(){this._matDialog.open(M,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getTasas(){this.subcription$=this.tasasService.getTass().pipe(E(e=>(e.data.forEach(t=>{t.estado?t.estado=I.ACTIVO:t.estado=I.INACTIVO}),e))).subscribe(e=>{this.data=e.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(t=>{t&&this.getTasas()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getTasas(),this.listenGrid()}};i.\u0275fac=function(t){return new(t||i)(h(R),h(x),h(D))},i.\u0275cmp=f({type:i,selectors:[["app-grid-tasas"]],standalone:!0,features:[g],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3,"Tasas de interes"),m(),r(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5)(7,"input",6),m(),r(8,"button",7),u("click",function(){return a.onNew()}),p(9,"mat-icon",8),r(10,"span",9),d(11,"Crear tasa"),m()()()(),r(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),m()()()),t&2&&(o(5),s("subscriptSizing","dynamic"),o(),s("svgIcon","heroicons_solid:magnifying-glass"),o(),s("autocomplete","off")("placeholder","Buscar"),o(),s("color","primary"),o(),s("svgIcon","heroicons_outline:plus"),o(5),s("columns",a.columns)("displayedColumns",a.columns)("columnPropertyMap",a.columnPropertyMap)("data",a.data)("buttons",a.buttons))},dependencies:[U,b,v,V,S]});let n=i;return n})();var Et=[{path:"",component:Z}];export{Et as default};
