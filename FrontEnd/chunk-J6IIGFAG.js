import{a as Y}from"./chunk-6IEWE3OU.js";import{a as w,b as I,c as X}from"./chunk-VG7RFQST.js";import{b as U}from"./chunk-L7DHXJYW.js";import{a as j,b as T,c as O,k as z}from"./chunk-BEUMGSBU.js";import"./chunk-XWKUJA73.js";import{A as Q,E as C,a as V,h as g,k as B,o as W,p as H,s as L,u as q,v as J,x as K}from"./chunk-JABQIN56.js";import{ba as S,ga as $}from"./chunk-COZCVVRH.js";import"./chunk-NFYLEJKB.js";import{a as P}from"./chunk-T2KHVOBS.js";import{q as R}from"./chunk-LP47ZEUX.js";import{$ as G,Cb as a,Db as n,Eb as d,Ob as f,Yb as m,Za as r,_a as h,_b as A,dc as b,ea as _,fa as p,ka as v,q as k,rb as s}from"./chunk-5H7N2SGK.js";import{a as u,d as M}from"./chunk-NEB6MB4Y.js";var D=(()=>{let i=class i{constructor(e,t){this._http=e,this.appSettings=t}getCapitales(){return this._http.get(this.appSettings.capitalInversion.url.base)}postCapitales(e){return delete e.id,this._http.post(this.appSettings.capitalInversion.url.base,e)}putCapitales(e){let t=e.id;return this._http.put(`${this.appSettings.capitalInversion.url.base}/${t}`,e)}};i.\u0275fac=function(t){return new(t||i)(_(R),_(P))},i.\u0275prov=G({token:i,factory:i.\u0275fac,providedIn:"root"});let l=i;return l})();var E=(()=>{let i=class i{constructor(){this.fb=p(K),this.dialogRef=p(j),this.fuseService=p(z),this.estadosDatosService=p(I),this.toasService=p(X),this.capitalService=p(D),this._matData=p(T)}ngOnInit(){this.createForm();let e=this._matData;if(e.edit){let t=e.data;this.form.patchValue(t)}}onSave(){if(this.form.valid)if(this._matData.edit){let t=this.form.getRawValue(),{rubroInversion:c}=t,x=M(t,["rubroInversion"]),y=u({rubroInversion:Number(c)},x);this.fuseService.open(u({},w)).afterClosed().subscribe(F=>{F==="confirmed"?this.capitalService.putCapitales(y).subscribe(N=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let e=this.form.getRawValue(),{rubroInversion:c}=e,x=M(e,["rubroInversion"]),y=u({rubroInversion:Number(c)},x);this.fuseService.open(u({},w)).afterClosed().subscribe(F=>{F==="confirmed"?this.capitalService.postCapitales(y).subscribe(N=>{console.log(N),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],nombreInversor:[""],rubroInversion:[""],detalleInversion:[""]})}closeDialog(){this.dialogRef.close()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=v({type:i,selectors:[["app-form-capital-inversion"]],standalone:!0,features:[b],decls:24,vars:7,consts:[[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["matInput","",3,"formControlName"],["matInput","","placeholder","Detalle",3,"formControlName"],[1,"flex","flex-wrap","justify-between"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),m(3),n(),a(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),m(7,"Nombre de inversor"),n(),d(8,"input",5),n(),a(9,"mat-form-field",4)(10,"mat-label"),m(11,"Rubro de inversor"),n(),d(12,"input",5),n(),a(13,"mat-form-field",4)(14,"mat-label"),m(15,"Detalle de inversi\xF3n"),n(),d(16,"textarea",6),n(),a(17,"div",7)(18,"button",8),f("click",function(){return o.closeDialog()}),a(19,"span"),m(20," Cancelar "),n()(),a(21,"button",9),f("click",function(){return o.onSave()}),a(22,"span"),m(23," Guardar "),n()()()()()()),t&2&&(r(3),A(" ",o._matData.edit?"Actualizar capital":"Crear capital"," "),r(),s("formGroup",o.form),r(4),s("formControlName","nombreInversor"),r(4),s("formControlName","rubroInversion"),r(4),s("formControlName","detalleInversion"),r(2),s("color","primary"),r(3),s("color","primary"))},dependencies:[S,g,C,V,Q,L,B,W,H,q,J]});let l=i;return l})();var tt=(()=>{let i=class i{constructor(e,t,o){this._matDialog=e,this.estadoDatosService=t,this.capitalService=o,this.data=[],this.columns=["Nombre de inversor","Rubro de inversi\xF3n","Detalle de inversi\xF3n"],this.columnPropertyMap={"Nombre de inversor":"nombreInversor","Rubro de inversi\xF3n":"rubroInversion","Detalle de inversi\xF3n":"detalleInversion"},this.buttons=[{label:"Edit",icon:"edit",action:c=>{console.log("Editing",c),this.selectedData=c,this.onEdit()}}]}onNew(){this._matDialog.open(E,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%"})}onEdit(){this._matDialog.open(E,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getCapital(){this.subcription$=this.capitalService.getCapitales().pipe(k(e=>(e.data.forEach(t=>{if(t.estado)return t.estado=Y.ACTIVO,t}),e))).subscribe(e=>{this.data=e.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(t=>{t&&this.getCapital()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getCapital(),this.listenGrid()}};i.\u0275fac=function(t){return new(t||i)(h(O),h(I),h(D))},i.\u0275cmp=v({type:i,selectors:[["app-grid-capital-inversion"]],standalone:!0,features:[b],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(t,o){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),m(3,"Capital de inversi\xF3n"),n(),a(4,"div",3)(5,"mat-form-field",4),d(6,"mat-icon",5)(7,"input",6),n(),a(8,"button",7),f("click",function(){return o.onNew()}),d(9,"mat-icon",8),a(10,"span",9),m(11,"Crear capital"),n()()()(),a(12,"div",10)(13,"div",11),d(14,"app-custom-table",12),n()()()),t&2&&(r(5),s("subscriptSizing","dynamic"),r(),s("svgIcon","heroicons_solid:magnifying-glass"),r(),s("autocomplete","off")("placeholder","Buscar"),r(),s("color","primary"),r(),s("svgIcon","heroicons_outline:plus"),r(5),s("columns",o.columns)("displayedColumns",o.columns)("columnPropertyMap",o.columnPropertyMap)("data",o.data)("buttons",o.buttons))},dependencies:[U,S,g,$,C]});let l=i;return l})();var Gt=[{path:"",component:tt}];export{Gt as default};
