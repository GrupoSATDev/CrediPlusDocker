import{a as ie}from"./chunk-NLBWFGRW.js";import{a as Xe}from"./chunk-7CXXKG5J.js";import{a as Ue}from"./chunk-KLZ2O2JW.js";import{a as et}from"./chunk-FQWID2CH.js";import{a as tt}from"./chunk-2KB36ILL.js";import{a as ce}from"./chunk-7VTUMBBX.js";import{a as Je,b as Ze,c as Ye}from"./chunk-SC7GHXIL.js";import{a as qe}from"./chunk-VLEWZMTC.js";import{a as Ke,b as Qe}from"./chunk-TFDOLS6Y.js";import{a as He}from"./chunk-44YRV46B.js";import{a as it}from"./chunk-FLKBOCHD.js";import{a as se}from"./chunk-6IEWE3OU.js";import{a as We}from"./chunk-NSEYXXXF.js";import{a as ze}from"./chunk-CFZYBQXS.js";import{a as Ge}from"./chunk-V6LYLNL7.js";import{a as me}from"./chunk-4WJQLHI3.js";import{a as te}from"./chunk-I6O77O5V.js";import{a as Re}from"./chunk-LY2DLABR.js";import{a as Le}from"./chunk-BMKXXZGX.js";import"./chunk-ZBMXX536.js";import{g as Me}from"./chunk-KAGG2YQO.js";import{a as Ie,b as Ne,c as Fe}from"./chunk-QQ53EZKV.js";import"./chunk-M3FFSLWT.js";import{C as Be,F as Oe,J as ee,b as Te,e as we,i as Q,l as Ae,p as Ve,q as je,u as ke,x as Pe,y as $e}from"./chunk-TY3VSE3A.js";import{$ as xe,Q as ye,R as De,ea as W,ja as X}from"./chunk-3AUPHK2F.js";import"./chunk-DQGOCNTQ.js";import{a as A}from"./chunk-RNYZFOOK.js";import{Bc as be,Cb as D,Cc as le,Ea as ue,Eb as U,Lb as B,Lc as M,Mb as c,Nb as x,Oa as ge,Ob as q,Pb as ve,Qa as n,Ra as Y,Ub as Ce,Vb as K,_ as b,ba as w,bc as I,cc as N,ec as Se,ga as S,gb as f,ha as g,ib as r,ma as Z,q as re,tb as l,ub as i,vb as p,wa as P,wb as v,xa as $,xb as C,yc as _e,zb as he,zc as Ee}from"./chunk-SBESXTFM.js";import{a as k,d as J}from"./chunk-NEB6MB4Y.js";var ot=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getCargos(){return this._http.get(this.appSettings.cargos.url.base)}postCargos(a){return delete a.id,this._http.post(this.appSettings.cargos.url.base,a)}putCargos(a){let e=a.id;return delete a.id,this._http.put(`${this.appSettings.cargos.url.base}/${e}`,a)}};o.\u0275fac=function(e){return new(e||o)(S(M),S(A))},o.\u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();var at=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getRiesgos(){return this._http.get(this.appSettings.riesgos.url.base)}getRiesgo(a){return this._http.get(`${this.appSettings.riesgos.url.base}/${a}`)}};o.\u0275fac=function(e){return new(e||o)(S(M),S(A))},o.\u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();var nt=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getContratos(){return this._http.get(this.appSettings.tipoContratos.url.base)}};o.\u0275fac=function(e){return new(e||o)(S(M),S(A))},o.\u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();var rt=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getDeducciones(){return this._http.get(this.appSettings.deduccionesLegales.url.base)}};o.\u0275fac=function(e){return new(e||o)(S(M),S(A))},o.\u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();function ct(t,o){if(t&1&&(v(0),p(1,"img",54),C()),t&2){let s=U();n(),r("src",s.image,ge)("alt","Profile avatar")}}function dt(t,o){if(t&1&&(l(0,"div",55),c(1),i()),t&2){let s,a=U();n(),q(" ",(s=a.form.get("primerNombre").value.charAt(0))!==null&&s!==void 0?s:"P"," ")}}function pt(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function ft(t,o){if(t&1&&(v(0),f(1,pt,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function ut(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function gt(t,o){if(t&1&&(v(0),f(1,ut,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function ht(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function vt(t,o){if(t&1&&(v(0),f(1,ht,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function Ct(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function St(t,o){if(t&1&&(v(0),f(1,Ct,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function _t(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.razonSocial)}}function Et(t,o){if(t&1&&(v(0),f(1,_t,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function bt(t,o){if(t&1&&(v(0),l(1,"mat-form-field",22)(2,"mat-label"),c(3,"Fin de contrato"),i(),p(4,"input",31)(5,"mat-datepicker-toggle",32)(6,"mat-datepicker",null,5),i(),C()),t&2){let s=B(7);n(4),r("matDatepicker",s)("formControlName","fechaFinContrato"),n(),r("for",s)}}function yt(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function Dt(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),ve("Porcentaje salud: ",s.porcentajeSalud,"% - Porcentaje pensi\xF3n: ",s.porcentajePension,"%")}}function xt(t,o){if(t&1&&(v(0),f(1,Dt,2,3,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function It(t,o){if(t&1&&(v(0),l(1,"div",21)(2,"mat-form-field",22)(3,"mat-label"),c(4,"Deducciones legales"),i(),l(5,"mat-select",57),f(6,xt,2,1,"ng-container",28),I(7,"async"),i()()(),C()),t&2){let s=U();n(5),r("formControlName","idDeduccionLegal")("disabled",!0),n(),r("ngIf",N(7,3,s.deduccion$))}}function Nt(t,o){t&1&&(v(0),l(1,"div",21)(2,"mat-form-field",22)(3,"mat-label"),c(4,"Salud"),i(),p(5,"input",58),i(),l(6,"mat-form-field",22)(7,"mat-label"),c(8,"Pensi\xF3n"),i(),p(9,"input",59),i()(),C()),t&2&&(n(5),r("readonly",!0)("formControlName","salud"),n(4),r("readonly",!0)("formControlName","pension"))}function Ft(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function Tt(t,o){if(t&1&&(v(0),f(1,Ft,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function wt(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function Mt(t,o){if(t&1&&(v(0),f(1,wt,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function At(t,o){if(t&1&&(l(0,"mat-option",56),c(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),x(s.nombre)}}function Vt(t,o){if(t&1&&(v(0),f(1,At,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}var jt={validation:!1},fe=(()=>{let o=class o{constructor(){this.fb=g(Be),this.dialogRef=g(Ie),this.fuseService=g(Me),this.estadosDatosService=g(te),this.toasService=g(ze),this.tiposDocumentosService=g(tt),this._locacionService=g(He),this.generoService=g(it),this.empresaClienteService=g(Ue),this.datePipe=g(le),this.empleadosServices=g(ie),this.cargosServices=g(ot),this.riesgosServices=g(at),this.bancosServices=g(Xe),this.swalService=g(We),this.destroyedRef=g(ue),this.porcentajeSalud=0,this.porcentajePension=0,this.sumaPorcentaje=0,this.departamentos$=this._locacionService.getDepartamentos().pipe(b(a=>{let e=a.data,m=this._matData;if(e&&!m.edit){this.form.get("idDepartamento").setValue(e[0].id);let d=this.form.get("idDepartamento").value;this.getMunicipios(d)}})),this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos().pipe(b(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idTipoDoc").setValue(e[3].id)})),this.generos$=this.generoService.getGeneros().pipe(b(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idGenero").setValue(e[1].id)})),this.empresasClientes$=this.empresaClienteService.getEmpresasClientes().pipe(b(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idSubEmpresa").setValue(e[0].id)})),this.cargos$=this.cargosServices.getCargos(),this.riesgos$=this.riesgosServices.getRiesgos().pipe(b(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idNivelRiesgo").setValue(e[0].id)})),this.bancos$=this.bancosServices.getBancos().pipe(b(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idBanco").setValue(e[0].id)})),this._matData=g(Ne),this.tipoCuentasService=g(et),this.tipoCuentas$=this.tipoCuentasService.getTipoCuentas().pipe(b(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idTipoCuenta").setValue(e[0].id)})),this.tipoContratosService=g(nt),this.tipoContratos=[],this.deduccioLegalService=g(rt),this.deduccion$=this.deduccioLegalService.getDeducciones().pipe(b(a=>{let e=a.data,m=this._matData;e&&(this.form.get("idDeduccionLegal").setValue(e[0].id),this.porcentajeSalud=e[0].porcentajeSalud,this.porcentajePension=e[0].porcentajePension,this.sumaPorcentaje=e[0].estado?this.porcentajePension+this.porcentajeSalud:0)})),this.profile={avatar:"",name:"Pedro"},this.event=event}getContratos(){this.tipoContratosService.getContratos().pipe(b(a=>{let e=a.data,m=this._matData;e&&!m.edit&&(this.form.get("idTipoContrato").setValue(e[0].id),this.deduccionLegal=e[0].deduccioneLegal)})).subscribe(a=>{a.data&&(this.tipoContratos=a.data)})}selectedDeduccion(a){let e=a.value,m=this.tipoContratos.find(d=>{if(d.id==e)return d});this.deduccionLegal=m.deduccioneLegal,this.deduccionLegal?this.resetConDeduccion():this.resetSinDeduccion()}ngOnInit(){this.createForm(),this.getContratos();let a=this._matData;if(a.edit){let e=a.data;this.getTrabajador(e.id),this.setCampoValue()}this._matData.edit||this.setCampoValue()}getTrabajador(a){this.empleadosServices.getEmpleado(a).subscribe(e=>{if(e){let d=e.data;this.deduccionLegal=this.buscarContrato(d.idTipoContrato);let m=d,{idDepartamento:u,fechaNacimiento:h,fechaInicioContrato:R,fechaFinContrato:ae,porcentajeSalud:G,porcentajePension:H,capacidadEndeudamiento:z,salarioBase:_,otroIngreso:y}=m,V=J(m,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","porcentajeSalud","porcentajePension","capacidadEndeudamiento","salarioBase","otroIngreso"]),O=new Date(h),T=new Date(R),E=new Date(ae);if(this.municipios$=this._locacionService.getMunicipio(u),this.deduccionLegal){let j=_+y-_*(G+H)/100,ne=(_+y)*G/100,mt=(_+y)*H/100,st=j*30/100;this.form.patchValue(k({fechaNacimiento:O,fechaInicioContrato:new Date(T.getFullYear(),T.getMonth(),T.getDate()),fechaFinContrato:new Date(E.getFullYear(),E.getMonth(),E.getDate()),idDepartamento:u,salarioBase:_,otroIngreso:y,salarioDevengado:j,salud:ne,pension:mt,capacidadEndeudamiento:st},V)),this.image=`data:image/png;base64,  ${d.foto}`}else{let j=_+y,ne=j*30/100;this.form.patchValue(k({fechaNacimiento:O,fechaInicioContrato:new Date(T.getFullYear(),T.getMonth(),T.getDate()),fechaFinContrato:new Date(E.getFullYear(),E.getMonth(),E.getDate()),idDepartamento:u,salarioBase:_,otroIngreso:y,salarioDevengado:j,capacidadEndeudamiento:ne,salud:0,pension:0},V)),this.image=`data:image/png;base64,  ${d.foto}`}}})}buscarContrato(a){let e=a;return this.tipoContratos.find(d=>{if(d.id==e)return d}).deduccioneLegal}setCampoValue(){this.form.get("salarioBase").valueChanges.pipe(ce(this.destroyedRef)).subscribe(()=>this.calcularCampo()),this.form.get("otroIngreso").valueChanges.pipe(ce(this.destroyedRef)).subscribe(()=>this.calcularCampo())}resetConDeduccion(){this.form.get("salarioBase").setValue(0),this.form.get("otroIngreso").setValue(0),this.form.get("salarioDevengado").setValue(0),this.form.get("salud").setValue(0),this.form.get("pension").setValue(0),this.form.get("capacidadEndeudamiento").setValue(0)}resetSinDeduccion(){this.form.get("salarioBase").setValue(0),this.form.get("otroIngreso").setValue(0),this.form.get("salarioDevengado").setValue(0)}calcularCampo(){let a=this.form.get("salarioBase")?.value||0,e=this.form.get("otroIngreso")?.value||0;if(this.deduccionLegal){let m=a+e-a*this.sumaPorcentaje/100,d=(a+e)*this.porcentajeSalud/100,u=(a+e)*this.porcentajePension/100,h=m*30/100;this.form.patchValue({salarioDevengado:m,salud:d,pension:u,capacidadEndeudamiento:h})}else{let m=a+e,d=m*30/100;this.form.patchValue({salarioDevengado:m,capacidadEndeudamiento:d,salud:0,pension:0})}}onFileSelected(a){let e=a.target;if(e.files&&e.files.length>0){let m=e.files[0],d=new FileReader;d.onload=()=>{let u=d.result;this.image=u;let h=u.split(",")[1];this.form.get("foto").setValue(h)},d.readAsDataURL(m)}}onSelected(a){let e=a.value;this.getMunicipios(e)}getMunicipios(a){this.municipios$=this._locacionService.getMunicipio(a).pipe(b(e=>{let m=e.data,d=this._matData;m&&!d.edit&&this.form.get("idMunicipio").setValue(m[0].id)}))}onSave(){if(this.form.valid)if(this._matData.edit){let e=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:u,fechaInicioContrato:h,fechaFinContrato:R,salarioDevengado:ae,salud:G,pension:H}=e,z=J(e,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado","salud","pension"]),_=this.datePipe.transform(u,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),y=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),V=this.datePipe.transform(R,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),O=k({fechaNacimiento:_,fechaInicioContrato:y,fechaFinContrato:V},z);this.fuseService.open(k({},me)).afterClosed().subscribe(E=>{E==="confirmed"?this.empleadosServices.putEmpleados(O).subscribe(j=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro actualizado con exito!",timer:4e3}),this.closeDialog()},j=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al actualizar el registro!",timer:4e3})}):this.closeDialog()})}else{let a=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:u,fechaInicioContrato:h,fechaFinContrato:R,salarioDevengado:ae,salud:G,pension:H}=a,z=J(a,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado","salud","pension"]),_=this.datePipe.transform(u,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),y=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),V=k({fechaNacimiento:_,fechaInicioContrato:y,fechaFinContrato:"0001-01-01T00:00:00+00:00"},z);console.log(V),this.fuseService.open(k({},me)).afterClosed().subscribe(T=>{T==="confirmed"?this.empleadosServices.postEmpleados(V).subscribe(E=>{console.log(E),this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.closeDialog()},E=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],primerNombre:[""],segundoNombre:[""],primerApellido:[""],segundoApellido:[""],idTipoDoc:[""],numDoc:[""],idDepartamento:[""],idMunicipio:[""],telefono:[""],telefono2:[""],direccion:[""],idGenero:[""],correo:[""],cargo:[""],fechaNacimiento:[""],fechaInicioContrato:[""],fechaFinContrato:["null"],numCuentaBancaria:[""],capacidadEndeudamiento:[{value:0,disabled:!0}],idNivelRiesgo:[""],idBanco:[""],idTipoCuenta:[""],foto:[""],firma:[""],idSubEmpresa:[""],idTipoContrato:[""],salarioBase:[0],otroIngreso:[0],idDeduccionLegal:[""],salarioDevengado:[{value:0,disabled:!0}],salud:[{value:0,disabled:!0}],pension:[{value:0,disabled:!0}],estado:[!0]})}closeDialog(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=Z({type:o,selectors:[["app-form-empleados"]],standalone:!0,features:[Ce([{provide:De,useClass:qe},{provide:ye,useValue:"en-GB"},le,Ke(jt)]),K],decls:185,vars:70,consts:[["noAvatar",""],["twoStepToggle",""],["picker",""],["data",""],["inicio",""],["fin",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8","space-y-8",3,"formGroup"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full","mb-8"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],["type","file",1,"absolute","inset-0","opacity-0","cursor-pointer",3,"change"],[4,"ngIf","ngIfElse"],[1,"font-bold","mb-4","text-2xl"],[1,"flex","mb-4"],[1,"fcursor-pointer",3,"click"],[1,"font-medium","leading-6"],[1,"ml-4",3,"color","formControlName"],[1,"flex","flex-col","sm:flex-row","gap-2.5"],["floatLabel","always",1,"w-full"],["matInput","","placeholder","Primer nombre",3,"formControlName"],["matInput","","placeholder","Segundo nombre",3,"formControlName"],["matInput","","placeholder","Primer apellido",3,"formControlName"],["matInput","","placeholder","Segundo apellido",3,"formControlName"],["placeholder","Tipo de documento",3,"formControlName"],[4,"ngIf"],["matInput","","placeholder","N\xFAmero de identificaci\xF3n",3,"formControlName"],["placeholder","G\xE9nero",3,"formControlName"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["placeholder","Departamento",3,"selectionChange","formControlName"],["placeholder","Ciudad",3,"formControlName"],["matInput","","placeholder","Direcci\xF3n",3,"formControlName"],["matInput","","placeholder","Celular",3,"formControlName"],["matInput","","placeholder","Tel\xE9fono",3,"formControlName"],["matInput","","placeholder","Correo electronico (usuario)",3,"formControlName"],["placeholder","Empresa",3,"formControlName"],["matInput","","placeholder","Cargo",3,"formControlName"],["placeholder","Tipo de contrato",3,"selectionChange","formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario base",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Otros ingresos",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario devengdado",3,"readonly","formControlName"],["placeholder","Nivel de riesgo",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Capacidad de endeudamiento",3,"formControlName","readonly"],["placeholder","Tipo de cuenta",3,"formControlName"],["placeholder","Bancos",3,"formControlName"],["matInput","","placeholder","N\xFAmero de cuenta",3,"formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],[1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[3,"value"],["placeholder","Deducciones legales",3,"formControlName","disabled"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salud",3,"readonly","formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Pensi\xF3n",3,"readonly","formControlName"]],template:function(e,m){if(e&1){let d=he();l(0,"div",6)(1,"div",7)(2,"div",8),c(3),i(),l(4,"form",9)(5,"div",10)(6,"div",11),p(7,"mat-icon",12),l(8,"div",13),c(9," Cambiar foto "),i(),l(10,"input",14),D("change",function(h){return P(d),$(m.onFileSelected(h))}),i()(),f(11,ct,2,2,"ng-container",15)(12,dt,2,1,"ng-template",null,0,Se),i(),l(14,"div")(15,"p",16),c(16,"Informaci\xF3n general"),i(),l(17,"div",17)(18,"div",18),D("click",function(){P(d);let h=B(22);return $(h.toggle())}),l(19,"div",19),c(20),i()(),p(21,"mat-slide-toggle",20,1),i(),l(23,"div",21)(24,"mat-form-field",22)(25,"mat-label"),c(26,"Primer nombre"),i(),p(27,"input",23),i(),l(28,"mat-form-field",22)(29,"mat-label"),c(30,"Segundo nombre"),i(),p(31,"input",24),i()(),l(32,"div",21)(33,"mat-form-field",22)(34,"mat-label"),c(35,"Primer apellido"),i(),p(36,"input",25),i(),l(37,"mat-form-field",22)(38,"mat-label"),c(39,"Segundo apellido"),i(),p(40,"input",26),i()(),l(41,"div",21)(42,"mat-form-field",22)(43,"mat-label"),c(44,"Tipo de documento"),i(),l(45,"mat-select",27),f(46,ft,2,1,"ng-container",28),I(47,"async"),i()(),l(48,"mat-form-field",22)(49,"mat-label"),c(50,"N\xFAmero de identificaci\xF3n"),i(),p(51,"input",29),i()(),l(52,"div",21)(53,"mat-form-field",22)(54,"mat-label"),c(55,"G\xE9nero"),i(),l(56,"mat-select",30),f(57,gt,2,1,"ng-container",28),I(58,"async"),i()(),l(59,"mat-form-field",22)(60,"mat-label"),c(61,"Fecha de nacimiento"),i(),p(62,"input",31)(63,"mat-datepicker-toggle",32)(64,"mat-datepicker",null,2),i()()(),l(66,"div")(67,"p",16),c(68,"Informaci\xF3n demogr\xE1fica"),i(),l(69,"div",21)(70,"mat-form-field",22)(71,"mat-label"),c(72,"Departamento"),i(),l(73,"mat-select",33,3),D("selectionChange",function(h){return P(d),$(m.onSelected(h))}),f(75,vt,2,1,"ng-container",28),I(76,"async"),i()(),l(77,"mat-form-field",22)(78,"mat-label"),c(79,"Ciudad"),i(),l(80,"mat-select",34),f(81,St,2,1,"ng-container",28),I(82,"async"),i()()(),l(83,"div",21)(84,"mat-form-field",22)(85,"mat-label"),c(86,"Direcci\xF3n"),i(),p(87,"input",35),i(),l(88,"mat-form-field",22)(89,"mat-label"),c(90,"Celular"),i(),p(91,"input",36),i()(),l(92,"div",21)(93,"mat-form-field",22)(94,"mat-label"),c(95,"Tel\xE9fono"),i(),p(96,"input",37),i(),l(97,"mat-form-field",22)(98,"mat-label"),c(99,"Correo electronico (usuario)"),i(),p(100,"input",38),i()(),l(101,"div")(102,"p",16),c(103,"Informaci\xF3n contractual"),i(),l(104,"div",21)(105,"mat-form-field",22)(106,"mat-label"),c(107,"Empresa"),i(),l(108,"mat-select",39),f(109,Et,2,1,"ng-container",28),I(110,"async"),i()(),l(111,"mat-form-field",22)(112,"mat-label"),c(113,"Cargo"),i(),p(114,"input",40),i()(),l(115,"div",21)(116,"mat-form-field",22)(117,"mat-label"),c(118,"Inicio de contrato"),i(),p(119,"input",31)(120,"mat-datepicker-toggle",32)(121,"mat-datepicker",null,4),i(),f(123,bt,8,3,"ng-container",28),i(),l(124,"div",21)(125,"mat-form-field",22)(126,"mat-label"),c(127,"Tipo de contrato"),i(),l(128,"mat-select",41),D("selectionChange",function(h){return P(d),$(m.selectedDeduccion(h))}),f(129,yt,2,2,"mat-option",42),i()()(),f(130,It,8,5,"ng-container",28),l(131,"div",21)(132,"mat-form-field",22)(133,"mat-label"),c(134,"Salario base"),i(),p(135,"input",43),i(),l(136,"mat-form-field",22)(137,"mat-label"),c(138,"Otros ingresos"),i(),p(139,"input",44),i()(),f(140,Nt,10,4,"ng-container",28),l(141,"div",21)(142,"mat-form-field",22)(143,"mat-label"),c(144,"Salario devengado"),i(),p(145,"input",45),i()(),l(146,"div",21)(147,"mat-form-field",22)(148,"mat-label"),c(149,"Nivel de riesgo"),i(),l(150,"mat-select",46),f(151,Tt,2,1,"ng-container",28),I(152,"async"),i()(),l(153,"mat-form-field",22)(154,"mat-label"),c(155,"Capacidad de endeudamiento"),i(),p(156,"input",47),i()()(),l(157,"div")(158,"p",16),c(159,"Informaci\xF3n bancaria"),i(),l(160,"div",21)(161,"mat-form-field",22)(162,"mat-label"),c(163,"Tipo de cuenta"),i(),l(164,"mat-select",48),f(165,Mt,2,1,"ng-container",28),I(166,"async"),i()()(),l(167,"div",21)(168,"mat-form-field",22)(169,"mat-label"),c(170,"Bancos"),i(),l(171,"mat-select",49),f(172,Vt,2,1,"ng-container",28),I(173,"async"),i()(),l(174,"mat-form-field",22)(175,"mat-label"),c(176,"N\xFAmero de cuenta bancaria"),i(),p(177,"input",50),i()()()(),l(178,"div",51)(179,"button",52),D("click",function(){return P(d),$(m.closeDialog())}),l(180,"span"),c(181," Cancelar "),i()(),l(182,"button",53),D("click",function(){return P(d),$(m.onSave())}),l(183,"span"),c(184," Guardar "),i()()()()()()}if(e&2){let d=B(13),u=B(65),h=B(122);n(3),q(" ",m._matData.edit?"Actualizar trabajador":"Agregar trabajador"," "),n(),r("formGroup",m.form),n(3),r("svgIcon","heroicons_outline:camera"),n(4),r("ngIf",m.form.get("foto").value)("ngIfElse",d),n(9),q(" Estado ",m.form.get("estado").value?"Activo":"Inactivo"," "),n(),r("color","primary")("formControlName","estado"),n(6),r("formControlName","primerNombre"),n(4),r("formControlName","segundoNombre"),n(5),r("formControlName","primerApellido"),n(4),r("formControlName","segundoApellido"),n(5),r("formControlName","idTipoDoc"),n(),r("ngIf",N(47,54,m.tiposDocumentos$)),n(5),r("formControlName","numDoc"),n(5),r("formControlName","idGenero"),n(),r("ngIf",N(58,56,m.generos$)),n(5),r("matDatepicker",u)("formControlName","fechaNacimiento"),n(),r("for",u),n(10),r("formControlName","idDepartamento"),n(2),r("ngIf",N(76,58,m.departamentos$)),n(5),r("formControlName","idMunicipio"),n(),r("ngIf",N(82,60,m.municipios$)),n(6),r("formControlName","direccion"),n(4),r("formControlName","telefono"),n(5),r("formControlName","telefono2"),n(4),r("formControlName","correo"),n(8),r("formControlName","idSubEmpresa"),n(),r("ngIf",N(110,62,m.empresasClientes$)),n(5),r("formControlName","cargo"),n(5),r("matDatepicker",h)("formControlName","fechaInicioContrato"),n(),r("for",h),n(3),r("ngIf",m.form.get("estado").value==!1),n(5),r("formControlName","idTipoContrato"),n(),r("ngForOf",m.tipoContratos),n(),r("ngIf",m.deduccionLegal),n(5),r("formControlName","salarioBase"),n(4),r("formControlName","otroIngreso"),n(),r("ngIf",m.deduccionLegal),n(5),r("readonly",!0)("formControlName","salarioDevengado"),n(5),r("formControlName","idNivelRiesgo"),n(),r("ngIf",N(152,64,m.riesgos$)),n(5),r("formControlName","capacidadEndeudamiento")("readonly",!0),n(8),r("formControlName","idTipoCuenta"),n(),r("ngIf",N(166,66,m.tipoCuentas$)),n(6),r("formControlName","idBanco"),n(),r("ngIf",N(173,68,m.bancos$)),n(5),r("formControlName","numCuentaBancaria"),n(2),r("color","primary"),n(3),r("color","primary")}},dependencies:[W,Q,ee,Te,Oe,ke,Ae,Ve,je,Pe,$e,be,xe,Re,_e,Ee,Je,Ze,Ye,we,X,Qe,Le],styles:[".custom-dialog-container{width:100%}@media (min-width: 1280px){  .custom-dialog-container{width:50%}}"]});let t=o;return t})();var lt=(()=>{let o=class o{constructor(a,e,m){this._matDialog=a,this.estadoDatosService=e,this.empleadoService=m,this.searchTerm="",this.data=[],this.columns=["Estado","Identificaci\xF3n","Nombre completo","Tel\xE9fono","Empresa","Cargo"],this.columnPropertyMap={Estado:"estado",Identificaci\u00F3n:"numDoc","Nombre completo":"nombreCompleto",Tel\u00E9fono:"telefono",Empresa:"nombreSubEmpresa",Cargo:"cargo"},this.buttons=[{label:"Edit",icon:"edit",action:d=>{console.log("Editing",d),this.selectedData=d,this.onEdit()}}]}onNew(){this._matDialog.open(fe,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}onEdit(){this._matDialog.open(fe,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}getEmpleados(){this.subcription$=this.empleadoService.getEmpleados().pipe(re(a=>(a.data.forEach(e=>{e.estado?e.estado=se.ACTIVO:e.estado=se.INACTIVO}),a)),re(a=>(a.data.forEach(e=>{e&&(e.nombreCompleto=e.primerNombre.concat(" ",e.segundoNombre?e.segundoNombre+" ":"",e.primerApellido," ",e.segundoApellido))}),a))).subscribe(a=>{this.data=a.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{e&&this.getEmpleados()})}onSearch(a){let e=a.target;this.searchTerm=e.value.trim().toLowerCase()}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEmpleados(),this.listenGrid()}};o.\u0275fac=function(e){return new(e||o)(Y(Fe),Y(te),Y(ie))},o.\u0275cmp=Z({type:o,selectors:[["app-grid-empleados"]],standalone:!0,features:[K],decls:15,vars:12,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],["mat-flat-button","",1,"mt-2","w-full","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold","sm:ml-4","sm:mt-0","sm:w-auto",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons","searchTerm"]],template:function(e,m){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),c(3,"Trabajadores"),i(),l(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5),l(7,"input",6),D("input",function(u){return m.onSearch(u)}),i()(),l(8,"button",7),D("click",function(){return m.onNew()}),p(9,"mat-icon",8),l(10,"span",9),c(11,"Agregar"),i()()()(),l(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),i()()()),e&2&&(n(5),r("subscriptSizing","dynamic"),n(),r("svgIcon","heroicons_solid:magnifying-glass"),n(),r("autocomplete","off")("placeholder","Buscar"),n(),r("color","primary"),n(),r("svgIcon","heroicons_outline:plus"),n(5),r("columns",m.columns)("displayedColumns",m.columns)("columnPropertyMap",m.columnPropertyMap)("data",m.data)("buttons",m.buttons)("searchTerm",m.searchTerm))},dependencies:[Ge,W,Q,X,ee]});let t=o;return t})();var $i=[{path:"",component:lt}];export{$i as default};
