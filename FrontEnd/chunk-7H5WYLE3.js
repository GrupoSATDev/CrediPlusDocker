import{a as X}from"./chunk-6IEWE3OU.js";import{b as Q,c as I,d as D,e as U}from"./chunk-PUZHLFDV.js";import{E as V,u as N,v as A,w as R}from"./chunk-4PABNQQO.js";import{A as K,E as S,a as O,h as g,k as z,o as B,p as W,s as H,u as L,v as q,x as J}from"./chunk-JABQIN56.js";import{ba as b,ga as P}from"./chunk-COZCVVRH.js";import"./chunk-NFYLEJKB.js";import{a as $}from"./chunk-4LNNILDP.js";import{q as G}from"./chunk-LP47ZEUX.js";import{$ as E,Cb as r,Db as m,Eb as p,Ob as u,Yb as d,Za as a,_a as h,_b as k,dc as v,ea as C,fa as c,ka as f,q as j,rb as s}from"./chunk-5H7N2SGK.js";import{a as y,d as F}from"./chunk-NEB6MB4Y.js";var x=(()=>{let i=class i{constructor(e,t){this._http=e,this.appSettingService=t}getTass(){return this._http.get(this.appSettingService.tasasIntereses.url.base)}postTasas(e){return delete e.id,this._http.post(this.appSettingService.tasasIntereses.url.base,e)}putTasas(e){let t=e.id;return delete e.id,this._http.put(`${this.appSettingService.tasasIntereses.url.base}/${t}`,e)}};i.\u0275fac=function(t){return new(t||i)(C(G),C($))},i.\u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var T=(()=>{let i=class i{constructor(){this.fb=c(J),this.dialogRef=c(N),this.fuseService=c(V),this.estadosDatosService=c(D),this.toasService=c(U),this._matData=c(A),this.tasasService=c(x)}ngOnInit(){this.createForm();let e=this._matData;if(e.edit){let t=e.data;this.form.patchValue(t)}}onSave(){if(this.form.valid)if(this._matData.edit){let t=this.form.getRawValue(),{porcentaje:o}=t,l={porcentaje:Number(o)};this.fuseService.open(y({},I)).afterClosed().subscribe(_=>{_==="confirmed"?this.tasasService.putTasas(l).subscribe(w=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let e=this.form.getRawValue(),{porcentaje:o}=e,l=F(e,["porcentaje"]),M={porcentaje:Number(o)};this.fuseService.open(y({},I)).afterClosed().subscribe(w=>{w==="confirmed"?this.tasasService.postTasas(M).subscribe(tt=>{console.log(tt),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],porcentaje:[""]})}closeDialog(){this.dialogRef.close()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["app-form-tasas"]],standalone:!0,features:[v],decls:16,vars:5,consts:[[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex","flex-wrap","justify-between"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3),m(),r(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),d(7,"Porcentaje %"),m(),p(8,"input",5),m(),r(9,"div",6)(10,"button",7),u("click",function(){return o.closeDialog()}),r(11,"span"),d(12," Cancelar "),m()(),r(13,"button",8),u("click",function(){return o.onSave()}),r(14,"span"),d(15," Guardar "),m()()()()()()),t&2&&(a(3),k(" ",o._matData.edit?"Actualizar tasa":"Crear tasa"," "),a(),s("formGroup",o.form),a(4),s("formControlName","porcentaje"),a(2),s("color","primary"),a(3),s("color","primary"))},dependencies:[b,g,S,O,K,H,z,B,W,L,q]});let n=i;return n})();var Z=(()=>{let i=class i{constructor(e,t,o){this._matDialog=e,this.estadoDatosService=t,this.tasasService=o,this.data=[],this.columns=["Nombre inversor","Rubro inversi\xF3n","Detalle inversi\xF3n"],this.columnPropertyMap={"Nombre de inversor":"nombreInversor","Rubro de inversion":"rubroInversion","Detalle inversion":"detalleInversion"},this.buttons=[{label:"Edit",icon:"edit",action:l=>{console.log("Editing",l),this.selectedData=l,this.onEdit()}}]}onNew(){this._matDialog.open(T,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%"})}onEdit(){this._matDialog.open(T,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getTasas(){this.subcription$=this.tasasService.getTass().pipe(j(e=>(e.data.forEach(t=>{if(t.estado)return t.estado=X.ACTIVO,t}),e))).subscribe(e=>{this.data=e.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(t=>{t&&this.getTasas()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getTasas(),this.listenGrid()}};i.\u0275fac=function(t){return new(t||i)(h(R),h(D),h(x))},i.\u0275cmp=f({type:i,selectors:[["app-grid-tasas"]],standalone:!0,features:[v],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3,"Tasas de interes"),m(),r(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5)(7,"input",6),m(),r(8,"button",7),u("click",function(){return o.onNew()}),p(9,"mat-icon",8),r(10,"span",9),d(11,"Crear tasa"),m()()()(),r(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),m()()()),t&2&&(a(5),s("subscriptSizing","dynamic"),a(),s("svgIcon","heroicons_solid:magnifying-glass"),a(),s("autocomplete","off")("placeholder","Buscar"),a(),s("color","primary"),a(),s("svgIcon","heroicons_outline:plus"),a(5),s("columns",o.columns)("displayedColumns",o.columns)("columnPropertyMap",o.columnPropertyMap)("data",o.data)("buttons",o.buttons))},dependencies:[Q,b,g,P,S]});let n=i;return n})();var Et=[{path:"",component:Z}];export{Et as default};
