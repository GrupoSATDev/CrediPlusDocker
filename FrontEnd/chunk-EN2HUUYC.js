import{a as q}from"./chunk-UTHMLIDY.js";import{a as Ke}from"./chunk-YUIDPSZ5.js";import{a as Je}from"./chunk-L2EUJHKC.js";import{a as Qe}from"./chunk-W35ES4XE.js";import{a as We}from"./chunk-4GDLIBBU.js";import{a as ne}from"./chunk-KOAGQEIB.js";import{a as Ge,b as He,c as ze}from"./chunk-VMONEH2L.js";import{a as Ze}from"./chunk-3L6CDPYN.js";import{a as Ue,b as Ye}from"./chunk-5E3BI53K.js";import{a as Re}from"./chunk-B3262OVV.js";import{a as Xe}from"./chunk-E5JP7PP4.js";import{a as ae}from"./chunk-6IEWE3OU.js";import{a as qe}from"./chunk-24W6POED.js";import{a as Le}from"./chunk-UFLWJOQO.js";import{a as Oe}from"./chunk-HKOJEADL.js";import{a as oe}from"./chunk-4WJQLHI3.js";import{a as Y}from"./chunk-HDKW2ETT.js";import{a as Be}from"./chunk-YRFWKKCQ.js";import{a as Pe}from"./chunk-W4ZGSDEU.js";import"./chunk-ZVTEZKTX.js";import{g as Fe}from"./chunk-WPQBWK4Z.js";import{a as ye,b as De,c as xe}from"./chunk-4EGREALI.js";import"./chunk-D266PZ43.js";import{C as $e,G as U,b as Ie,e as Ne,i as z,l as Te,p as we,q as Ve,u as Ae,w as Me,x as ke,z as je}from"./chunk-BFUN2CON.js";import{$ as be,Q as _e,R as Ee,ea as J,ja as Z}from"./chunk-PKP5UGVL.js";import"./chunk-NSFGWBZH.js";import{a as N}from"./chunk-X4MAXHGU.js";import{f as ve,g as Ce,i as Se,j as ie,s as I}from"./chunk-D7SIZTGA.js";import{$b as d,Ea as ce,Fb as l,Gb as i,Hb as p,Ib as v,Jb as C,Lb as fe,Rb as D,Tb as te,Y as _,Za as pe,_b as M,aa as x,ab as n,ac as E,bb as L,bc as G,cc as ue,fa as S,ga as u,hc as ge,ic as H,la as R,q as ee,qc as b,rc as y,sb as f,tc as he,ub as r,wa as w,xa as V}from"./chunk-KIIQGHZ6.js";import{a as A,d as O}from"./chunk-NEB6MB4Y.js";var et=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getCargos(){return this._http.get(this.appSettings.cargos.url.base)}postCargos(a){return delete a.id,this._http.post(this.appSettings.cargos.url.base,a)}putCargos(a){let e=a.id;return delete a.id,this._http.put(`${this.appSettings.cargos.url.base}/${e}`,a)}};o.\u0275fac=function(e){return new(e||o)(S(I),S(N))},o.\u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();var tt=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getRiesgos(){return this._http.get(this.appSettings.riesgos.url.base)}getRiesgo(a){return this._http.get(`${this.appSettings.riesgos.url.base}/${a}`)}};o.\u0275fac=function(e){return new(e||o)(S(I),S(N))},o.\u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();var it=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getContratos(){return this._http.get(this.appSettings.tipoContratos.url.base)}};o.\u0275fac=function(e){return new(e||o)(S(I),S(N))},o.\u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();var ot=(()=>{let o=class o{constructor(a,e){this._http=a,this.appSettings=e}getDeducciones(){return this._http.get(this.appSettings.deduccionesLegales.url.base)}};o.\u0275fac=function(e){return new(e||o)(S(I),S(N))},o.\u0275prov=x({token:o,factory:o.\u0275fac,providedIn:"root"});let t=o;return t})();function lt(t,o){if(t&1&&(v(0),p(1,"img",55),C()),t&2){let s=te();n(),r("src",s.image,pe)("alt","Profile avatar")}}function mt(t,o){if(t&1&&(l(0,"div",56),d(1),i()),t&2){let s,a=te();n(),G(" ",(s=a.form.get("primerNombre").value.charAt(0))!==null&&s!==void 0?s:"P"," ")}}function st(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function dt(t,o){if(t&1&&(v(0),f(1,st,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function ct(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function pt(t,o){if(t&1&&(v(0),f(1,ct,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function ft(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function ut(t,o){if(t&1&&(v(0),f(1,ft,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function gt(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function ht(t,o){if(t&1&&(v(0),f(1,gt,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function vt(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.razonSocial)}}function Ct(t,o){if(t&1&&(v(0),f(1,vt,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function St(t,o){if(t&1&&(v(0),l(1,"mat-form-field",22)(2,"mat-label"),d(3,"Fin de contrato"),i(),p(4,"input",31)(5,"mat-datepicker-toggle",32)(6,"mat-datepicker",null,5),i(),C()),t&2){let s=M(7);n(4),r("matDatepicker",s)("formControlName","fechaFinContrato"),n(),r("for",s)}}function _t(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function Et(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),ue("Porcentaje salud: ",s.porcentajeSalud,"% - Porcentaje pensi\xF3n: ",s.porcentajePension,"%")}}function bt(t,o){if(t&1&&(v(0),f(1,Et,2,3,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function yt(t,o){t&1&&(v(0),l(1,"div",21)(2,"mat-form-field",22)(3,"mat-label"),d(4,"Salud"),i(),p(5,"input",58),i(),l(6,"mat-form-field",22)(7,"mat-label"),d(8,"Pensi\xF3n"),i(),p(9,"input",59),i()(),C()),t&2&&(n(5),r("readonly",!0)("formControlName","salud"),n(4),r("readonly",!0)("formControlName","pension"))}function Dt(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function xt(t,o){if(t&1&&(v(0),f(1,Dt,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function It(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function Nt(t,o){if(t&1&&(v(0),f(1,It,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}function Ft(t,o){if(t&1&&(l(0,"mat-option",57),d(1),i()),t&2){let s=o.$implicit;r("value",s.id),n(),E(s.nombre)}}function Tt(t,o){if(t&1&&(v(0),f(1,Ft,2,2,"mat-option",42),C()),t&2){let s=o.ngIf;n(),r("ngForOf",s.data)}}var wt={validation:!1},me=(()=>{let o=class o{constructor(){this.fb=u(je),this.dialogRef=u(ye),this.fuseService=u(Fe),this.estadosDatosService=u(Y),this.toasService=u(Le),this.tiposDocumentosService=u(We),this._locacionService=u(Re),this.generoService=u(Xe),this.empresaClienteService=u(Je),this.datePipe=u(ie),this.empleadosServices=u(q),this.cargosServices=u(et),this.riesgosServices=u(tt),this.bancosServices=u(Ke),this.swalService=u(qe),this.destroyedRef=u(ce),this.departamentos$=this._locacionService.getDepartamentos().pipe(_(a=>{let e=a.data,m=this._matData;if(e&&!m.edit){this.form.get("idDepartamento").setValue(e[0].id);let c=this.form.get("idDepartamento").value;this.getMunicipios(c)}})),this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idTipoDoc").setValue(e[3].id)})),this.generos$=this.generoService.getGeneros().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idGenero").setValue(e[1].id)})),this.empresasClientes$=this.empresaClienteService.getEmpresasClientes().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idSubEmpresa").setValue(e[0].id)})),this.cargos$=this.cargosServices.getCargos(),this.riesgos$=this.riesgosServices.getRiesgos().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idNivelRiesgo").setValue(e[0].id)})),this.bancos$=this.bancosServices.getBancos().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idBanco").setValue(e[0].id)})),this._matData=u(De),this.tipoCuentasService=u(Qe),this.tipoCuentas$=this.tipoCuentasService.getTipoCuentas().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&this.form.get("idTipoCuenta").setValue(e[0].id)})),this.tipoContratosService=u(it),this.tipoContratos=[],this.deduccioLegalService=u(ot),this.deduccion$=this.deduccioLegalService.getDeducciones().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&(this.form.get("idDeduccionLegal").setValue(e[0].id),this.porcentajeSalud=e[0].porcentajeSalud,this.porcentajePension=e[0].porcentajePension,this.sumaPorcentaje=e[0].estado?this.porcentajePension+this.porcentajeSalud:0)})),this.profile={avatar:"",name:"Pedro"},this.event=event}getContratos(){this.tipoContratosService.getContratos().pipe(_(a=>{let e=a.data,m=this._matData;e&&!m.edit&&(this.form.get("idTipoContrato").setValue(e[0].id),this.deduccionLegal=e[0].deduccioneLegal)})).subscribe(a=>{a.data&&(this.tipoContratos=a.data)})}selectedDeduccion(a){let e=a.value,m=this.tipoContratos.find(c=>{if(c.id==e)return c});this.deduccionLegal=m.deduccioneLegal,this.deduccionLegal?this.resetConDeduccion():this.resetSinDeduccion()}ngOnInit(){this.createForm(),this.getContratos();let a=this._matData;if(a.edit){let e=a.data;this.getTrabajador(e.id)}this.setCampoValue()}getTrabajador(a){this.empleadosServices.getEmpleado(a).subscribe(e=>{if(e){let c=e.data;this.buscarContrato(c.idTipoContrato);let m=c,{idDepartamento:g,fechaNacimiento:h,fechaInicioContrato:$,fechaFinContrato:K}=m,Q=O(m,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato"]),W=new Date(h),F=new Date($),T=new Date(K);this.municipios$=this._locacionService.getMunicipio(g),this.form.patchValue(A({fechaNacimiento:W,fechaInicioContrato:new Date(F.getFullYear(),F.getMonth(),F.getDate()),fechaFinContrato:new Date(T.getFullYear(),T.getMonth(),T.getDate()),idDepartamento:g},Q)),this.image=`data:image/png;base64,  ${c.foto}`}})}buscarContrato(a){let e=a,m=this.tipoContratos.find(c=>{if(c.id==e)return c});this.deduccionLegal=m.deduccioneLegal}setCampoValue(){this.form.get("salarioBase").valueChanges.pipe(ne(this.destroyedRef)).subscribe(()=>this.calcularCampo()),this.form.get("otroIngreso").valueChanges.pipe(ne(this.destroyedRef)).subscribe(()=>this.calcularCampo())}resetConDeduccion(){this.form.get("salarioBase").setValue(0),this.form.get("otroIngreso").setValue(0),this.form.get("salarioDevengado").setValue(0),this.form.get("salud").setValue(0),this.form.get("pension").setValue(0),this.form.get("capacidadEndeudamiento").setValue(0)}resetSinDeduccion(){this.form.get("salarioBase").setValue(0),this.form.get("otroIngreso").setValue(0),this.form.get("salarioDevengado").setValue(0)}calcularCampo(){if(!this._matData.edit&&this.deduccionLegal){let a=this.form.get("salarioBase")?.value||0,e=this.form.get("otroIngreso")?.value||0,m=a+e-a*this.sumaPorcentaje/100,c=(a+e)*this.porcentajeSalud/100,g=(a+e)*this.porcentajePension/100,h=m*30/100;this.form.get("salarioDevengado").setValue(m),this.form.get("salud").setValue(c),this.form.get("pension").setValue(g),this.form.get("capacidadEndeudamiento").setValue(h)}else if(!this._matData.edit&&this.deduccionLegal==!1){let a=this.form.get("salarioBase")?.value||0,e=this.form.get("otroIngreso")?.value||0,m=a+e,c=m*30/100;this.form.get("salarioDevengado").setValue(m),this.form.get("capacidadEndeudamiento").setValue(c)}}onFileSelected(a){let e=a.target;if(e.files&&e.files.length>0){let m=e.files[0],c=new FileReader;c.onload=()=>{let g=c.result;this.image=g;let h=g.split(",")[1];this.form.get("foto").setValue(h)},c.readAsDataURL(m)}}onSelected(a){let e=a.value;this.getMunicipios(e)}getMunicipios(a){this.municipios$=this._locacionService.getMunicipio(a).pipe(_(e=>{let m=e.data,c=this._matData;m&&!c.edit&&this.form.get("idMunicipio").setValue(m[0].id)}))}onSave(){if(this.form.valid)if(this._matData.edit){let e=this.form.getRawValue(),{idDepartamento:c,fechaNacimiento:g,fechaInicioContrato:h,fechaFinContrato:$,salarioDevengado:K,salud:Q,pension:W}=e,F=O(e,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado","salud","pension"]),T=this.datePipe.transform(g,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),X=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),P=this.datePipe.transform($,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),se=A({fechaNacimiento:T,fechaInicioContrato:X,fechaFinContrato:P},F);this.fuseService.open(A({},oe)).afterClosed().subscribe(B=>{B==="confirmed"?this.empleadosServices.putEmpleados(se).subscribe(rt=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro actualizado con exito!",timer:4e3}),this.closeDialog()},rt=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al actualizar el registro!",timer:4e3})}):this.closeDialog()})}else{let a=this.form.getRawValue(),{idDepartamento:c,fechaNacimiento:g,fechaInicioContrato:h,fechaFinContrato:$,salarioDevengado:K,salud:Q,pension:W}=a,F=O(a,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado","salud","pension"]),T=this.datePipe.transform(g,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),X=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),P=A({fechaNacimiento:T,fechaInicioContrato:X,fechaFinContrato:"0001-01-01T00:00:00+00:00"},F);console.log(P),this.fuseService.open(A({},oe)).afterClosed().subscribe(de=>{de==="confirmed"?this.empleadosServices.postEmpleados(P).subscribe(B=>{console.log(B),this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.closeDialog()},B=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],primerNombre:[""],segundoNombre:[""],primerApellido:[""],segundoApellido:[""],idTipoDoc:[""],numDoc:[""],idDepartamento:[""],idMunicipio:[""],telefono:[""],telefono2:[""],direccion:[""],idGenero:[""],correo:[""],cargo:[""],fechaNacimiento:[""],fechaInicioContrato:[""],fechaFinContrato:["null"],numCuentaBancaria:[""],capacidadEndeudamiento:[{value:0,disabled:!0}],idNivelRiesgo:[""],idBanco:[""],idTipoCuenta:[""],foto:[""],firma:[""],idSubEmpresa:[""],idTipoContrato:[""],salarioBase:[0],otroIngreso:[0],idDeduccionLegal:[""],salarioDevengado:[{value:0,disabled:!0}],salud:[{value:0,disabled:!0}],pension:[{value:0,disabled:!0}],estado:[!0]})}closeDialog(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=R({type:o,selectors:[["app-form-empleados"]],standalone:!0,features:[ge([{provide:Ee,useClass:Ze},{provide:_e,useValue:"en-GB"},ie,Ue(wt)]),H],decls:191,vars:74,consts:[["noAvatar",""],["twoStepToggle",""],["picker",""],["data",""],["inicio",""],["fin",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8","space-y-8",3,"formGroup"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full","mb-8"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],["type","file",1,"absolute","inset-0","opacity-0","cursor-pointer",3,"change"],[4,"ngIf","ngIfElse"],[1,"font-bold","mb-4","text-2xl"],[1,"flex","mb-4"],[1,"fcursor-pointer",3,"click"],[1,"font-medium","leading-6"],[1,"ml-4",3,"color","formControlName"],[1,"flex","flex-col","sm:flex-row","gap-2.5"],["floatLabel","always",1,"w-full"],["matInput","","placeholder","Primer nombre",3,"formControlName"],["matInput","","placeholder","Segundo nombre",3,"formControlName"],["matInput","","placeholder","Primer apellido",3,"formControlName"],["matInput","","placeholder","Segundo apellido",3,"formControlName"],["placeholder","Tipo de documento",3,"formControlName"],[4,"ngIf"],["matInput","","placeholder","N\xFAmero de identificaci\xF3n",3,"formControlName"],["placeholder","G\xE9nero",3,"formControlName"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["placeholder","Departamento",3,"selectionChange","formControlName"],["placeholder","Ciudad",3,"formControlName"],["matInput","","placeholder","Direcci\xF3n",3,"formControlName"],["matInput","","placeholder","Celular",3,"formControlName"],["matInput","","placeholder","Tel\xE9fono",3,"formControlName"],["matInput","","placeholder","Correo electronico",3,"formControlName"],["placeholder","Empresa",3,"formControlName"],["matInput","","placeholder","Cargo",3,"formControlName"],["placeholder","Tipo de contrato",3,"selectionChange","formControlName"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Deducciones legales",3,"formControlName","disabled"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario base",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Otros ingresos",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario devengdado",3,"readonly","formControlName"],["placeholder","Nivel de riesgo",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Capacidad de endeudamiento",3,"formControlName","readonly"],["placeholder","Tipo de cuenta",3,"formControlName"],["placeholder","Bancos",3,"formControlName"],["matInput","","placeholder","N\xFAmero de cuenta",3,"formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],[1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[3,"value"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salud",3,"readonly","formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Pensi\xF3n",3,"readonly","formControlName"]],template:function(e,m){if(e&1){let c=fe();l(0,"div",6)(1,"div",7)(2,"div",8),d(3),i(),l(4,"form",9)(5,"div",10)(6,"div",11),p(7,"mat-icon",12),l(8,"div",13),d(9," Cambiar foto "),i(),l(10,"input",14),D("change",function(h){return w(c),V(m.onFileSelected(h))}),i()(),f(11,lt,2,2,"ng-container",15)(12,mt,2,1,"ng-template",null,0,he),i(),l(14,"div")(15,"p",16),d(16,"Informaci\xF3n general"),i(),l(17,"div",17)(18,"div",18),D("click",function(){w(c);let h=M(22);return V(h.toggle())}),l(19,"div",19),d(20),i()(),p(21,"mat-slide-toggle",20,1),i(),l(23,"div",21)(24,"mat-form-field",22)(25,"mat-label"),d(26,"Primer nombre"),i(),p(27,"input",23),i(),l(28,"mat-form-field",22)(29,"mat-label"),d(30,"Segundo nombre"),i(),p(31,"input",24),i()(),l(32,"div",21)(33,"mat-form-field",22)(34,"mat-label"),d(35,"Primer apellido"),i(),p(36,"input",25),i(),l(37,"mat-form-field",22)(38,"mat-label"),d(39,"Segundo apellido"),i(),p(40,"input",26),i()(),l(41,"div",21)(42,"mat-form-field",22)(43,"mat-label"),d(44,"Tipo de documento"),i(),l(45,"mat-select",27),f(46,dt,2,1,"ng-container",28),b(47,"async"),i()(),l(48,"mat-form-field",22)(49,"mat-label"),d(50,"N\xFAmero de identificaci\xF3n"),i(),p(51,"input",29),i()(),l(52,"div",21)(53,"mat-form-field",22)(54,"mat-label"),d(55,"G\xE9nero"),i(),l(56,"mat-select",30),f(57,pt,2,1,"ng-container",28),b(58,"async"),i()(),l(59,"mat-form-field",22)(60,"mat-label"),d(61,"Fecha de nacimiento"),i(),p(62,"input",31)(63,"mat-datepicker-toggle",32)(64,"mat-datepicker",null,2),i()()(),l(66,"div")(67,"p",16),d(68,"Informaci\xF3n demogr\xE1fica"),i(),l(69,"div",21)(70,"mat-form-field",22)(71,"mat-label"),d(72,"Departamento"),i(),l(73,"mat-select",33,3),D("selectionChange",function(h){return w(c),V(m.onSelected(h))}),f(75,ut,2,1,"ng-container",28),b(76,"async"),i()(),l(77,"mat-form-field",22)(78,"mat-label"),d(79,"Ciudad"),i(),l(80,"mat-select",34),f(81,ht,2,1,"ng-container",28),b(82,"async"),i()()(),l(83,"div",21)(84,"mat-form-field",22)(85,"mat-label"),d(86,"Direcci\xF3n"),i(),p(87,"input",35),i(),l(88,"mat-form-field",22)(89,"mat-label"),d(90,"Celular"),i(),p(91,"input",36),i()(),l(92,"div",21)(93,"mat-form-field",22)(94,"mat-label"),d(95,"Tel\xE9fono"),i(),p(96,"input",37),i(),l(97,"mat-form-field",22)(98,"mat-label"),d(99,"Email"),i(),p(100,"input",38),i()(),l(101,"div")(102,"p",16),d(103,"Informaci\xF3n contractual"),i(),l(104,"div",21)(105,"mat-form-field",22)(106,"mat-label"),d(107,"Empresa"),i(),l(108,"mat-select",39),f(109,Ct,2,1,"ng-container",28),b(110,"async"),i()(),l(111,"mat-form-field",22)(112,"mat-label"),d(113,"Cargo"),i(),p(114,"input",40),i()(),l(115,"div",21)(116,"mat-form-field",22)(117,"mat-label"),d(118,"Inicio de contrato"),i(),p(119,"input",31)(120,"mat-datepicker-toggle",32)(121,"mat-datepicker",null,4),i(),f(123,St,8,3,"ng-container",28),i(),l(124,"div",21)(125,"mat-form-field",22)(126,"mat-label"),d(127,"Tipo de contrato"),i(),l(128,"mat-select",41),D("selectionChange",function(h){return w(c),V(m.selectedDeduccion(h))}),f(129,_t,2,2,"mat-option",42),i()()(),l(130,"div",21)(131,"mat-form-field",22)(132,"mat-label"),d(133,"Deducciones legales"),i(),l(134,"mat-select",43),f(135,bt,2,1,"ng-container",28),b(136,"async"),i()()(),l(137,"div",21)(138,"mat-form-field",22)(139,"mat-label"),d(140,"Salario base"),i(),p(141,"input",44),i(),l(142,"mat-form-field",22)(143,"mat-label"),d(144,"Otros ingresos"),i(),p(145,"input",45),i()(),f(146,yt,10,4,"ng-container",28),l(147,"div",21)(148,"mat-form-field",22)(149,"mat-label"),d(150,"Salario devengado"),i(),p(151,"input",46),i()(),l(152,"div",21)(153,"mat-form-field",22)(154,"mat-label"),d(155,"Nivel de riesgo"),i(),l(156,"mat-select",47),f(157,xt,2,1,"ng-container",28),b(158,"async"),i()(),l(159,"mat-form-field",22)(160,"mat-label"),d(161,"Capacidad de endeudamiento"),i(),p(162,"input",48),i()()(),l(163,"div")(164,"p",16),d(165,"Informaci\xF3n bancaria"),i(),l(166,"div",21)(167,"mat-form-field",22)(168,"mat-label"),d(169,"Tipo de cuenta"),i(),l(170,"mat-select",49),f(171,Nt,2,1,"ng-container",28),b(172,"async"),i()()(),l(173,"div",21)(174,"mat-form-field",22)(175,"mat-label"),d(176,"Bancos"),i(),l(177,"mat-select",50),f(178,Tt,2,1,"ng-container",28),b(179,"async"),i()(),l(180,"mat-form-field",22)(181,"mat-label"),d(182,"N\xFAmero de cuenta bancaria"),i(),p(183,"input",51),i()()()(),l(184,"div",52)(185,"button",53),D("click",function(){return w(c),V(m.closeDialog())}),l(186,"span"),d(187," Cancelar "),i()(),l(188,"button",54),D("click",function(){return w(c),V(m.onSave())}),l(189,"span"),d(190," Guardar "),i()()()()()()}if(e&2){let c=M(13),g=M(65),h=M(122);n(3),G(" ",m._matData.edit?"Actualizar trabajador":"Agregar trabajador"," "),n(),r("formGroup",m.form),n(3),r("svgIcon","heroicons_outline:camera"),n(4),r("ngIf",m.form.get("foto").value)("ngIfElse",c),n(9),G(" Estado ",m.form.get("estado").value?"Activo":"Inactivo"," "),n(),r("color","primary")("formControlName","estado"),n(6),r("formControlName","primerNombre"),n(4),r("formControlName","segundoNombre"),n(5),r("formControlName","primerApellido"),n(4),r("formControlName","segundoApellido"),n(5),r("formControlName","idTipoDoc"),n(),r("ngIf",y(47,56,m.tiposDocumentos$)),n(5),r("formControlName","numDoc"),n(5),r("formControlName","idGenero"),n(),r("ngIf",y(58,58,m.generos$)),n(5),r("matDatepicker",g)("formControlName","fechaNacimiento"),n(),r("for",g),n(10),r("formControlName","idDepartamento"),n(2),r("ngIf",y(76,60,m.departamentos$)),n(5),r("formControlName","idMunicipio"),n(),r("ngIf",y(82,62,m.municipios$)),n(6),r("formControlName","direccion"),n(4),r("formControlName","telefono"),n(5),r("formControlName","telefono2"),n(4),r("formControlName","correo"),n(8),r("formControlName","idSubEmpresa"),n(),r("ngIf",y(110,64,m.empresasClientes$)),n(5),r("formControlName","cargo"),n(5),r("matDatepicker",h)("formControlName","fechaInicioContrato"),n(),r("for",h),n(3),r("ngIf",m.form.get("estado").value==!1),n(5),r("formControlName","idTipoContrato"),n(),r("ngForOf",m.tipoContratos),n(5),r("formControlName","idDeduccionLegal")("disabled",!0),n(),r("ngIf",y(136,66,m.deduccion$)),n(6),r("formControlName","salarioBase"),n(4),r("formControlName","otroIngreso"),n(),r("ngIf",m.deduccionLegal),n(5),r("readonly",!0)("formControlName","salarioDevengado"),n(5),r("formControlName","idNivelRiesgo"),n(),r("ngIf",y(158,68,m.riesgos$)),n(5),r("formControlName","capacidadEndeudamiento")("readonly",!0),n(8),r("formControlName","idTipoCuenta"),n(),r("ngIf",y(172,70,m.tipoCuentas$)),n(6),r("formControlName","idBanco"),n(),r("ngIf",y(179,72,m.bancos$)),n(5),r("formControlName","numCuentaBancaria"),n(2),r("color","primary"),n(3),r("color","primary")}},dependencies:[J,z,U,Ie,$e,Ae,Te,we,Ve,Me,ke,Se,be,Be,ve,Ce,Ge,He,ze,Ne,Z,Ye,Pe],styles:[".custom-dialog-container{width:100%}@media (min-width: 1280px){  .custom-dialog-container{width:50%}}"]});let t=o;return t})();var nt=(()=>{let o=class o{constructor(a,e,m){this._matDialog=a,this.estadoDatosService=e,this.empleadoService=m,this.data=[],this.columns=["Estado","Documento","Identificaci\xF3n","Nombre completo","Tel\xE9fono","Cargo"],this.columnPropertyMap={Estado:"estado",Documento:"nombreTipoDocumento",Identificaci\u00F3n:"numDoc","Nombre completo":"nombreCompleto",Tel\u00E9fono:"telefono",Cargo:"cargo"},this.buttons=[{label:"Edit",icon:"edit",action:c=>{console.log("Editing",c),this.selectedData=c,this.onEdit()}}]}onNew(){this._matDialog.open(me,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}onEdit(){this._matDialog.open(me,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}getEmpleados(){this.subcription$=this.empleadoService.getEmpleados().pipe(ee(a=>(a.data.forEach(e=>{e.estado?e.estado=ae.ACTIVO:e.estado=ae.INACTIVO}),a)),ee(a=>(a.data.forEach(e=>{e&&(e.nombreCompleto=e.primerNombre.concat(" ",e.segundoNombre?e.segundoNombre+" ":"",e.primerApellido," ",e.segundoApellido))}),a))).subscribe(a=>{this.data=a.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{e&&this.getEmpleados()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEmpleados(),this.listenGrid()}};o.\u0275fac=function(e){return new(e||o)(L(xe),L(Y),L(q))},o.\u0275cmp=R({type:o,selectors:[["app-grid-empleados"]],standalone:!0,features:[H],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"mt-2","w-full","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold","sm:ml-4","sm:mt-0","sm:w-auto",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(e,m){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),d(3,"Trabajadores"),i(),l(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5)(7,"input",6),i(),l(8,"button",7),D("click",function(){return m.onNew()}),p(9,"mat-icon",8),l(10,"span",9),d(11,"Agregar"),i()()()(),l(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),i()()()),e&2&&(n(5),r("subscriptSizing","dynamic"),n(),r("svgIcon","heroicons_solid:magnifying-glass"),n(),r("autocomplete","off")("placeholder","Buscar"),n(),r("color","primary"),n(),r("svgIcon","heroicons_outline:plus"),n(5),r("columns",m.columns)("displayedColumns",m.columns)("columnPropertyMap",m.columnPropertyMap)("data",m.data)("buttons",m.buttons))},dependencies:[Oe,J,z,Z,U]});let t=o;return t})();var Mi=[{path:"",component:nt}];export{Mi as default};
