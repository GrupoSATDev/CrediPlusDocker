import{a as Ne,b as Me,c as Te,d as we,e as ke}from"./chunk-AO6DLKMK.js";import{a as Ae}from"./chunk-BPHJYVSL.js";import{a as Ie}from"./chunk-YMHQQ6B2.js";import{a as $e}from"./chunk-5EW2GNCH.js";import{a as q}from"./chunk-6IEWE3OU.js";import{a as U,b as O,c as Fe}from"./chunk-D2WA66PX.js";import{a as xe,b as De}from"./chunk-KK37BEM6.js";import{a as pe,b as ce,c as de,k as ge}from"./chunk-MW3QT2ZK.js";import"./chunk-MPMWAGXF.js";import{A as ye,E as j,a as fe,d as ue,h as A,k as ve,o as he,p as Se,s as be,u as _e,v as Ce,x as Ee}from"./chunk-FX7WUQQF.js";import{N as me,O as le,Y as se,ba as $,ga as P}from"./chunk-Y7SWYIYW.js";import"./chunk-QH33P6NP.js";import{a as G}from"./chunk-T2KHVOBS.js";import{f as oe,g as ne,i as ae,j as J,l as re,r as k}from"./chunk-7DC5V47F.js";import{$ as D,Cb as a,Db as o,Eb as c,Fb as b,Gb as _,Ib as ee,Ob as C,Qb as W,Wa as Z,Xb as te,Yb as l,Za as i,Zb as E,_a as M,_b as T,cc as ie,dc as w,ea as S,fa as d,ka as I,lc as g,mc as v,pb as u,q as Y,rb as n,ua as F,va as N,yb as H}from"./chunk-5H7N2SGK.js";import{a as x,d as L}from"./chunk-NEB6MB4Y.js";var V=(()=>{let t=class t{constructor(r,m){this._http=r,this.appSettings=m}getEmpleados(){return this._http.get(this.appSettings.empleados.url.base)}postEmpleados(r){return delete r.id,this._http.post(this.appSettings.empleados.url.base,r)}putEmpleados(r){let m=r.id;return delete r.id,this._http.put(`${this.appSettings.empleados.url.base}/${m}`,r)}};t.\u0275fac=function(m){return new(m||t)(S(k),S(G))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Pe=(()=>{let t=class t{constructor(r,m){this._http=r,this.appSettings=m}getCargos(){return this._http.get(this.appSettings.cargos.url.base)}postCargos(r){return delete r.id,this._http.post(this.appSettings.cargos.url.base,r)}putCargos(r){let m=r.id;return delete r.id,this._http.put(`${this.appSettings.cargos.url.base}/${m}`,r)}};t.\u0275fac=function(m){return new(m||t)(S(k),S(G))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Re(e,t){if(e&1&&c(0,"img",10),e&2){let s=W();n("src",s.profile.avatar,Z)("alt","Profile avatar")}}function ze(e,t){if(e&1&&(a(0,"div",11),l(1),o()),e&2){let s=W();i(),T(" ",s.profile.name.charAt(0)," ")}}function Le(e,t){if(e&1&&(a(0,"mat-option",24),l(1),o()),e&2){let s=t.$implicit;n("value",s.id),i(),E(s.nombre)}}function He(e,t){if(e&1&&(b(0),u(1,Le,2,2,"mat-option",23),_()),e&2){let s=t.ngIf;i(),n("ngForOf",s.data)}}function We(e,t){if(e&1&&(a(0,"mat-option",24),l(1),o()),e&2){let s=t.$implicit;n("value",s.id),i(),E(s.nombre)}}function Je(e,t){if(e&1&&(b(0),u(1,We,2,2,"mat-option",23),_()),e&2){let s=t.ngIf;i(),n("ngForOf",s.data)}}function Ue(e,t){if(e&1&&(a(0,"mat-option",24),l(1),o()),e&2){let s=t.$implicit;n("value",s.id),i(),E(s.nombre)}}function qe(e,t){if(e&1&&(b(0),u(1,Ue,2,2,"mat-option",23),_()),e&2){let s=t.ngIf;i(),n("ngForOf",s.data)}}function Ke(e,t){if(e&1&&(a(0,"mat-option",24),l(1),o()),e&2){let s=t.$implicit;n("value",s.id),i(),E(s.nombre)}}function Qe(e,t){if(e&1&&(b(0),u(1,Ke,2,2,"mat-option",23),_()),e&2){let s=t.ngIf;i(),n("ngForOf",s.data)}}function Xe(e,t){if(e&1&&(a(0,"mat-option",24),l(1),o()),e&2){let s=t.$implicit;n("value",s.idEmpresa),i(),E(s.razonSocial)}}function Ye(e,t){if(e&1&&(b(0),u(1,Xe,2,2,"mat-option",23),_()),e&2){let s=t.ngIf;i(),n("ngForOf",s.data)}}var Q=(()=>{let t=class t{constructor(){this.fb=d(Ee),this.dialogRef=d(pe),this.fuseService=d(ge),this.estadosDatosService=d(O),this.toasService=d(Fe),this.tiposDocumentosService=d(Ae),this._locacionService=d(Ie),this.generoService=d($e),this.empresaClienteService=d(we),this.datePipe=d(J),this.empleadosServices=d(V),this.cargosServices=d(Pe),this.departamentos$=this._locacionService.getDepartamentos(),this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos(),this.generos$=this.generoService.getGeneros(),this.empresasClientes$=this.empresaClienteService.getEmpresas(),this.cargos$=this.cargosServices.getCargos(),this._matData=d(ce),this.profile={avatar:"",name:"Pedro"}}ngOnInit(){this.createForm();let r=this._matData;if(r.edit){let m=r.data;this.form.patchValue(m);let{idDepartamento:p}=m;this.municipios$=this._locacionService.getMunicipio(p)}}getMunicipios(r){let m=r.value;this.municipios$=this._locacionService.getMunicipio(m)}onSave(){if(this.form.valid)if(this._matData.edit){let m=this.form.getRawValue(),{idDepartamento:f,fechaNacimiento:h}=m,y=L(m,["idDepartamento","fechaNacimiento"]),B=this.datePipe.transform(h,"dd/MM/yyyy"),R=x({fechaNacimiento:B},y);this.fuseService.open(x({},U)).afterClosed().subscribe(z=>{z==="confirmed"?this.empleadosServices.putEmpleados(R).subscribe(X=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let r=this.form.getRawValue(),{idDepartamento:f,fechaNacimiento:h}=r,y=L(r,["idDepartamento","fechaNacimiento"]),B=this.datePipe.transform(h,"dd/MM/yyyy"),R=x({fechaNacimiento:B},y);this.fuseService.open(x({},U)).afterClosed().subscribe(z=>{z==="confirmed"?this.empleadosServices.postEmpleados(R).subscribe(X=>{console.log(X),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],primerNombre:[""],segundoNombre:[""],primerApellido:[""],segundoApellido:[""],idTipoDoc:[""],numDoc:[""],idDepartamento:[""],idMunicipio:[""],telefono:[""],telefono2:[""],direccion:[""],idGenero:[""],correo:[""],idCargo:[""],fechaNacimiento:[""],foto:[""],firma:[""],idSubEmpresa:[""]})}closeDialog(){this.dialogRef.close()}};t.\u0275fac=function(m){return new(m||t)},t.\u0275cmp=I({type:t,selectors:[["app-form-empleados"]],standalone:!0,features:[ie([{provide:le,useClass:ke},{provide:me,useValue:"en-GB"},J]),w],decls:107,vars:43,consts:[["picker",""],["data",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full","mb-8"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],[1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"flex","gap-2.5"],[1,"w-full"],["matInput","",3,"formControlName"],[3,"formControlName"],[4,"ngIf"],["matInput","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],[3,"selectionChange","formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(m,p){if(m&1){let f=ee();a(0,"div",2)(1,"div",3)(2,"div",4),l(3),o(),a(4,"form",5)(5,"div",6)(6,"div",7),c(7,"mat-icon",8),a(8,"div",9),l(9," Cambiar foto "),o()(),u(10,Re,1,2,"img",10)(11,ze,2,1,"div",11),o(),l(12),g(13,"json"),a(14,"div",12)(15,"mat-form-field",13)(16,"mat-label"),l(17,"Primer nombre"),o(),c(18,"input",14),o(),a(19,"mat-form-field",13)(20,"mat-label"),l(21,"Segundo nombre"),o(),c(22,"input",14),o()(),a(23,"div",12)(24,"mat-form-field",13)(25,"mat-label"),l(26,"Primer apellido"),o(),c(27,"input",14),o(),a(28,"mat-form-field",13)(29,"mat-label"),l(30,"Segundo apellido"),o(),c(31,"input",14),o()(),a(32,"div",12)(33,"mat-form-field",13)(34,"mat-label"),l(35,"Tipos de documentos"),o(),a(36,"mat-select",15),u(37,He,2,1,"ng-container",16),g(38,"async"),o()(),a(39,"mat-form-field",13)(40,"mat-label"),l(41,"N\xFAmero de identificaci\xF3n"),o(),c(42,"input",14),o()(),a(43,"div",12)(44,"mat-form-field",13)(45,"mat-label"),l(46,"G\xE9nero"),o(),a(47,"mat-select",15),u(48,Je,2,1,"ng-container",16),g(49,"async"),o()(),a(50,"mat-form-field",13)(51,"mat-label"),l(52,"Fecha de nacimiento"),o(),c(53,"input",17)(54,"mat-datepicker-toggle",18)(55,"mat-datepicker",null,0),o()(),a(57,"div",12)(58,"mat-form-field",13)(59,"mat-label"),l(60,"Departamentos"),o(),a(61,"mat-select",19,1),C("selectionChange",function(y){return F(f),N(p.getMunicipios(y))}),u(63,qe,2,1,"ng-container",16),g(64,"async"),o()(),a(65,"mat-form-field",13)(66,"mat-label"),l(67,"Ciudad"),o(),a(68,"mat-select",15),u(69,Qe,2,1,"ng-container",16),g(70,"async"),o()()(),a(71,"div",12)(72,"mat-form-field",13)(73,"mat-label"),l(74,"Direcci\xF3n"),o(),c(75,"input",14),o(),a(76,"mat-form-field",13)(77,"mat-label"),l(78,"Celular"),o(),c(79,"input",14),o()(),a(80,"div",12)(81,"mat-form-field",13)(82,"mat-label"),l(83,"Tel\xE9fono"),o(),c(84,"input",14),o(),a(85,"mat-form-field",13)(86,"mat-label"),l(87,"Email"),o(),c(88,"input",14),o()(),a(89,"div",12)(90,"mat-form-field",13)(91,"mat-label"),l(92,"Cargo"),o(),c(93,"input",14),o(),a(94,"mat-form-field",13)(95,"mat-label"),l(96,"Empresas clientes"),o(),a(97,"mat-select",15),u(98,Ye,2,1,"ng-container",16),g(99,"async"),o()()(),a(100,"div",20)(101,"button",21),C("click",function(){return F(f),N(p.closeDialog())}),a(102,"span"),l(103," Cancelar "),o()(),a(104,"button",22),C("click",function(){return F(f),N(p.onSave())}),a(105,"span"),l(106," Guardar "),o()()()()()()}if(m&2){let f=te(56);i(3),T(" ",p._matData.edit?"Actualizar empleado":"Crear empleado"," "),i(),n("formGroup",p.form),i(3),n("svgIcon","heroicons_outline:camera"),i(3),H(p.profile.avatar?10:-1),i(),H(p.profile.avatar?-1:11),i(),T(" ",v(13,31,p.form.getRawValue())," "),i(6),n("formControlName","primerNombre"),i(4),n("formControlName","segundoNombre"),i(5),n("formControlName","primerApellido"),i(4),n("formControlName","segundoApellido"),i(5),n("formControlName","idTipoDoc"),i(),n("ngIf",v(38,33,p.tiposDocumentos$)),i(5),n("formControlName","numDoc"),i(5),n("formControlName","idGenero"),i(),n("ngIf",v(49,35,p.generos$)),i(5),n("matDatepicker",f)("formControlName","fechaNacimiento"),i(),n("for",f),i(7),n("formControlName","idDepartamento"),i(2),n("ngIf",v(64,37,p.departamentos$)),i(5),n("formControlName","idMunicipio"),i(),n("ngIf",v(70,39,p.municipios$)),i(6),n("formControlName","direccion"),i(4),n("formControlName","telefono"),i(5),n("formControlName","telefono2"),i(4),n("formControlName","correo"),i(5),n("formControlName","idCargo"),i(4),n("formControlName","idMunicipio"),i(),n("ngIf",v(99,41,p.empresasClientes$)),i(3),n("color","primary"),i(3),n("color","primary")}},dependencies:[$,A,j,fe,ye,be,ve,he,Se,_e,Ce,ae,se,xe,oe,ne,Ne,Me,Te,ue,P,re]});let e=t;return e})();var Ge=(()=>{let t=class t{constructor(r,m,p){this._matDialog=r,this.estadoDatosService=m,this.empleadoService=p,this.data=[],this.columns=["Tipo de documento","Identificaci\xF3n","Primer nombre","Segundo nombre","Primer apellido","Segundo apellido","Direcci\xF3n","Tel\xE9fono","Cargo"],this.columnPropertyMap={"Tipo de documento":"idTipoDoc",Identificaci\u00F3n:"numDoc","Primer nombre":"primerNombre","Segundo nombre":"segundoNombre","Primer apellido":"primerApellido","Segundo apellido":"segundoApellido",Direcci\u00F3n:"direccion",Tel\u00E9fono:"telefono",Cargo:"cargo"},this.buttons=[{label:"Edit",icon:"edit",action:f=>{console.log("Editing",f),this.selectedData=f,this.onEdit()}}]}onNew(){this._matDialog.open(Q,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",width:"50%",maxWidth:"100%"})}onEdit(){this._matDialog.open(Q,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getEmpleados(){this.subcription$=this.empleadoService.getEmpleados().pipe(Y(r=>(r.data.forEach(m=>{m.estado?m.estado=q.ACTIVO:m.estado=q.INACTIVO}),r))).subscribe(r=>{this.data=r.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(m=>{m&&this.getEmpleados()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEmpleados(),this.listenGrid()}};t.\u0275fac=function(m){return new(m||t)(M(de),M(O),M(V))},t.\u0275cmp=I({type:t,selectors:[["app-grid-empleados"]],standalone:!0,features:[w],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(m,p){m&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Empleados"),o(),a(4,"div",3)(5,"mat-form-field",4),c(6,"mat-icon",5)(7,"input",6),o(),a(8,"button",7),C("click",function(){return p.onNew()}),c(9,"mat-icon",8),a(10,"span",9),l(11,"Crear empleado"),o()()()(),a(12,"div",10)(13,"div",11),c(14,"app-custom-table",12),o()()()),m&2&&(i(5),n("subscriptSizing","dynamic"),i(),n("svgIcon","heroicons_solid:magnifying-glass"),i(),n("autocomplete","off")("placeholder","Buscar"),i(),n("color","primary"),i(),n("svgIcon","heroicons_outline:plus"),i(5),n("columns",p.columns)("displayedColumns",p.columns)("columnPropertyMap",p.columnPropertyMap)("data",p.data)("buttons",p.buttons))},dependencies:[De,$,A,P,j]});let e=t;return e})();var Ot=[{path:"",component:Ge}];export{Ot as default};
