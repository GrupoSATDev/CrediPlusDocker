import{a as I}from"./chunk-6IEWE3OU.js";import{a as F,b as J}from"./chunk-V2BUSTT2.js";import{a as S}from"./chunk-QYHUCIZ2.js";import{b as q}from"./chunk-L7DHXJYW.js";import{g as R}from"./chunk-TDI4JDYA.js";import{a as k,b as N,c as G}from"./chunk-4CJ6LLSU.js";import"./chunk-XWKUJA73.js";import{A as L,E as D,a as A,h as v,k as V,o as $,p as z,s as P,u as B,v as W,x as H}from"./chunk-JABQIN56.js";import{ba as b,ga as j}from"./chunk-COZCVVRH.js";import"./chunk-NFYLEJKB.js";import{a as O}from"./chunk-T6M75WYX.js";import{q as T}from"./chunk-LP47ZEUX.js";import{$ as w,Cb as s,Db as n,Eb as p,Ob as u,Yb as c,Za as r,_a as h,_b as E,dc as g,ea as C,fa as l,ka as f,q as _,rb as a}from"./chunk-5H7N2SGK.js";import{a as y}from"./chunk-NEB6MB4Y.js";var x=(()=>{let o=class o{constructor(t,e){this._http=t,this.appSettings=e}getTiposDocumentos(){return this._http.get(this.appSettings.tiposDocumentos.url.base)}postDocumentos(t){return delete t.id,this._http.post(this.appSettings.tiposDocumentos.url.base,t)}putDocumentos(t){let e=t.id;return delete t.id,this._http.put(`${this.appSettings.tiposDocumentos.url.base}/${e}`,t)}};o.\u0275fac=function(e){return new(e||o)(C(T),C(O))},o.\u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"});let m=o;return m})();var M=(()=>{let o=class o{constructor(){this.fb=l(H),this.dialogRef=l(k),this.fuseService=l(R),this.toasService=l(J),this.estadosDatosService=l(S),this.tiposDocumentoService=l(x),this._matData=l(N)}ngOnInit(){this.createForm();let t=this._matData;if(t.edit){let e=t.data;this.form.patchValue(e)}}onSave(){if(this.form.valid)if(this._matData.edit){let t=this.form.getRawValue();this.fuseService.open(y({},F)).afterClosed().subscribe(i=>{i==="confirmed"?this.tiposDocumentoService.putDocumentos(t).subscribe(d=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let t=this.form.getRawValue();this.fuseService.open(y({},F)).afterClosed().subscribe(i=>{i==="confirmed"?this.tiposDocumentoService.postDocumentos(t).subscribe(d=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],codigo:[""],nombre:[""]})}closeDialog(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=f({type:o,selectors:[["app-form-tipos-documentos"]],standalone:!0,features:[g],decls:20,vars:6,consts:[[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex","flex-wrap","justify-between"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),c(3),n(),s(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),c(7,"C\xF3digo"),n(),p(8,"input",5),n(),s(9,"mat-form-field",4)(10,"mat-label"),c(11,"Nombre"),n(),p(12,"input",5),n(),s(13,"div",6)(14,"button",7),u("click",function(){return i.closeDialog()}),s(15,"span"),c(16," Cancelar "),n()(),s(17,"button",8),u("click",function(){return i.onSave()}),s(18,"span"),c(19," Guardar "),n()()()()()()),e&2&&(r(3),E(" ",i._matData.edit?"Actualizar documento":"Crear documento"," "),r(),a("formGroup",i.form),r(4),a("formControlName","codigo"),r(4),a("formControlName","nombre"),r(2),a("color","primary"),r(3),a("color","primary"))},dependencies:[L,P,V,$,z,B,W,v,D,A,b]});let m=o;return m})();var Q=(()=>{let o=class o{constructor(t,e,i){this._matDialog=t,this.estadoDatosService=e,this.tiposDocumentosServices=i,this.data=[],this.columns=["Estado","C\xF3digo","Nombre documento"],this.columnPropertyMap={Estado:"estado",C\u00F3digo:"codigo","Nombre documento":"nombre"},this.buttons=[{label:"Edit",icon:"edit",action:d=>{console.log("Editing",d),this.selectedData=d,this.onEdit()}}]}onNew(){this._matDialog.open(M,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%"})}onEdit(){this._matDialog.open(M,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getDocumentos(){this.subcription$=this.tiposDocumentosServices.getTiposDocumentos().pipe(_(t=>(t.data.forEach(e=>{e.estado?e.estado=I.ACTIVO:e.estado=I.INACTIVO}),t))).subscribe(t=>{this.data=t.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{e&&this.getDocumentos()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getDocumentos(),this.listenGrid()}};o.\u0275fac=function(e){return new(e||o)(h(G),h(S),h(x))},o.\u0275cmp=f({type:o,selectors:[["app-grid-tipos-documentos"]],standalone:!0,features:[g],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),c(3,"Tipos de documentos"),n(),s(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5)(7,"input",6),n(),s(8,"button",7),u("click",function(){return i.onNew()}),p(9,"mat-icon",8),s(10,"span",9),c(11,"Crear documento"),n()()()(),s(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),n()()()),e&2&&(r(5),a("subscriptSizing","dynamic"),r(),a("svgIcon","heroicons_solid:magnifying-glass"),r(),a("autocomplete","off")("placeholder","Buscar"),r(),a("color","primary"),r(),a("svgIcon","heroicons_outline:plus"),r(5),a("columns",i.columns)("displayedColumns",i.columns)("columnPropertyMap",i.columnPropertyMap)("data",i.data)("buttons",i.buttons))},dependencies:[q,b,v,j,D]});let m=o;return m})();var Mt=[{path:"",component:Q}];export{Mt as default};
