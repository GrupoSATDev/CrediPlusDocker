import{a as re}from"./chunk-5AFEJ24F.js";import{a as ne}from"./chunk-6FTV2M7O.js";import{a as y}from"./chunk-I6FYLBSO.js";import{a as oe}from"./chunk-BAD57Q24.js";import{a as ae}from"./chunk-6IEWE3OU.js";import{a as te}from"./chunk-QE3E4OX7.js";import{a as N,b as ie}from"./chunk-GD676RBR.js";import{a as _}from"./chunk-OFEOPKCC.js";import{a as ee}from"./chunk-QYSIOB6Y.js";import"./chunk-ISHIQJYM.js";import{g as H}from"./chunk-CUGJBCL5.js";import{a as P,b as j,c as V}from"./chunk-3P4FUJJD.js";import"./chunk-4CCKGQO6.js";import{B as Y,C as Z,G as x,b as z,i as C,l as L,p as q,q as J,u as K,w as Q,x as U,z as X}from"./chunk-7YVLRDAA.js";import{$ as R,ea as S,ja as W}from"./chunk-T34F2ICN.js";import"./chunk-XMIUBE2U.js";import"./chunk-PDEGUYSW.js";import{f as G,g as O,i as $}from"./chunk-YH7HM3TK.js";import{Cb as a,Db as s,Eb as u,Fb as F,Gb as E,Ob as g,Yb as l,Za as e,Zb as M,_a as h,_b as k,dc as A,ec as b,fa as c,ka as v,mc as I,nc as w,pb as f,q as B,rb as o}from"./chunk-32HXX3OB.js";import{a as D}from"./chunk-NEB6MB4Y.js";function le(n,t){if(n&1&&(a(0,"mat-option",13),l(1),s()),n&2){let d=t.$implicit;o("value",d.id),e(),M(d.nombre)}}function ce(n,t){if(n&1&&(F(0),f(1,le,2,2,"mat-option",12),E()),n&2){let d=t.ngIf;e(),o("ngForOf",d.data)}}function de(n,t){if(n&1&&(a(0,"mat-option",13),l(1),s()),n&2){let d=t.$implicit;o("value",d.id),e(),M(d.nombre)}}function pe(n,t){if(n&1&&(F(0),f(1,de,2,2,"mat-option",12),E()),n&2){let d=t.ngIf;e(),o("ngForOf",d.data)}}var ue={validation:!1},T=(()=>{let t=class t{constructor(){this.fb=c(X),this.dialogRef=c(P),this.fuseService=c(H),this.estadosDatosService=c(_),this.toasService=c(ie),this.bancosService=c(re),this.cuentasBancariasService=c(y),this.tipoCuentasService=c(ne),this.tipoCuentas$=this.tipoCuentasService.getTipoCuentas(),this._matData=c(j),this.bancos$=this.bancosService.getBancos()}ngOnInit(){this.createForm();let m=this._matData;if(m.edit){let i=m.data;this.form.patchValue(i)}}createForm(){this.form=this.fb.group({id:[null],idTipoCuenta:[""],idBanco:[""],numeroCuenta:[""],descripcion:[""]})}onSave(){if(this.form.valid)if(this._matData.edit){let m=this.form.getRawValue();this.fuseService.open(D({},N)).afterClosed().subscribe(r=>{r==="confirmed"?this.cuentasBancariasService.putCuentas(m).subscribe(p=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let m=this.form.getRawValue();this.fuseService.open(D({},N)).afterClosed().subscribe(r=>{r==="confirmed"?this.cuentasBancariasService.postCuentas(m).subscribe(p=>{console.log(p),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}closeDialog(){this.dialogRef.close()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=v({type:t,selectors:[["app-form-cuentas"]],standalone:!0,features:[A([oe(ue)]),b],decls:32,vars:14,consts:[[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"w-full"],[3,"formControlName"],[4,"ngIf"],["matInput","",3,"formControlName"],["matInput","","placeholder","Detalle",3,"formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),l(3),s(),a(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),l(7,"Tipo de cuenta"),s(),a(8,"mat-select",5),f(9,ce,2,1,"ng-container",6),I(10,"async"),s()(),a(11,"mat-form-field",4)(12,"mat-label"),l(13,"Banco"),s(),a(14,"mat-select",5),f(15,pe,2,1,"ng-container",6),I(16,"async"),s()(),a(17,"mat-form-field",4)(18,"mat-label"),l(19,"N\xFAmero de cuenta"),s(),u(20,"input",7),s(),a(21,"mat-form-field",4)(22,"mat-label"),l(23,"Descripci\xF3n"),s(),u(24,"textarea",8),s(),a(25,"div",9)(26,"button",10),g("click",function(){return r.closeDialog()}),a(27,"span"),l(28," Cancelar "),s()(),a(29,"button",11),g("click",function(){return r.onSave()}),a(30,"span"),l(31," Guardar "),s()()()()()()),i&2&&(e(3),k(" ",r._matData.edit?"Actualizar cuenta":"Agregar cuenta"," "),e(),o("formGroup",r.form),e(4),o("formControlName","idTipoCuenta"),e(),o("ngIf",w(10,10,r.tipoCuentas$)),e(5),o("formControlName","idBanco"),e(),o("ngIf",w(16,12,r.bancos$)),e(5),o("formControlName","numeroCuenta"),e(4),o("formControlName","descripcion"),e(2),o("color","primary"),e(3),o("color","primary"))},dependencies:[Y,K,L,q,J,S,C,x,z,Z,Q,U,R,ee,G,O,$]});let n=t;return n})();var se=(()=>{let t=class t{constructor(m,i,r){this._matDialog=m,this.estadoDatosService=i,this.cuentasService=r,this.data=[],this.columns=["N\xFAmero de cuenta","Descripci\xF3n"],this.columnPropertyMap={"N\xFAmero de cuenta":"numeroCuenta",Descripci\u00F3n:"descripcion"},this.buttons=[{label:"Edit",icon:"edit",action:p=>{console.log("Editing",p),this.selectedData=p,this.onEdit()}}]}onNew(){this._matDialog.open(T,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%",disableClose:!0})}onEdit(){this._matDialog.open(T,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%",disableClose:!0})}getCuentas(){this.subcription$=this.cuentasService.getCuentas().pipe(B(m=>(m.data.forEach(i=>{if(i.estado)return i.estado=ae.ACTIVO,i}),m))).subscribe(m=>{this.data=m.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(i=>{i&&this.getCuentas()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getCuentas(),this.listenGrid()}};t.\u0275fac=function(i){return new(i||t)(h(V),h(_),h(y))},t.\u0275cmp=v({type:t,selectors:[["app-grid-cuentas"]],standalone:!0,features:[b],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","rounded-lg","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Cuentas Bancarias"),s(),a(4,"div",3)(5,"mat-form-field",4),u(6,"mat-icon",5)(7,"input",6),s(),a(8,"button",7),g("click",function(){return r.onNew()}),u(9,"mat-icon",8),a(10,"span",9),l(11,"Agregar"),s()()()(),a(12,"div",10)(13,"div",11),u(14,"app-custom-table",12),s()()()),i&2&&(e(5),o("subscriptSizing","dynamic"),e(),o("svgIcon","heroicons_solid:magnifying-glass"),e(),o("autocomplete","off")("placeholder","Buscar"),e(),o("color","primary"),e(),o("svgIcon","heroicons_outline:plus"),e(5),o("columns",r.columns)("displayedColumns",r.columns)("columnPropertyMap",r.columnPropertyMap)("data",r.data)("buttons",r.buttons))},dependencies:[te,S,C,W,x]});let n=t;return n})();var Qe=[{path:"",component:se}];export{Qe as default};
