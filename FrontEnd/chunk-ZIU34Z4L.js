import{a as q}from"./chunk-RCORILTM.js";import{a as Ze}from"./chunk-7AUBK6U6.js";import{a as Ge}from"./chunk-XOYVXEWN.js";import{a as Ue}from"./chunk-BH5CHIMT.js";import{a as He}from"./chunk-GFRFA6UA.js";import{a as Ye}from"./chunk-WCWONJER.js";import{a as Pe,b as Be,c as Oe}from"./chunk-QODY67HI.js";import{a as Re,b as Le}from"./chunk-SY7XYXPC.js";import{a as je}from"./chunk-NWZCBZI3.js";import{a as Je}from"./chunk-GNVXFPBY.js";import{a as te}from"./chunk-6IEWE3OU.js";import{a as ze}from"./chunk-TKUQ2GK7.js";import{a as $e}from"./chunk-3CZSUSTM.js";import{a as Ve}from"./chunk-BP3ZUNQJ.js";import{a as ee}from"./chunk-4WJQLHI3.js";import{a as J}from"./chunk-LDCTOPX4.js";import{a as Ae}from"./chunk-PVGNXBQP.js";import{a as ke}from"./chunk-TNSR37VG.js";import"./chunk-NWLCDP4D.js";import{g as ye}from"./chunk-ZHUIBFOH.js";import{a as Se,b as Ce,c as _e}from"./chunk-J6ZY6K5Q.js";import"./chunk-VY5HLTY4.js";import{C as Me,G as Y,b as Ee,e as be,i as z,l as xe,p as De,q as Ie,u as Fe,w as Ne,x as Te,z as we}from"./chunk-SXAYB37M.js";import{$ as ve,Q as ge,R as he,ea as Z,ja as U}from"./chunk-4L5SMXVA.js";import"./chunk-X53G34JD.js";import{a as N}from"./chunk-DGQEWR53.js";import{f as de,g as fe,i as ue,j as X,s as F}from"./chunk-X7QBE67O.js";import{$a as H,$b as R,Db as r,Eb as t,Fb as c,Gb as v,Hb as S,Jb as le,Pb as I,Rb as W,Xa as me,Y as _,Yb as A,Zb as p,_a as a,_b as y,aa as D,ac as se,fa as C,fc as pe,ga as u,gc as L,la as G,oc as E,pc as b,q as Q,qb as f,rc as ce,sb as n,va as M,wa as k}from"./chunk-UANZ7CBN.js";import{a as w,d as O}from"./chunk-NEB6MB4Y.js";var qe=(()=>{let i=class i{constructor(m,o){this._http=m,this.appSettings=o}getCargos(){return this._http.get(this.appSettings.cargos.url.base)}postCargos(m){return delete m.id,this._http.post(this.appSettings.cargos.url.base,m)}putCargos(m){let o=m.id;return delete m.id,this._http.put(`${this.appSettings.cargos.url.base}/${o}`,m)}};i.\u0275fac=function(o){return new(o||i)(C(F),C(N))},i.\u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var Ke=(()=>{let i=class i{constructor(m,o){this._http=m,this.appSettings=o}getRiesgos(){return this._http.get(this.appSettings.riesgos.url.base)}getRiesgo(m){return this._http.get(`${this.appSettings.riesgos.url.base}/${m}`)}};i.\u0275fac=function(o){return new(o||i)(C(F),C(N))},i.\u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var Qe=(()=>{let i=class i{constructor(m,o){this._http=m,this.appSettings=o}getContratos(){return this._http.get(this.appSettings.tipoContratos.url.base)}};i.\u0275fac=function(o){return new(o||i)(C(F),C(N))},i.\u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var We=(()=>{let i=class i{constructor(m,o){this._http=m,this.appSettings=o}getDeducciones(){return this._http.get(this.appSettings.deduccionesLegales.url.base)}};i.\u0275fac=function(o){return new(o||i)(C(F),C(N))},i.\u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function tt(e,i){if(e&1&&(v(0),c(1,"img",56),S()),e&2){let s=W();a(),n("src",s.image,me)("alt","Profile avatar")}}function it(e,i){if(e&1&&(r(0,"div",57),p(1),t()),e&2){let s,m=W();a(),R(" ",(s=m.form.get("primerNombre").value.charAt(0))!==null&&s!==void 0?s:"P"," ")}}function ot(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function at(e,i){if(e&1&&(v(0),f(1,ot,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function nt(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function rt(e,i){if(e&1&&(v(0),f(1,nt,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function mt(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function lt(e,i){if(e&1&&(v(0),f(1,mt,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function st(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function pt(e,i){if(e&1&&(v(0),f(1,st,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function ct(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.razonSocial)}}function dt(e,i){if(e&1&&(v(0),f(1,ct,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function ft(e,i){if(e&1&&(v(0),r(1,"mat-form-field",22)(2,"mat-label"),p(3,"Fin de contrato"),t(),c(4,"input",31)(5,"mat-datepicker-toggle",32)(6,"mat-datepicker",null,5),t(),S()),e&2){let s=A(7);a(4),n("matDatepicker",s)("formControlName","fechaFinContrato"),a(),n("for",s)}}function ut(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function gt(e,i){if(e&1&&(v(0),f(1,ut,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function ht(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),se("Porcentaje salud: ",s.porcentajeSalud,"% - Porcentaje pensi\xF3n: ",s.porcentajePension,"%")}}function vt(e,i){if(e&1&&(v(0),f(1,ht,2,3,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function St(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function Ct(e,i){if(e&1&&(v(0),f(1,St,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function _t(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function Et(e,i){if(e&1&&(v(0),f(1,_t,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}function bt(e,i){if(e&1&&(r(0,"mat-option",59),p(1),t()),e&2){let s=i.$implicit;n("value",s.id),a(),y(s.nombre)}}function yt(e,i){if(e&1&&(v(0),f(1,bt,2,2,"mat-option",58),S()),e&2){let s=i.ngIf;a(),n("ngForOf",s.data)}}var xt={validation:!1},ae=(()=>{let i=class i{constructor(){this.fb=u(we),this.dialogRef=u(Se),this.fuseService=u(ye),this.estadosDatosService=u(J),this.toasService=u(Ve),this.tiposDocumentosService=u(Ye),this._locacionService=u(je),this.generoService=u(Je),this.empresaClienteService=u(Ge),this.datePipe=u(X),this.empleadosServices=u(q),this.cargosServices=u(qe),this.riesgosServices=u(Ke),this.bancosServices=u(Ze),this.swalService=u(ze),this.departamentos$=this._locacionService.getDepartamentos().pipe(_(m=>{let o=m.data,l=this._matData;if(o&&!l.edit){this.form.get("idDepartamento").setValue(o[0].id);let d=this.form.get("idDepartamento").value;this.getMunicipios(d)}})),this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idTipoDoc").setValue(o[3].id)})),this.generos$=this.generoService.getGeneros().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idGenero").setValue(o[1].id)})),this.empresasClientes$=this.empresaClienteService.getEmpresasClientes().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idSubEmpresa").setValue(o[0].id)})),this.cargos$=this.cargosServices.getCargos(),this.riesgos$=this.riesgosServices.getRiesgos().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idNivelRiesgo").setValue(o[0].id)})),this.bancos$=this.bancosServices.getBancos().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idBanco").setValue(o[0].id)})),this._matData=u(Ce),this.tipoCuentasService=u(Ue),this.tipoCuentas$=this.tipoCuentasService.getTipoCuentas().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idTipoCuenta").setValue(o[0].id)})),this.tipoContratosService=u(Qe),this.tipoContratos$=this.tipoContratosService.getContratos().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idTipoContrato").setValue(o[0].id)})),this.deduccioLegalService=u(We),this.deduccion$=this.deduccioLegalService.getDeducciones().pipe(_(m=>{let o=m.data,l=this._matData;o&&!l.edit&&this.form.get("idDeduccionLegal").setValue(o[0].id)})),this.profile={avatar:"",name:"Pedro"}}ngOnInit(){this.createForm();let m=this._matData;if(m.edit){let l=m.data,o=l,{estado:d,idDepartamento:g,fechaNacimiento:h,fechaInicioContrato:P,fechaFinContrato:K}=o,$=O(o,["estado","idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato"]),j=new Date(h),T=new Date(P),x=new Date(K);this.municipios$=this._locacionService.getMunicipio(g),this.form.patchValue(w({fechaNacimiento:j,fechaInicioContrato:new Date(T.getFullYear(),T.getMonth(),T.getDate()),fechaFinContrato:new Date(x.getFullYear(),x.getMonth(),x.getDate()),idDepartamento:g,estado:d=="Activo"},$)),console.log(this.form.getRawValue()),this.image=`data:image/png;base64,  ${l.foto}`}this.form.get("salarioBase").valueChanges.subscribe(l=>{console.log(l),this.form.get("otroIngreso").valueChanges.subscribe(d=>{console.log(l+d),this.form.get("salarioDevengado").setValue(l+d-l*8/100)})})}onFileSelected(m){let o=m.target;if(o.files&&o.files.length>0){let l=o.files[0],d=new FileReader;d.onload=()=>{let g=d.result;this.image=g;let h=g.split(",")[1];this.form.get("foto").setValue(h)},d.readAsDataURL(l)}}onSelected(m){let o=m.value;this.getMunicipios(o)}getMunicipios(m){this.municipios$=this._locacionService.getMunicipio(m).pipe(_(o=>{let l=o.data,d=this._matData;l&&!d.edit&&this.form.get("idMunicipio").setValue(l[0].id)}))}onSave(){if(this.form.valid)if(this._matData.edit){let o=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:g,fechaInicioContrato:h,fechaFinContrato:P,salarioDevengado:K}=o,$=O(o,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado"]),j=this.datePipe.transform(g,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),T=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),x=this.datePipe.transform(P,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),ne=w({fechaNacimiento:j,fechaInicioContrato:T,fechaFinContrato:x},$);this.fuseService.open(w({},ee)).afterClosed().subscribe(B=>{B==="confirmed"?this.empleadosServices.putEmpleados(ne).subscribe(et=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro actualizado con exito!",timer:4e3}),this.closeDialog()},et=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al actualizar el registro!",timer:4e3})}):this.closeDialog()})}else{let m=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:g,fechaInicioContrato:h,fechaFinContrato:P,salarioDevengado:K}=m,$=O(m,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado"]),j=this.datePipe.transform(g,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),T=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),x=w({fechaNacimiento:j,fechaInicioContrato:T,fechaFinContrato:"0001-01-01T00:00:00+00:00"},$);console.log(x),this.fuseService.open(w({},ee)).afterClosed().subscribe(re=>{re==="confirmed"?this.empleadosServices.postEmpleados(x).subscribe(B=>{console.log(B),this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.closeDialog()},B=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],primerNombre:[""],segundoNombre:[""],primerApellido:[""],segundoApellido:[""],idTipoDoc:[""],numDoc:[""],idDepartamento:[""],idMunicipio:[""],telefono:[""],telefono2:[""],direccion:[""],idGenero:[""],correo:[""],cargo:[""],fechaNacimiento:[""],fechaInicioContrato:[""],fechaFinContrato:["null"],numCuentaBancaria:[""],capacidadEndeudamiento:[""],idNivelRiesgo:[""],idBanco:[""],idTipoCuenta:[""],foto:[""],firma:[""],idSubEmpresa:[""],idTipoContrato:[""],salarioBase:[0],otroIngreso:[0],idDeduccionLegal:[""],salarioDevengado:[""],estado:["true"]})}closeDialog(){this.dialogRef.close()}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=G({type:i,selectors:[["app-form-empleados"]],standalone:!0,features:[pe([{provide:he,useClass:He},{provide:ge,useValue:"en-GB"},X,Re(xt)]),L],decls:200,vars:76,consts:[["noAvatar",""],["twoStepToggle",""],["picker",""],["data",""],["inicio",""],["fin",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8","space-y-8",3,"formGroup"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full","mb-8"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],["type","file",1,"absolute","inset-0","opacity-0","cursor-pointer",3,"change"],[4,"ngIf","ngIfElse"],[1,"font-bold","mb-4","text-2xl"],[1,"flex","mb-4"],[1,"fcursor-pointer",3,"click"],[1,"font-medium","leading-6"],[1,"ml-4",3,"color","formControlName"],[1,"flex","flex-col","sm:flex-row","gap-2.5"],["floatLabel","always",1,"w-full"],["matInput","","placeholder","Primer nombre",3,"formControlName"],["matInput","","placeholder","Segundo nombre",3,"formControlName"],["matInput","","placeholder","Primer apellido",3,"formControlName"],["matInput","","placeholder","Segundo apellido",3,"formControlName"],["placeholder","Tipo de documento",3,"formControlName"],[4,"ngIf"],["matInput","","placeholder","N\xFAmero de identificaci\xF3n",3,"formControlName"],["placeholder","G\xE9nero",3,"formControlName"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["placeholder","Departamento",3,"selectionChange","formControlName"],["placeholder","Ciudad",3,"formControlName"],["matInput","","placeholder","Direcci\xF3n",3,"formControlName"],["matInput","","placeholder","Celular",3,"formControlName"],["matInput","","placeholder","Tel\xE9fono",3,"formControlName"],["matInput","","placeholder","Correo electronico",3,"formControlName"],["placeholder","Empresa",3,"formControlName"],["matInput","","placeholder","Cargo",3,"formControlName"],["placeholder","Tipo de contrato",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario base",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Otros ingresos",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario devengdado",3,"readonly","formControlName"],["placeholder","Deducciones legales",3,"formControlName","disabled"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salud",3,"readonly"],["matInput","","placeholder","Pensi\xF3n",3,"readonly"],["placeholder","Nivel de riesgo",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Capacidad de endeudamiento",3,"formControlName"],["placeholder","Tipo de cuenta",3,"formControlName"],["placeholder","Bancos",3,"formControlName"],["matInput","","placeholder","N\xFAmero de cuenta",3,"formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],[1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,l){if(o&1){let d=le();r(0,"div",6)(1,"div",7)(2,"div",8),p(3),t(),r(4,"form",9)(5,"div",10)(6,"div",11),c(7,"mat-icon",12),r(8,"div",13),p(9," Cambiar foto "),t(),r(10,"input",14),I("change",function(h){return M(d),k(l.onFileSelected(h))}),t()(),f(11,tt,2,2,"ng-container",15)(12,it,2,1,"ng-template",null,0,ce),t(),r(14,"div")(15,"p",16),p(16,"Informaci\xF3n general"),t(),r(17,"div",17)(18,"div",18),I("click",function(){M(d);let h=A(22);return k(h.toggle())}),r(19,"div",19),p(20),t()(),c(21,"mat-slide-toggle",20,1),t(),r(23,"div",21)(24,"mat-form-field",22)(25,"mat-label"),p(26,"Primer nombre"),t(),c(27,"input",23),t(),r(28,"mat-form-field",22)(29,"mat-label"),p(30,"Segundo nombre"),t(),c(31,"input",24),t()(),r(32,"div",21)(33,"mat-form-field",22)(34,"mat-label"),p(35,"Primer apellido"),t(),c(36,"input",25),t(),r(37,"mat-form-field",22)(38,"mat-label"),p(39,"Segundo apellido"),t(),c(40,"input",26),t()(),r(41,"div",21)(42,"mat-form-field",22)(43,"mat-label"),p(44,"Tipo de documento"),t(),r(45,"mat-select",27),f(46,at,2,1,"ng-container",28),E(47,"async"),t()(),r(48,"mat-form-field",22)(49,"mat-label"),p(50,"N\xFAmero de identificaci\xF3n"),t(),c(51,"input",29),t()(),r(52,"div",21)(53,"mat-form-field",22)(54,"mat-label"),p(55,"G\xE9nero"),t(),r(56,"mat-select",30),f(57,rt,2,1,"ng-container",28),E(58,"async"),t()(),r(59,"mat-form-field",22)(60,"mat-label"),p(61,"Fecha de nacimiento"),t(),c(62,"input",31)(63,"mat-datepicker-toggle",32)(64,"mat-datepicker",null,2),t()()(),r(66,"div")(67,"p",16),p(68,"Informaci\xF3n demogr\xE1fica"),t(),r(69,"div",21)(70,"mat-form-field",22)(71,"mat-label"),p(72,"Departamento"),t(),r(73,"mat-select",33,3),I("selectionChange",function(h){return M(d),k(l.onSelected(h))}),f(75,lt,2,1,"ng-container",28),E(76,"async"),t()(),r(77,"mat-form-field",22)(78,"mat-label"),p(79,"Ciudad"),t(),r(80,"mat-select",34),f(81,pt,2,1,"ng-container",28),E(82,"async"),t()()(),r(83,"div",21)(84,"mat-form-field",22)(85,"mat-label"),p(86,"Direcci\xF3n"),t(),c(87,"input",35),t(),r(88,"mat-form-field",22)(89,"mat-label"),p(90,"Celular"),t(),c(91,"input",36),t()(),r(92,"div",21)(93,"mat-form-field",22)(94,"mat-label"),p(95,"Tel\xE9fono"),t(),c(96,"input",37),t(),r(97,"mat-form-field",22)(98,"mat-label"),p(99,"Email"),t(),c(100,"input",38),t()(),r(101,"div")(102,"p",16),p(103,"Informaci\xF3n contractual"),t(),r(104,"div",21)(105,"mat-form-field",22)(106,"mat-label"),p(107,"Empresa"),t(),r(108,"mat-select",39),f(109,dt,2,1,"ng-container",28),E(110,"async"),t()(),r(111,"mat-form-field",22)(112,"mat-label"),p(113,"Cargo"),t(),c(114,"input",40),t()(),r(115,"div",21)(116,"mat-form-field",22)(117,"mat-label"),p(118,"Inicio de contrato"),t(),c(119,"input",31)(120,"mat-datepicker-toggle",32)(121,"mat-datepicker",null,4),t(),f(123,ft,8,3,"ng-container",28),t(),r(124,"div",21)(125,"mat-form-field",22)(126,"mat-label"),p(127,"Tipo de contrato"),t(),r(128,"mat-select",41),f(129,gt,2,1,"ng-container",28),E(130,"async"),t()()(),r(131,"div",21)(132,"mat-form-field",22)(133,"mat-label"),p(134,"Salario base"),t(),c(135,"input",42),t(),r(136,"mat-form-field",22)(137,"mat-label"),p(138,"Otros ingresos"),t(),c(139,"input",43),t()(),r(140,"div",21)(141,"mat-form-field",22)(142,"mat-label"),p(143,"Salario devengado"),t(),c(144,"input",44),t()(),r(145,"div",21)(146,"mat-form-field",22)(147,"mat-label"),p(148,"Deducciones legales"),t(),r(149,"mat-select",45),f(150,vt,2,1,"ng-container",28),E(151,"async"),t()()(),r(152,"div",21)(153,"mat-form-field",22)(154,"mat-label"),p(155,"Salud"),t(),c(156,"input",46),t(),r(157,"mat-form-field",22)(158,"mat-label"),p(159,"Pensi\xF3n"),t(),c(160,"input",47),t()(),r(161,"div",21)(162,"mat-form-field",22)(163,"mat-label"),p(164,"Nivel de riesgo"),t(),r(165,"mat-select",48),f(166,Ct,2,1,"ng-container",28),E(167,"async"),t()(),r(168,"mat-form-field",22)(169,"mat-label"),p(170,"Capacidad de endeudamiento"),t(),c(171,"input",49),t()()(),r(172,"div")(173,"p",16),p(174,"Informaci\xF3n bancaria"),t(),r(175,"div",21)(176,"mat-form-field",22)(177,"mat-label"),p(178,"Tipo de cuenta"),t(),r(179,"mat-select",50),f(180,Et,2,1,"ng-container",28),E(181,"async"),t()()(),r(182,"div",21)(183,"mat-form-field",22)(184,"mat-label"),p(185,"Bancos"),t(),r(186,"mat-select",51),f(187,yt,2,1,"ng-container",28),E(188,"async"),t()(),r(189,"mat-form-field",22)(190,"mat-label"),p(191,"N\xFAmero de cuenta bancaria"),t(),c(192,"input",52),t()()()(),r(193,"div",53)(194,"button",54),I("click",function(){return M(d),k(l.closeDialog())}),r(195,"span"),p(196," Cancelar "),t()(),r(197,"button",55),I("click",function(){return M(d),k(l.onSave())}),r(198,"span"),p(199," Guardar "),t()()()()()()}if(o&2){let d=A(13),g=A(65),h=A(122);a(3),R(" ",l._matData.edit?"Actualizar trabajador":"Agregar trabajador"," "),a(),n("formGroup",l.form),a(3),n("svgIcon","heroicons_outline:camera"),a(4),n("ngIf",l.form.get("foto").value)("ngIfElse",d),a(9),R(" Estado ",l.form.get("estado").value?"Activo":"Inactivo"," "),a(),n("color","primary")("formControlName","estado"),a(6),n("formControlName","primerNombre"),a(4),n("formControlName","segundoNombre"),a(5),n("formControlName","primerApellido"),a(4),n("formControlName","segundoApellido"),a(5),n("formControlName","idTipoDoc"),a(),n("ngIf",b(47,56,l.tiposDocumentos$)),a(5),n("formControlName","numDoc"),a(5),n("formControlName","idGenero"),a(),n("ngIf",b(58,58,l.generos$)),a(5),n("matDatepicker",g)("formControlName","fechaNacimiento"),a(),n("for",g),a(10),n("formControlName","idDepartamento"),a(2),n("ngIf",b(76,60,l.departamentos$)),a(5),n("formControlName","idMunicipio"),a(),n("ngIf",b(82,62,l.municipios$)),a(6),n("formControlName","direccion"),a(4),n("formControlName","telefono"),a(5),n("formControlName","telefono2"),a(4),n("formControlName","correo"),a(8),n("formControlName","idSubEmpresa"),a(),n("ngIf",b(110,64,l.empresasClientes$)),a(5),n("formControlName","cargo"),a(5),n("matDatepicker",h)("formControlName","fechaInicioContrato"),a(),n("for",h),a(3),n("ngIf",l.form.get("estado").value==!1),a(5),n("formControlName","idTipoContrato"),a(),n("ngIf",b(130,66,l.tipoContratos$)),a(6),n("formControlName","salarioBase"),a(4),n("formControlName","otroIngreso"),a(5),n("readonly",!0)("formControlName","salarioDevengado"),a(5),n("formControlName","idDeduccionLegal")("disabled",!0),a(),n("ngIf",b(151,68,l.deduccion$)),a(6),n("readonly",!0),a(4),n("readonly",!0),a(5),n("formControlName","idNivelRiesgo"),a(),n("ngIf",b(167,70,l.riesgos$)),a(5),n("formControlName","capacidadEndeudamiento"),a(8),n("formControlName","idTipoCuenta"),a(),n("ngIf",b(181,72,l.tipoCuentas$)),a(6),n("formControlName","idBanco"),a(),n("ngIf",b(188,74,l.bancos$)),a(5),n("formControlName","numCuentaBancaria"),a(2),n("color","primary"),a(3),n("color","primary")}},dependencies:[Z,z,Y,Ee,Me,Fe,xe,De,Ie,Ne,Te,ue,ve,Ae,de,fe,Pe,Be,Oe,be,U,Le,ke],styles:[".custom-dialog-container{width:100%}@media (min-width: 1280px){  .custom-dialog-container{width:50%}}"]});let e=i;return e})();var Xe=(()=>{let i=class i{constructor(m,o,l){this._matDialog=m,this.estadoDatosService=o,this.empleadoService=l,this.data=[],this.columns=["Estado","Documento","Identificaci\xF3n","Nombre completo","Tel\xE9fono","Cargo"],this.columnPropertyMap={Estado:"estado",Documento:"nombreTipoDocumento",Identificaci\u00F3n:"numDoc","Nombre completo":"nombreCompleto",Tel\u00E9fono:"telefono",Cargo:"cargo"},this.buttons=[{label:"Edit",icon:"edit",action:d=>{console.log("Editing",d),this.selectedData=d,this.onEdit()}}]}onNew(){this._matDialog.open(ae,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}onEdit(){this._matDialog.open(ae,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}getEmpleados(){this.subcription$=this.empleadoService.getEmpleados().pipe(Q(m=>(m.data.forEach(o=>{o.estado?o.estado=te.ACTIVO:o.estado=te.INACTIVO}),m)),Q(m=>(m.data.forEach(o=>{o&&(o.nombreCompleto=o.primerNombre.concat(" ",o.segundoNombre?o.segundoNombre+" ":"",o.primerApellido," ",o.segundoApellido))}),m))).subscribe(m=>{this.data=m.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(o=>{o&&this.getEmpleados()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEmpleados(),this.listenGrid()}};i.\u0275fac=function(o){return new(o||i)(H(_e),H(J),H(q))},i.\u0275cmp=G({type:i,selectors:[["app-grid-empleados"]],standalone:!0,features:[L],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"mt-2","w-full","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold","sm:ml-4","sm:mt-0","sm:w-auto",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(o,l){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),p(3,"Trabajadores"),t(),r(4,"div",3)(5,"mat-form-field",4),c(6,"mat-icon",5)(7,"input",6),t(),r(8,"button",7),I("click",function(){return l.onNew()}),c(9,"mat-icon",8),r(10,"span",9),p(11,"Agregar"),t()()()(),r(12,"div",10)(13,"div",11),c(14,"app-custom-table",12),t()()()),o&2&&(a(5),n("subscriptSizing","dynamic"),a(),n("svgIcon","heroicons_solid:magnifying-glass"),a(),n("autocomplete","off")("placeholder","Buscar"),a(),n("color","primary"),a(),n("svgIcon","heroicons_outline:plus"),a(5),n("columns",l.columns)("displayedColumns",l.columns)("columnPropertyMap",l.columnPropertyMap)("data",l.data)("buttons",l.buttons))},dependencies:[$e,Z,z,U,Y]});let e=i;return e})();var xi=[{path:"",component:Xe}];export{xi as default};
