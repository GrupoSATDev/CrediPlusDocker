import{a as C}from"./chunk-HSSBFHFE.js";import{a as se,b as ne,c as me}from"./chunk-V7YY5USQ.js";import{a as le}from"./chunk-E27GYA5F.js";import{a as j}from"./chunk-6IEWE3OU.js";import{a as oe}from"./chunk-QE3E4OX7.js";import{a as A,b as re}from"./chunk-GD676RBR.js";import{a as y}from"./chunk-OFEOPKCC.js";import"./chunk-QYSIOB6Y.js";import"./chunk-ISHIQJYM.js";import{g as K}from"./chunk-CUGJBCL5.js";import{a as L,b as W,c as $}from"./chunk-3P4FUJJD.js";import"./chunk-4CCKGQO6.js";import{C as ae,G as x,b as Z,e as q,i as S,l as Q,p as U,q as X,u as Y,w as ee,x as te,z as ie}from"./chunk-7YVLRDAA.js";import{Q as z,R as B,ea as D,ja as J}from"./chunk-T34F2ICN.js";import"./chunk-XMIUBE2U.js";import"./chunk-XHZ6JD3E.js";import{j as F}from"./chunk-YH7HM3TK.js";import{Cb as o,Db as r,Eb as d,Ib as P,Ob as g,Xb as O,Yb as l,Za as a,_a as v,_b as R,dc as H,ec as b,fa as c,ka as h,q as V,rb as s,ua as I,va as k}from"./chunk-32HXX3OB.js";import{a as u,d as E}from"./chunk-NEB6MB4Y.js";var N=(()=>{let n=class n{constructor(){this.fb=c(ie),this.dialogRef=c(L),this.fuseService=c(K),this.estadosDatosService=c(y),this.toasService=c(re),this._matData=c(W),this.datePipe=c(F),this.tasasService=c(C)}ngOnInit(){this.createForm();let t=this._matData;if(t.edit){let e=t.data;this.form.patchValue(e)}}onSave(){if(this.form.valid)if(this._matData.edit){let e=this.form.getRawValue(),{porcentaje:m,vigencia:f}=e,M=E(e,["porcentaje","vigencia"]),T=this.datePipe.transform(f,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),w=u({vigencia:T,porcentaje:Number(m)},M);this.fuseService.open(u({},A)).afterClosed().subscribe(_=>{_==="confirmed"?this.tasasService.putTasas(w).subscribe(G=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let t=this.form.getRawValue(),{porcentaje:m,vigencia:f}=t,M=E(t,["porcentaje","vigencia"]),T=this.datePipe.transform(f,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),w=u({vigencia:T,porcentaje:Number(m)},M);this.fuseService.open(u({},A)).afterClosed().subscribe(_=>{_==="confirmed"?this.tasasService.postTasas(w).subscribe(G=>{console.log(G),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],porcentaje:[""],vigencia:[""],nombre:[""]})}closeDialog(){this.dialogRef.close()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=h({type:n,selectors:[["app-form-tasas"]],standalone:!0,features:[H([{provide:B,useClass:le},{provide:z,useValue:"en-GB"},F]),b],decls:27,vars:9,consts:[["picker",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["matInput","",3,"formControlName"],["matInput","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"]],template:function(e,i){if(e&1){let m=P();o(0,"div",1)(1,"div",2)(2,"div",3),l(3),r(),o(4,"form",4)(5,"mat-form-field",5)(6,"mat-label"),l(7,"Nombre"),r(),d(8,"input",6),r(),o(9,"mat-form-field",5)(10,"mat-label"),l(11,"Porcentaje %"),r(),d(12,"input",6),r(),o(13,"mat-form-field",5)(14,"mat-label"),l(15,"Vigencia"),r(),d(16,"input",7)(17,"mat-datepicker-toggle",8)(18,"mat-datepicker",null,0),r(),o(20,"div",9)(21,"button",10),g("click",function(){return I(m),k(i.closeDialog())}),o(22,"span"),l(23," Cancelar "),r()(),o(24,"button",11),g("click",function(){return I(m),k(i.onSave())}),o(25,"span"),l(26," Guardar "),r()()()()()()}if(e&2){let m=O(19);a(3),R(" ",i._matData.edit?"Actualizar tasa":"Agregar tasa"," "),a(),s("formGroup",i.form),a(4),s("formControlName","nombre"),a(4),s("formControlName","porcentaje"),a(4),s("matDatepicker",m)("formControlName","vigencia"),a(),s("for",m),a(4),s("color","primary"),a(3),s("color","primary")}},dependencies:[D,S,x,Z,ae,Y,Q,U,X,ee,te,se,ne,me,q]});let p=n;return p})();var ce=(()=>{let n=class n{constructor(t,e,i){this._matDialog=t,this.estadoDatosService=e,this.tasasService=i,this.data=[],this.columns=["Estado","Porcentaje %"],this.columnPropertyMap={Estado:"estado","Porcentaje %":"porcentaje"},this.buttons=[{label:"Edit",icon:"edit",action:m=>{console.log("Editing",m),this.selectedData=m,this.onEdit()}}]}onNew(){this._matDialog.open(N,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%"})}onEdit(){this._matDialog.open(N,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getTasas(){this.subcription$=this.tasasService.getTass().pipe(V(t=>(t.data.forEach(e=>{e.estado?e.estado=j.ACTIVO:e.estado=j.INACTIVO}),t))).subscribe(t=>{this.data=t.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{e&&this.getTasas()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getTasas(),this.listenGrid()}};n.\u0275fac=function(e){return new(e||n)(v($),v(y),v(C))},n.\u0275cmp=h({type:n,selectors:[["app-grid-tasas"]],standalone:!0,features:[b],decls:15,vars:10,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","rounded-lg","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Tasas de interes"),r(),o(4,"div",3)(5,"mat-form-field",4),d(6,"mat-icon",5)(7,"input",6),r(),o(8,"button",7),g("click",function(){return i.onNew()}),d(9,"mat-icon",8),o(10,"span",9),l(11,"Agregar"),r()()()(),o(12,"div",10)(13,"div",11),d(14,"app-custom-table",12),r()()()),e&2&&(a(5),s("subscriptSizing","dynamic"),a(),s("svgIcon","heroicons_solid:magnifying-glass"),a(),s("autocomplete","off")("placeholder","Buscar"),a(2),s("svgIcon","heroicons_outline:plus"),a(5),s("columns",i.columns)("displayedColumns",i.columns)("columnPropertyMap",i.columnPropertyMap)("data",i.data)("buttons",i.buttons))},dependencies:[oe,D,S,J,x]});let p=n;return p})();var $e=[{path:"",component:ce}];export{$e as default};
