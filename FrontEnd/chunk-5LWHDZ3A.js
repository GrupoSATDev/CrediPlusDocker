import{a as ut}from"./chunk-TFS3S5A4.js";import{a as rt}from"./chunk-MVFC6UM3.js";import{a as nt}from"./chunk-EL2TLRXY.js";import{a as st,b as lt,d as ct}from"./chunk-33RTLPEQ.js";import{b as ft}from"./chunk-PEZYCTDT.js";import{a as dt,b as pt,c as mt}from"./chunk-TRMRYH6J.js";import{a as ue}from"./chunk-GFRFA6UA.js";import{a as at}from"./chunk-P6TZ4QG2.js";import{a as tt,b as it,c as ot}from"./chunk-QODY67HI.js";import{a as fe,b as ve}from"./chunk-SY7XYXPC.js";import{a as G}from"./chunk-6IEWE3OU.js";import{a as be}from"./chunk-TKUQ2GK7.js";import{a as et}from"./chunk-3CZSUSTM.js";import{a as ce}from"./chunk-BP3ZUNQJ.js";import{a as me}from"./chunk-4WJQLHI3.js";import{a as $}from"./chunk-LDCTOPX4.js";import{a as Xe}from"./chunk-PVGNXBQP.js";import"./chunk-NWLCDP4D.js";import{g as j}from"./chunk-ZHUIBFOH.js";import{a as je,b as Be,c as Re,d as $e}from"./chunk-J6ZY6K5Q.js";import{h as ae}from"./chunk-VY5HLTY4.js";import{a as We}from"./chunk-LTBDBK5Q.js";import"./chunk-2SMSIQXB.js";import{B,C as pe,G as R,b as re,c as Ge,e as Le,i as O,l as le,n as E,p as de,q as ze,s as Ue,u as Ye,v as Ze,w as Qe,x as Je,z as Ke}from"./chunk-SXAYB37M.js";import{$ as Oe,Q as ie,R as oe,ea as ne,fa as se,ja as A,k as Ce}from"./chunk-4L5SMXVA.js";import{a as He}from"./chunk-4EUIMV7R.js";import"./chunk-X53G34JD.js";import{a as qe}from"./chunk-DGQEWR53.js";import{b as ee,d as P,e as te}from"./chunk-Y3HKMEWK.js";import{e as W,f as X,g as D,i as Ve,j as h,m as _,s as Pe}from"./chunk-X7QBE67O.js";import{$b as V,Ab as Ae,Bb as Fe,Cb as Te,Db as t,Eb as o,Fb as f,Gb as x,Hb as g,Jb as Q,Pb as N,Rb as v,Sb as Me,Tb as H,Y as U,Yb as he,Zb as r,_a as a,_b as c,aa as we,bc as J,fa as ge,fc as w,ga as m,gc as S,hc as K,jc as ke,kc as Ne,la as C,oc as b,pc as y,q as M,qb as u,qc as I,sb as p,ua as Ie,va as Y,wa as Z,wb as De,zb as k}from"./chunk-UANZ7CBN.js";import{a as q,d as Ee}from"./chunk-NEB6MB4Y.js";var L=(()=>{let n=class n{constructor(s,l){this._http=s,this.appSettings=l}getCreditos(s){return this._http.get(`${this.appSettings.creditos.url.base}/${s}`)}getCredito(s){return this._http.get(`${this.appSettings.creditos.url.base}/${s}`)}putCredito(s){let l=s.id;return delete s.id,this._http.put(`${this.appSettings.creditos.url.base}/${l}`,s)}};n.\u0275fac=function(l){return new(l||n)(ge(Pe),ge(qe))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var F=function(e){return e.EN_PROCESO="EnProceso",e.BLOQUEADO="Bloqueado",e.VENCIDO="Vencido",e.EN_REVISION="EnRevision",e.CERRADO="Cerrado",e.APROBADO="Aprobado",e}(F||{}),Se=function(e){return e.APROBADO="e626ea69-e915-5462-be9a-905326714782",e.RECHAZADA="",e}(Se||{});function Et(e,n){if(e&1&&(x(0),f(1,"app-custom-table",17),g()),e&2){let i=v(2);a(),p("columns",i.columns)("displayedColumns",i.columns)("columnPropertyMap",i.columnPropertyMap)("data",i.data)("buttons",i.buttons)}}function wt(e,n){if(e&1&&u(0,Et,2,5,"ng-container",16),e&2){let i=v();p("ngIf",i.data.length)}}function It(e,n){if(e&1&&(x(0),f(1,"app-custom-table",17),g()),e&2){let i=v(2);a(),p("columns",i.columnsAprobadas)("displayedColumns",i.columnsAprobadas)("columnPropertyMap",i.columnPropertyAprobadas)("data",i.data)("buttons",i.buttonsView)}}function Dt(e,n){if(e&1&&u(0,It,2,5,"ng-container",16),e&2){let i=v();p("ngIf",i.data.length)}}function At(e,n){if(e&1&&(x(0),f(1,"app-custom-table",17),g()),e&2){let i=v(2);a(),p("columns",i.columnsAprobadas)("displayedColumns",i.columnsAprobadas)("columnPropertyMap",i.columnPropertyAprobadas)("data",i.data)("buttons",i.buttons)}}function Ft(e,n){if(e&1&&u(0,At,2,5,"ng-container",16),e&2){let i=v();p("ngIf",i.data.length)}}function Tt(e,n){if(e&1&&(x(0),f(1,"app-custom-table",17),g()),e&2){let i=v(2);a(),p("columns",i.columnsAprobadas)("displayedColumns",i.columnsAprobadas)("columnPropertyMap",i.columnPropertyAprobadas)("data",i.data)("buttons",i.buttons)}}function Mt(e,n){if(e&1&&u(0,Tt,2,5,"ng-container",16),e&2){let i=v();p("ngIf",i.data.length)}}var vt=(()=>{let n=class n{constructor(){this.datePipe=m(h),this.router=m(P),this.estadoDatosService=m($),this.creditoService=m(L),this.selectedTab=F.EN_REVISION,this.currencyPipe=m(_),this.data=[],this.columns=["Fecha de solicitud","Solicitante","Cupo solicitado","Empresa","Estado"],this.columnsAprobadas=["Fecha de aprobaci\xF3n","Solicitante","Cupo aprobado","Empresa","Estado"],this.columnPropertyMap={"Fecha de solicitud":"fechaCreacion",Solicitante:"nombreTrabajador","Cupo solicitado":"cupoSolicitado",Empresa:"nombreEmpresaMaestra",Estado:"nombreEstadoCredito"},this.columnPropertyAprobadas={"Fecha de aprobaci\xF3n":"fechaAprobacion",Solicitante:"nombreTrabajador","Cupo aprobado":"cupoAprobado",Empresa:"nombreEmpresaMaestra",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:s=>{console.log("Approve",s),this.selectedData=s,this.router.navigate(["pages/gestion-creditos/creditos/detalle",this.selectedData.id])}}],this.buttonsView=[{label:"View",icon:"visibility",action:s=>{console.log("Approve",s),this.selectedData=s,this.router.navigate(["pages/gestion-creditos/creditos/view-detalle",this.selectedData.id])}}],this.tabChanged=s=>{console.log("tabChangeEvent => ",s),console.log("index => ",s.index),this.selectedTab=s.index==0?F.EN_REVISION:s.index==1?F.APROBADO:s.index==2?F.VENCIDO:s.index==3?F.BLOQUEADO:F.EN_REVISION,this.getCreditos(this.selectedTab)}}getCreditos(s){this.subcription$=this.creditoService.getCreditos(s).pipe(M(l=>(l.data.forEach(d=>{d.estado?d.estado=G.ACTIVO:d.estado=G.INACTIVO}),l)),M(l=>(l.data.forEach(d=>{d.fechaCreacion=this.datePipe.transform(d.fechaCreacion,"dd/MM/yyyy"),d.fechaAprobacion=this.datePipe.transform(d.fechaAprobacion,"dd/MM/yyyy"),d.cupoAprobado=this.currencyPipe.transform(d.cupoAprobado,"USD","symbol","1.2-2")}),l))).subscribe(l=>{l?this.data=l.data:this.data=[]},l=>{this.data=[]})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(l=>{l&&this.getCreditos(this.selectedTab)})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getCreditos(this.selectedTab),this.listenGrid()}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=C({type:n,selectors:[["app-grid-creditos"]],standalone:!0,features:[w([h,_]),S],decls:20,vars:5,consts:[["tabGroup",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],["mat-stretch-tabs","false",1,"sm:px-2",3,"selectedTabChange","animationDuration"],["label","En revisi\xF3n"],["matTabContent",""],["label","Aprobado"],["label","Vencido"],["label","Bloqueado"],[4,"ngIf"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(l,d){if(l&1){let T=Q();t(0,"div",1)(1,"div",2)(2,"div",3),r(3,"Cr\xE9ditos"),o(),t(4,"div",4)(5,"mat-form-field",5),f(6,"mat-icon",6)(7,"input",7),o()()(),t(8,"div",8)(9,"div",9)(10,"mat-tab-group",10,0),N("selectedTabChange",function(xe){return Y(T),Z(d.tabChanged(xe))}),t(12,"mat-tab",11),u(13,wt,1,1,"ng-template",12),o(),t(14,"mat-tab",13),u(15,Dt,1,1,"ng-template",12),o(),t(16,"mat-tab",14),u(17,Ft,1,1,"ng-template",12),o(),t(18,"mat-tab",15),u(19,Mt,1,1,"ng-template",12),o()()()()()}l&2&&(a(5),p("subscriptSizing","dynamic"),a(),p("svgIcon","heroicons_solid:magnifying-glass"),a(),p("autocomplete","off")("placeholder","Buscar"),a(3),p("animationDuration","500"))},dependencies:[et,O,A,R,pt,dt,mt,D]});let e=n;return e})();var Nt=()=>["/pages/gestion-creditos/creditos"];function Vt(e,n){if(e&1&&(t(0,"mat-option",32),r(1),o()),e&2){let i=n.$implicit;p("value",i.id),a(),c(i.nombre)}}function Pt(e,n){if(e&1&&(x(0),u(1,Vt,2,2,"mat-option",31),g()),e&2){let i=n.ngIf;a(),p("ngForOf",i.data)}}function Ot(e,n){if(e&1&&(t(0,"mat-option",32),r(1),o()),e&2){let i=n.$implicit;p("value",i.id),a(),c(i.detalleInversion+" - "+i.rubroInversion)}}function jt(e,n){if(e&1&&(x(0),u(1,Ot,2,2,"mat-option",31),g()),e&2){let i=n.ngIf;a(),p("ngForOf",i.data)}}function Bt(e,n){if(e&1&&(t(0,"mat-form-field",18)(1,"mat-label"),r(2,"Tasa de interes"),o(),t(3,"mat-select",33)(4,"mat-option",32),r(5),o()()()),e&2){let i=n.$implicit;a(3),p("formControlName","idTasaInteres"),a(),p("value",i.id),a(),c(i.porcentaje)}}function Rt(e,n){e&1&&Fe(0,Bt,6,3,"mat-form-field",18,Ae),e&2&&Te(n.data)}function $t(e,n){e&1&&(t(0,"div",22)(1,"fuse-alert",34)(2,"span",35),r(3,"Informaci\xF3n"),o(),r(4," No hay tasas de inter\xE9s disponibles, por favor comuniquese con el administrador. "),o()()),e&2&&(a(),p("type","info")("appearance","outline"))}function Gt(e,n){if(e&1){let i=Q();t(0,"div",10)(1,"div",11)(2,"div")(3,"h3",12),r(4),o(),t(5,"p",13),r(6,"Identificaci\xF3n: "),t(7,"span",14),r(8),o()(),t(9,"p",13),r(10,"Empresa: "),t(11,"span",14),r(12),o()(),t(13,"p",15),r(14,"Cargo: "),t(15,"span",14),r(16),o()(),t(17,"p",13),r(18,"Correo: "),t(19,"span",14),r(20),o()(),t(21,"p",13),r(22,"Direcci\xF3n: "),t(23,"span",14),r(24),o()(),t(25,"p",13),r(26,"Tel\xE9fono: "),t(27,"span",14),r(28),o()()(),t(29,"div")(30,"p",13),r(31,"N\xFAmero de cr\xE9dito: "),t(32,"span",14),r(33),o()(),t(34,"p",13),r(35,"Cupo solicitado: "),t(36,"span",14),r(37),b(38,"currency"),o()(),t(39,"p",13),r(40,"Fecha de Solicitud: "),t(41,"span",14),r(42),b(43,"date"),o()()()(),f(44,"hr"),t(45,"div")(46,"p",16),r(47,"Informaci\xF3n de Cr\xE9dito"),o(),t(48,"form",17)(49,"mat-form-field",18)(50,"mat-label"),r(51,"Tipo de pago"),o(),t(52,"mat-select",19),u(53,Pt,2,1,"ng-container",20),b(54,"async"),o()(),t(55,"mat-form-field",18)(56,"mat-label"),r(57,"Capital de inversi\xF3n"),o(),t(58,"mat-select",21),u(59,jt,2,1,"ng-container",20),b(60,"async"),o()(),u(61,Rt,2,0),b(62,"async"),u(63,$t,5,2,"div",22),t(64,"mat-form-field",18)(65,"mat-label"),r(66,"Cantidad de cuotas"),o(),f(67,"input",23),o(),t(68,"mat-form-field",18)(69,"mat-label"),r(70,"Cupo sugerido"),o(),f(71,"input",24),o(),t(72,"mat-form-field",18)(73,"mat-label"),r(74,"Cupo aprobado"),o(),f(75,"input",25),o(),t(76,"mat-form-field",18)(77,"mat-label"),r(78,"Fecha de vencimiento"),o(),f(79,"input",26)(80,"mat-datepicker-toggle",27)(81,"mat-datepicker",null,0),o(),t(83,"mat-form-field",18)(84,"mat-label"),r(85,"Fecha de corte"),o(),f(86,"input",26)(87,"mat-datepicker-toggle",27)(88,"mat-datepicker",null,1),o()()(),x(90),t(91,"div",28)(92,"button",29),r(93," Rechazar "),o(),t(94,"button",30),N("click",function(){Y(i);let l=v();return Z(l.onSave())}),r(95," Aprobar "),o()(),g(),o()}if(e&2){let i,s=he(82),l=he(89),d=v();a(4),J("",d.items.trabajador.primerNombre," ",d.items.trabajador.segundoNombre," ",d.items.trabajador.primerApellido," ",d.items.trabajador.segundoApellido," "),a(4),c(d.items.trabajador.numDoc),a(4),c(d.items.nombreSubEmpresa),a(4),c(d.items.trabajador.cargo),a(4),c(d.items.trabajador.correo),a(4),c(d.items.trabajador.direccion),a(4),c(d.items.trabajador.telefono),a(5),c(d.items.numCredito),a(4),c(y(38,30,d.items.cupoSolicitado)),a(5),c(I(43,32,d.items.fechaCreacion,"dd/MM/yyyy")),a(6),p("formGroup",d.form),a(4),p("formControlName","idTipoPago"),a(),p("ngIf",y(54,35,d.tipoPagos$)),a(5),p("formControlName","idCapitalInversion"),a(),p("ngIf",y(60,37,d.capital$)),a(2),k((i=y(62,39,d.tasas$))?61:63,i),a(6),p("formControlName","cantCuotas"),a(4),p("readonly",!0),a(4),p("formControlName","cupoAprobado"),a(4),p("matDatepicker",s)("formControlName","fechaVencimiento"),a(),p("for",s),a(6),p("matDatepicker",l)("formControlName","fechaCorte"),a(),p("for",l),a(5),p("disabled",d.form.invalid),a(2),p("disabled",d.form.invalid)}}var Lt={validation:!1},bt=(()=>{let n=class n{constructor(){this.toasService=m(ce),this.fuseService=m(j),this.estadosDatosService=m($),this.activatedRoute=m(ee),this.creditoService=m(L),this.router=m(P),this.tiposPagos=m(rt),this.capitalInversion=m(at),this.estadoCreditoService=m(ut),this.tasaService=m(nt),this.fb=m(Ke),this.datePipe=m(h),this.swalService=m(be),this.parametroTasa="Activas",this.tipoPagos$=this.tiposPagos.getTiposPagos().pipe(U(s=>{let l=s.data;l&&this.form.get("idTipoPago").setValue(l[0].id)})),this.capital$=this.capitalInversion.getCapitales().pipe(U(s=>{let l=s.data;l&&this.form.get("idCapitalInversion").setValue(l[0].id)})),this.estadoCredito=[],this.tasas$=this.tasaService.getTasasParametros(this.parametroTasa).pipe(U(s=>{let l=s.data;l&&this.form.get("idTasaInteres").setValue(l[0].id)})),this.idCredito="",this.CodigosEstadosSolicitudes=ct}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getCredito(this.idCredito),this.getEstadoCredito(),this.createForm()}getCredito(s){this.subcription$=this.creditoService.getCredito(s).subscribe(l=>{this.items=l.data})}getEstadoCredito(){this.subcription$=this.estadoCreditoService.getEstadoCreditos().pipe(M(s=>(s.data.forEach(l=>{l.estado?l.estado=G.ACTIVO:l.estado=G.INACTIVO}),s))).subscribe(s=>{this.estadoCredito=s.data})}onSave(){if(this.form.valid){let s=this.form.getRawValue(),{fechaVencimiento:d,fechaCorte:T,cupoAprobado:ye}=s,xe=Ee(s,["fechaVencimiento","fechaCorte","cupoAprobado"]),Ct=this.datePipe.transform(d,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),St=this.datePipe.transform(T,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),_e=q({fechaVencimiento:Ct,fechaCorte:St,idEstadoCredito:Se.APROBADO,cupoAprobado:Number(ye),id:this.idCredito},xe);console.log(_e),this.fuseService.open(q({},me)).afterClosed().subscribe(yt=>{yt==="confirmed"&&this.creditoService.putCredito(_e).subscribe(_t=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.router.navigate(["/pages/gestion-creditos/creditos"])},_t=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})})})}}createForm(){this.form=this.fb.group({cupoAprobado:["",[E.required]],idTipoPago:[""],idCapitalInversion:[""],idTasaInteres:["",[E.required]],fechaVencimiento:["",[E.required]],fechaCorte:["",[E.required]],cantCuotas:["",[E.required]]})}ngOnDestroy(){this.subcription$.unsubscribe()}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=C({type:n,selectors:[["app-form-detalle"]],standalone:!0,features:[w([{provide:oe,useClass:ue},{provide:ie,useValue:"en-GB"},h,fe(Lt)]),S],decls:10,vars:4,consts:[["picker",""],["fechaCorte",""],["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","print:p-0","w-full"],[1,"bg-card","shadow","print:bg-transparent","print:p-0","print:shadow-none","rounded-2xl","mx-auto","overflow-hidden","w-full","max-w-3xl"],[1,"bg-crediblue-50","px-6","py-4","flex","items-center","justify-between"],["mat-button","",1,"flex","items-center",3,"routerLink"],[1,"text-white",3,"svgIcon"],[1,"text-lg","sm:text-xl","font-bold","text-white"],["class","p-4 sm:p-6",4,"ngIf"],[1,"p-4","sm:p-6"],[1,"mb-4","grid","grid-cols-1","md:grid-cols-2","gap-4","justify-items-stretch","lg:justify-items-center"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-800"],[1,"font-medium","text-gray-600"],[1,"text-md","text-secondary"],[1,"text-gray-600","font-semibold"],[1,"text-lg","text-gray-600","font-bold","mb-10"],[3,"formGroup"],["floatLabel","always",1,"w-full"],[3,"formControlName"],[4,"ngIf"],["placeholder","Capital de inversion",3,"formControlName"],[1,"inline-block","mb-4","print:p-0","w-full"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Cantidad de cuotas",3,"formControlName"],["matInput","","value","1000000","mask","separator.0","thousandSeparator",".","placeholder","cupo sugerido",3,"readonly"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Cupo aprobado",3,"formControlName"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],[1,"flex","flex-wrap","justify-end","items-center","mt-7","gap-2.5"],["mat-flat-button","",1,"lg:w-auto","w-full","bg-crediorange-100","text-white","font-semibold","py-2","px-4","rounded-lg","transition","duration-200",3,"disabled"],["mat-flat-button","",1,"lg:w-auto","w-full","bg-crediblue-50","hover:bg-crediblue-100","text-white","font-semibold","py-2","px-4","rounded-lg","transition","duration-200",3,"click","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["placeholder","Tasa de interes",3,"formControlName"],[3,"type","appearance"],["fuseAlertTitle",""]],template:function(l,d){l&1&&(t(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div")(5,"a",6),f(6,"mat-icon",7),o()(),t(7,"h2",8),r(8,"Detalle de Cr\xE9dito"),o()(),u(9,Gt,96,41,"div",9),o()()()),l&2&&(a(5),p("routerLink",K(3,Nt)),a(),p("svgIcon","heroicons_outline:arrow-long-left"),a(3),p("ngIf",d.items))},dependencies:[ae,se,A,te,D,_,h,ne,Ve,O,re,Oe,Xe,X,B,Ye,le,de,ze,R,tt,it,ot,Le,pe,Qe,Je,ve,We]});let e=n;return e})();var qt=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],Ht=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];function zt(e,n){e&1&&(t(0,"div",0),H(1),o(),t(2,"div",1),H(3,1),o())}function Ut(e,n){e&1&&(t(0,"div",2),H(1,3),o()),e&2&&p("@expandCollapse",void 0)}function Yt(e,n){if(e&1&&(H(0,2),u(1,Ut,2,1,"div",2)),e&2){let i=v();a(),k(i.expanded?1:-1)}}var xt=(()=>{let n=class n{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&this.face==="back","fuse-card-face-front":this.flippable&&this.face==="front","fuse-card-flippable":this.flippable}}ngOnChanges(s){"expanded"in s&&(this.expanded=Ce(s.expanded.currentValue)),"flippable"in s&&(this.flippable=Ce(s.flippable.currentValue))}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=C({type:n,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(l,d){l&2&&De(d.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[Ie,S],ngContentSelectors:Ht,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],[1,"fuse-card-expansion"]],template:function(l,d){l&1&&(Me(qt),u(0,zt,4,0)(1,Yt,2,1)),l&2&&(k(d.flippable?0:-1),a(),k(d.flippable?-1:1))},styles:[`fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}
`],encapsulation:2,data:{animation:He}});let e=n;return e})();var Zt=(e,n)=>({"bg-crediblue-50":e,"bg-credigray-100":n});function Qt(e,n){e&1&&(t(0,"mat-error"),r(1,"El valor es requerido!"),o())}function Jt(e,n){e&1&&(t(0,"mat-error"),r(1,"El valor ingresado no puede superar el cupo disponible!"),o())}var Kt={validation:!1},gt=(()=>{let n=class n{constructor(){this._matData=m(Be),this.swalService=m(be),this.tipoSolicitudService=m(lt),this.tipoSolicitud$=this.tipoSolicitudService.getTipos().pipe(M(s=>(this.idSolicitud=s.data[0].id,s))).subscribe(),this.cupo=new Ue(""),this.fuseService=m(j),this.solicitudService=m(st),this.dialogRef=m(je)}validarCampo(){this.cupoAvance=this._matData.data.cupoAprobado-this._matData.data.cupoAprobado*20/100,this.cupo.setValidators(E.compose([E.required,Wt(this.cupoAvance)])),this.cupo.updateValueAndValidity()}onSave(){let s={cupo:Number(this.cupo.value),idTipoSolicitud:this.idSolicitud};this.fuseService.open(q({},me)).afterClosed().subscribe(d=>{d==="confirmed"?this.solicitudService.postSolicitudes(s).subscribe(T=>{this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.closeDialog()},T=>{this.swalService.ToastAler({icon:"info",title:T.error.errorMenssages[0],timer:6e3})}):this.closeDialog()})}closeDialog(){this.dialogRef.close()}ngOnInit(){this.validarCampo()}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=C({type:n,selectors:[["app-dialog-confirm-desembolso"]],standalone:!0,features:[w([fe(Kt)]),S],decls:25,vars:17,consts:[[1,"relative","flex","h-full","w-full","flex-col"],[1,"flex","flex-auto","flex-col","items-center","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex","h-10","w-10","flex-0","items-center","justify-center","rounded-full","sm:mr-4","bg-blue-100","text-blue-600","dark:bg-blue-600","dark:text-blue-50"],[3,"svgIcon"],[1,"flex","flex-col","items-center","space-y-1","text-center","sm:mt-0","sm:items-start","sm:pr-8","sm:text-left"],[1,"text-xl","font-medium","leading-6"],[1,"text-secondary"],[1,"mt-4","flex","flex-col","items-center","space-y-1","text-center","sm:mt-0","sm:items-start","sm:text-left"],[1,"w-full"],["matInput","","thousandSeparator",".","placeholder","Valor solicitado",3,"formControl","mask"],[4,"ngIf"],[1,"flex","items-center","justify-center","space-x-3","bg-gray-50","py-4","dark:bg-black","dark:bg-opacity-10","sm:justify-end"],["mat-stroked-button","",1,"fuse-mat-button-large","bg-crediorange-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"matDialogClose"],["mat-flat-button","",1,"fuse-mat-button-large","hover:bg-crediblue-100","text-white","font-semibold","py-2","px-4","rounded-lg","transition","duration-200",3,"click","color","matDialogClose","ngClass","disabled"]],template:function(l,d){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),f(3,"mat-icon",3),o(),t(4,"div",4)(5,"div",5),r(6," Confirmacion "),o(),t(7,"div",6),r(8," Tu cupo disponible para avance es de "),t(9,"b"),r(10),b(11,"currency"),o(),r(12,", puedes solicitar un valor menor o igual a este. "),o()()(),t(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),r(16,"Valor"),o(),f(17,"input",9),u(18,Qt,2,0,"mat-error",10)(19,Jt,2,0,"mat-error",10),o()(),t(20,"div",11)(21,"button",12),r(22," Cancelar "),o(),t(23,"button",13),N("click",function(){return d.onSave()}),r(24," Confirmar "),o()()()),l&2&&(a(3),p("svgIcon","heroicons_solid:question-mark-circle"),a(7),c(I(11,11,d.cupoAvance,"USD")),a(7),p("formControl",d.cupo)("mask","separator.0"),a(),p("ngIf",d.cupo.touched&&d.cupo.hasError("required")),a(),p("ngIf",(d.cupo.touched||d.cupo.dirty)&&d.cupo.hasError("notEqual")),a(2),p("matDialogClose","cancelled"),a(2),p("color","primary")("matDialogClose","confirmed")("ngClass",ke(14,Zt,d.cupo.valid,d.cupo.invalid))("disabled",d.cupo.invalid))},dependencies:[B,le,de,ne,O,A,R,re,$e,pe,Ze,D,Ge,_,ve,W]});let e=n;return e})();function Wt(e){return n=>{let i=n.value;return console.log(e),i>e?{notEqual:!0}:null}}var Xt=()=>["/pages/gestion-creditos/creditos"],ei=(e,n,i)=>({"bg-green-600":e,"bg-yellow-600":n,"bg-red-600":i});function ti(e,n){e&1&&(t(0,"p",16),r(1,"Movimientos"),o())}function ii(e,n){if(e&1&&(x(0),t(1,"fuse-card",20)(2,"div",21)(3,"p",22),r(4),o(),t(5,"p",22),r(6),b(7,"date"),o()(),t(8,"div",21)(9,"p",22),r(10),o(),t(11,"p",23),r(12),b(13,"currency"),o()(),t(14,"div",21)(15,"p",22),r(16),o(),t(17,"p",22),r(18),o()(),t(19,"div",21)(20,"p",22),r(21),o()(),t(22,"div",24),f(23,"p",25),o()(),g()),e&2){let i=n.$implicit,s=v(3);a(4),c(i.nombreSubEmpresa),a(2),c(I(7,8,i.fechaCreacion,"dd/MM/yyyy")),a(4),V("Factura: ",i.numeroFactura,""),a(2),V("Valor: ",y(13,11,i.montoConsumo),""),a(4),V("Cuotas: ",i.cantidadCuotas,""),a(2),c(i.nombreEstadoCredito),a(3),V("Tipo: ",i.nombreTipoConsumo,""),a(2),p("ngClass",Ne(13,ei,i.idEstadoCredito==s.CodigosDetalleConsumo.APROBADA,i.idEstadoCredito==s.CodigosDetalleConsumo.EN_REVISION,i.idEstadoCredito==s.CodigosDetalleConsumo.RECHAZADA))}}function oi(e,n){if(e&1&&(t(0,"div",17)(1,"div",18),u(2,ii,24,17,"ng-container",19),o()()),e&2){let i=v(2);a(2),p("ngForOf",i.items.detalleConsumos)}}function ai(e,n){if(e&1&&(t(0,"div",8)(1,"div",9)(2,"div")(3,"h3",10),r(4),o(),t(5,"p",11),r(6,"Identificaci\xF3n: "),t(7,"span",12),r(8),o()(),t(9,"p",11),r(10,"Empresa: "),t(11,"span",12),r(12),o()(),t(13,"p",11),r(14,"Cargo: "),t(15,"span",12),r(16),o()(),t(17,"p",11),r(18,"Correo: "),t(19,"span",12),r(20),o()(),t(21,"p",11),r(22,"Direcci\xF3n: "),t(23,"span",12),r(24),o()(),t(25,"p",11),r(26,"Tel\xE9fono: "),t(27,"span",12),r(28),o()()(),t(29,"div")(30,"p",11),r(31,"N\xFAmero de cr\xE9dito: "),t(32,"span",12),r(33),o()(),t(34,"p",11),r(35,"Cupo aprobado: "),t(36,"span",12),r(37),b(38,"currency"),o()(),t(39,"p",11),r(40,"Tasa de interes: "),t(41,"span",12),r(42),o()(),t(43,"p",11),r(44,"Fecha de aprobaci\xF3n: "),t(45,"span",12),r(46),b(47,"date"),o()(),t(48,"p",11),r(49,"Fecha de vencimiento: "),t(50,"span",12),r(51),b(52,"date"),o()(),t(53,"p",11),r(54,"Cupo utilizado: "),t(55,"span",12),r(56),b(57,"currency"),o()(),t(58,"p",11),r(59,"Saldo disponible: "),t(60,"span",12),r(61),b(62,"currency"),o()()()(),f(63,"hr",13),u(64,ti,2,0,"p",14)(65,oi,3,1,"div",15),o()),e&2){let i=v();a(4),J("",i.items.trabajador.primerNombre," ",i.items.trabajador.segundoNombre," ",i.items.trabajador.primerApellido," ",i.items.trabajador.segundoApellido," "),a(4),c(i.items.trabajador.numDoc),a(4),c(i.items.nombreSubEmpresa),a(4),c(i.items.trabajador.cargo),a(4),c(i.items.trabajador.correo),a(4),c(i.items.trabajador.direccion),a(4),c(i.items.trabajador.telefono),a(5),c(i.items.numCredito),a(4),c(y(38,19,i.items.cupoAprobado)),a(5),V("",i.items.porcTasaInteres,"%"),a(4),c(I(47,21,i.items.fechaAprobacion,"dd/MM/yyyy")),a(5),c(I(52,24,i.items.fechaVencimiento,"dd/MM/yyyy")),a(5),c(y(57,27,i.items.cupoConsumido)),a(5),c(y(62,29,i.items.cupoDisponible)),a(3),p("ngIf",i.items.detalleConsumos),a(),p("ngIf",i.items.detalleConsumos)}}var ht=(()=>{let n=class n{constructor(){this.toasService=m(ce),this.fuseService=m(j),this.estadosDatosService=m($),this.activatedRoute=m(ee),this.creditoService=m(L),this.router=m(P),this.datePipe=m(h),this.data=[],this.capital=[],this.estadoCredito=[],this.tasas=[],this.idCredito="",this._matDialog=m(Re),this.CodigosDetalleConsumo=ft}ngOnDestroy(){this.subcription$.unsubscribe()}onSolicitud(){this._matDialog.open(gt,{data:{data:this.items},width:"30%",disableClose:!0})}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getCredito(this.idCredito)}getCredito(s){this.subcription$=this.creditoService.getCredito(s).subscribe(l=>{this.items=l.data})}};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=C({type:n,selectors:[["app-form-view-detalle"]],standalone:!0,features:[w([{provide:oe,useClass:ue},{provide:ie,useValue:"en-GB"},h]),S],decls:10,vars:4,consts:[["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-4","sm:p-8","print:p-0","w-full"],[1,"bg-card","shadow","print:bg-transparent","print:p-0","print:shadow-none","rounded-2xl","mx-auto","overflow-hidden","w-full","max-w-5xl"],[1,"bg-crediblue-50","px-6","py-4","flex","items-center","justify-between"],["mat-button","",1,"flex","items-center",3,"routerLink"],[1,"text-white",3,"svgIcon"],[1,"text-lg","sm:text-xl","font-bold","text-white"],["class","p-4 sm:p-6",4,"ngIf"],[1,"p-4","sm:p-6"],[1,"mb-4","grid","grid-cols-1","md:grid-cols-2","gap-4","justify-items-stretch","lg:justify-items-center"],[1,"text-lg","sm:text-xl","font-semibold","text-gray-800"],[1,"text-gray-600","font-bold"],[1,"text-gray-800"],[1,"my-4"],["class","text-lg text-black font-bold mb-6",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"text-lg","text-black","font-bold","mb-6"],[1,"mb-4"],[1,"flex","flex-wrap","gap-2.5","justify-center"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","p-4","rounded-2xl","shadow-lg","w-full","md:w-1/2","lg:w-1/3"],[1,"flex","justify-between"],[1,"text-gray-800","font-semibold"],[1,"text-gray-800","font-bold"],[1,"w-full","mt-2"],[1,"h-2.5","rounded-full",3,"ngClass"]],template:function(l,d){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),f(6,"mat-icon",5),o()(),t(7,"h2",6),r(8,"Detalle de Cr\xE9dito"),o()(),u(9,ai,66,31,"div",7),o()()()),l&2&&(a(5),p("routerLink",K(3,Xt)),a(),p("svgIcon","heroicons_outline:arrow-long-left"),a(3),p("ngIf",d.items))},dependencies:[ae,_,h,B,se,A,X,D,te,xt,W]});let e=n;return e})();var ta=[{path:"",component:vt},{path:"detalle/:id",component:bt},{path:"view-detalle/:id",component:ht}];export{ta as default};
