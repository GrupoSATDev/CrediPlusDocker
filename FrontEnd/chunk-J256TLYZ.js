import{a as G}from"./chunk-IM3AUN4N.js";import{a as d}from"./chunk-FAEUQIFQ.js";import{a as O,b as f}from"./chunk-P4PAYY2C.js";import{a as N}from"./chunk-DTORAJAR.js";import{a as B}from"./chunk-3R6HD5RM.js";import"./chunk-CJO6YW5P.js";import"./chunk-7YBFULQ5.js";import{g as A,h as U}from"./chunk-QVE5MGEQ.js";import{J as V,i as X}from"./chunk-4PVPKBBG.js";import"./chunk-YKJB7XET.js";import{h as k}from"./chunk-FUOI65R5.js";import{a as z}from"./chunk-73F67TFK.js";import"./chunk-XTYNXB3F.js";import"./chunk-PA2SJPJO.js";import{$a as g,Ad as j,Fb as c,Ka as n,Ob as _,Pb as E,Sb as F,bb as l,fe as R,ga as p,ib as T,ka as S,ke as L,mb as i,nb as s,ob as h,pc as P,q as C,vb as v,vc as D,xb as w,xc as I,yc as y,zd as M}from"./chunk-ODJKW74N.js";import{a as x}from"./chunk-NEB6MB4Y.js";var q=(a,r)=>({"bg-green-700":a,"bg-credigray-100":r});function H(a,r){if(a&1&&(i(0,"div",8)(1,"div",10),h(2,"app-custom-table",11),s()()),a&2){let m=w();n(2),l("columns",m.columns)("displayedColumns",m.columns)("columnPropertyMap",m.columnPropertyMap)("data",m.data)("searchTerm",m.searchTerm)}}function J(a,r){a&1&&(i(0,"div",9)(1,"div",12)(2,"fuse-alert",13)(3,"span",14),c(4,"Informaci\xF3n"),s(),c(5," No hay informaci\xF3n hasta el momento. "),s()()()),a&2&&(n(2),l("type","info")("appearance","outline"))}var $=(()=>{let r=class r{constructor(){this.searchTerm="",this.reportesService=p(G),this.datePipe=p(D),this.fuseService=p(A),this.currencyPipe=p(y),this.data=[],this.exportData=[],this.columns=["Fecha de desembolso","Trabajador","Identificaci\xF3n","Empresa","Cantidad cuota","Valor desembolso","Deuda","Deuda intereses","Valor cuota","Deuda costos"],this.columnPropertyMap={"Fecha de desembolso":"fechaDesembolso",Trabajador:"nombreTrabajador",Identificaci\u00F3n:"documentoTrabajador",Empresa:"nombreSubEmpresa","Cantidad cuota":"cantCuotas","Valor desembolso":"valorDesembolso",Deuda:"deudaTotal","Deuda intereses":"deudaIntereses","Valor cuota":"valorCuota","Deuda costos":"deudaCobroFijo"}}onSearch(o){let e=o.target;this.searchTerm=e.value.trim().toLowerCase()}ngOnInit(){this.loadDeudas()}loadDeudas(){this.reportesService.getReporteDeudas().pipe(C(o=>(o.data.forEach(e=>{e.fechaDesembolso=this.datePipe.transform(e.fechaDesembolso,"dd/MM/yyyy"),e.valorDesembolso=this.currencyPipe.transform(e.valorDesembolso,"USD","symbol","1.2-2"),e.deudaTotal=this.currencyPipe.transform(e.deudaTotal,"USD","symbol","1.2-2"),e.deudaIntereses=this.currencyPipe.transform(e.deudaIntereses,"USD","symbol","1.2-2"),e.valorCuota=this.currencyPipe.transform(e.valorCuota,"USD","symbol","1.2-2"),e.deudaCobroFijo=this.currencyPipe.transform(e.deudaCobroFijo,"USD","symbol","1.2-2")}),o))).subscribe(o=>{o.data?(this.data=o.data,this.convertDataExport(o.data)):this.data=[]})}exportToExcel(o){this.fuseService.open(x({},U)).afterClosed().subscribe(t=>{if(t==="confirmed"){let b=f.json_to_sheet(o),u=f.book_new();f.book_append_sheet(u,b,"Sheet1"),O(u,`Reporte de Deudas${this.datePipe.transform(new Date,"dd/MM/yyyy")}.xlsx`)}})}convertDataExport(o){let e=o.map(t=>({FechaDesembolso:t.fechaDesembolso,Trabajador:t.nombreTrabajador,Identificacion:t.documentoTrabajador,Empresa:t.nombreSubEmpresa,CantidadCuotas:t.cantCuotas,ValorDesembolso:d(t.valorDesembolso),Deuda:d(t.deudaTotal),DeudaIntereses:d(t.deudaIntereses),ValorCuota:d(t.valorCuota),DeudaCostos:d(t.deudaCobroFijo)}));this.exportData=e}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=S({type:r,selectors:[["app-reporte-deudas"]],standalone:!0,features:[_([{provide:j,useClass:N},{provide:M,useValue:"en-GB"},D,y,I]),E],decls:13,vars:11,consts:[["cdkScrollable","",1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],["mat-flat-button","",1,"w-full","mt-2","sm:mt-0","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color","ngClass","disabled"],[1,"flex","flex-auto","overflow-hidden"],[1,"inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","searchTerm"],[1,"inline-block","p-4","sm:p-2","print:p-0","w-full"],[3,"type","appearance"],["fuseAlertTitle",""]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),c(3,"Reporte de deudas"),s(),i(4,"div",3)(5,"mat-form-field",4),h(6,"mat-icon",5),i(7,"input",6),v("input",function(u){return t.onSearch(u)}),s()(),i(8,"button",7),v("click",function(){return t.exportToExcel(t.exportData)}),i(9,"span"),c(10," Exportar "),s()()()(),g(11,H,3,5,"div",8)(12,J,6,2,"div",9),s()),e&2&&(n(5),l("subscriptSizing","dynamic"),n(),l("svgIcon","heroicons_solid:magnifying-glass"),n(),l("autocomplete","off")("placeholder","Buscar"),n(),l("color","primary")("ngClass",F(8,q,t.exportData.length,!t.exportData.length))("disabled",!t.exportData.length),n(3),T(t.data.length>0?11:12))},dependencies:[k,X,L,V,R,P,B,z]});let a=r;return a})();var ve=[{path:"",component:$}];export{ve as default};
