import{a as ae,b as x,c as re}from"./chunk-NNVQFJQ3.js";import{a as ie,b as oe,c as D}from"./chunk-IBPAYEIF.js";import{g as J}from"./chunk-OZXV5H6X.js";import{t as j,u as W,v as L}from"./chunk-5D6W3F3G.js";import{A as te,D as y,a as H,h as E,k as K,o as Q,p as U,s as X,u as Y,v as Z,x as ee}from"./chunk-SSGJEUMN.js";import{U as P,Z as C,ca as q}from"./chunk-HX54Y7AS.js";import"./chunk-LWAHI2AJ.js";import"./chunk-ZFTSXRIF.js";import{f as R,g as O,i as $,l as B}from"./chunk-4MKAVAKB.js";import{Cb as o,Db as t,Eb as p,Fb as F,Gb as w,Ib as A,Ob as u,Yb as l,Za as e,Zb as I,_a as S,_b as N,ac as _,fa as f,ic as T,jc as G,ka as v,pb as g,rb as i,ua as h,va as b}from"./chunk-E724JXGB.js";import{a as M}from"./chunk-NEB6MB4Y.js";var k={title:"Guardar",message:"\xBFEst\xE1 seguro de guardar el registro?",icon:{show:!0,name:"heroicons_solid:question-mark-circle",color:"info"},actions:{confirm:{show:!0,label:"Guardar",color:"primary"},cancel:{show:!0,label:"Cancelar"}}};function le(n,a){if(n&1&&(o(0,"mat-option",15),l(1),t()),n&2){let d=a.$implicit;i("value",d.id),e(),I(d.nombre)}}function ce(n,a){if(n&1&&(F(0),g(1,le,2,2,"mat-option",14),w()),n&2){let d=a.ngIf;e(),i("ngForOf",d.data)}}function pe(n,a){if(n&1&&(o(0,"mat-option",15),l(1),t()),n&2){let d=a.$implicit;i("value",d.id),e(),I(d.nombre)}}function de(n,a){if(n&1&&(F(0),g(1,pe,2,2,"mat-option",14),w()),n&2){let d=a.ngIf;e(),i("ngForOf",d.data)}}var V=(()=>{let a=class a{constructor(){this.fb=f(ee),this._locacionService=f(ae),this.empresasService=f(x),this.dialogRef=f(j),this.fuseService=f(J),this.estadosDatosService=f(D),this.toasService=f(re),this.departamentos$=this._locacionService.getDepartamentos(),this._matData=f(W)}getMunicipios(m){let s=m.value;this.municipios$=this._locacionService.getMunicipio(s)}ngOnInit(){this.createForm();let m=this._matData;if(console.log(m),m.edit){let s=m.data;this.form.patchValue(s)}}createForm(){this.form=this.fb.group({id:[null],nit:[""],razonSocial:[""],correo:[""],telefono:[""],direccion:[""],idMunicipio:[""]})}onSave(){if(this.form.valid)if(this._matData.edit){let m=this.form.getRawValue();this.fuseService.open(M({},k)).afterClosed().subscribe(r=>{r==="confirmed"?this.empresasService.putEmpresa(m).subscribe(c=>{console.log(c),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let m=this.form.getRawValue();this.fuseService.open(M({},k)).afterClosed().subscribe(r=>{r==="confirmed"?this.empresasService.postEmpresa(m).subscribe(c=>{console.log(c),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}closeDialog(){this.dialogRef.close()}};a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=v({type:a,selectors:[["app-form-empresas"]],standalone:!0,features:[_],decls:45,vars:17,consts:[["data",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:w-96","max-w-96","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"w-full"],["id","nit","matInput","",3,"formControlName"],["matInput","",3,"formControlName"],[3,"selectionChange"],[4,"ngIf"],[3,"formControlName"],[1,"flex","flex-wrap","justify-between"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(s,r){if(s&1){let c=A();o(0,"div",1)(1,"div",2)(2,"div",3),l(3),t(),o(4,"form",4)(5,"mat-form-field",5)(6,"mat-label"),l(7,"Nit"),t(),p(8,"input",6),t(),o(9,"mat-form-field",5)(10,"mat-label"),l(11,"Raz\xF3n social"),t(),p(12,"input",7),t(),o(13,"mat-form-field",5)(14,"mat-label"),l(15,"Correo"),t(),p(16,"input",7),t(),o(17,"mat-form-field",5)(18,"mat-label"),l(19,"Tel\xE9fono"),t(),p(20,"input",7),t(),o(21,"mat-form-field",5)(22,"mat-label"),l(23,"Departamentos"),t(),o(24,"mat-select",8,0),u("selectionChange",function(se){return h(c),b(r.getMunicipios(se))}),g(26,ce,2,1,"ng-container",9),T(27,"async"),t()(),o(28,"mat-form-field",5)(29,"mat-label"),l(30,"Ciudad"),t(),o(31,"mat-select",10),g(32,de,2,1,"ng-container",9),T(33,"async"),t()(),o(34,"mat-form-field",5)(35,"mat-label"),l(36,"Direcci\xF3n"),t(),p(37,"input",7),t(),o(38,"div",11)(39,"button",12),u("click",function(){return h(c),b(r.closeDialog())}),o(40,"span"),l(41," Cancelar "),t()(),o(42,"button",13),u("click",function(){return h(c),b(r.onSave())}),o(43,"span"),l(44),t()()()()()()}s&2&&(e(3),N(" ",r._matData.edit?"Actualizar empresa":"Nueva empresa"," "),e(),i("formGroup",r.form),e(4),i("formControlName","nit"),e(4),i("formControlName","razonSocial"),e(4),i("formControlName","correo"),e(4),i("formControlName","telefono"),e(6),i("ngIf",G(27,13,r.departamentos$)),e(5),i("formControlName","idMunicipio"),e(),i("ngIf",G(33,15,r.municipios$)),e(5),i("formControlName","direccion"),e(2),i("color","primary"),e(3),i("color","primary"),e(2),N(" ",r._matData.edit?"Actualizar":"Guardar"," "))},dependencies:[E,y,C,H,ie,P,O,$,R,te,X,K,Q,U,Y,Z]});let n=a;return n})();var ne=(()=>{let a=class a{constructor(m,s,r){this._matDialog=m,this.empresasService=s,this.estadoDatosService=r,this.data=[],this.columns=["Nit","Razon social","Correo","Telefono","Direccion"],this.columnPropertyMap={Nit:"nit","Razon social":"razonSocial",Correo:"correo",Telefono:"telefono",Direccion:"direccion"},this.buttons=[{label:"Edit",icon:"edit",action:c=>{console.log("Editing",c),this.selectedData=c,this.onEdit()}}]}onNew(){this._matDialog.open(V,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",maxWidth:"100%"})}onEdit(){this._matDialog.open(V,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getEmpresas(){this.subcription$=this.empresasService.getEmpresas().subscribe(m=>{this.data=m.data})}ngOnInit(){this.getEmpresas(),this.listenGrid()}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(s=>{s&&this.getEmpresas()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngAfterViewInit(){}};a.\u0275fac=function(s){return new(s||a)(S(L),S(x),S(D))},a.\u0275cmp=v({type:a,selectors:[["app-grid-empresas"]],standalone:!0,features:[_],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(s,r){s&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Empresas Maestras"),t(),o(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5)(7,"input",6),t(),o(8,"button",7),u("click",function(){return r.onNew()}),p(9,"mat-icon",8),o(10,"span",9),l(11,"Nueva empresa"),t()()()(),o(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),t()()()),s&2&&(e(5),i("subscriptSizing","dynamic"),e(),i("svgIcon","heroicons_solid:magnifying-glass"),e(),i("autocomplete","off")("placeholder","Buscar"),e(),i("color","primary"),e(),i("svgIcon","heroicons_outline:plus"),e(5),i("columns",r.columns)("displayedColumns",r.columns)("columnPropertyMap",r.columnPropertyMap)("data",r.data)("buttons",r.buttons))},dependencies:[B,E,q,C,y,oe]});let n=a;return n})();var qe=[{path:"",component:ne}];export{qe as default};
