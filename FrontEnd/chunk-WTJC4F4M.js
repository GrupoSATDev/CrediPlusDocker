import{a as Fe,b as Ne,c as Me,d as Te,e as we}from"./chunk-XZNPYCN3.js";import{a as ke}from"./chunk-NHEIDCKX.js";import{a as De}from"./chunk-7BBUV72N.js";import{a as Ae}from"./chunk-MMS7G32A.js";import{a as q}from"./chunk-6IEWE3OU.js";import{a as U,b as j,c as Ie}from"./chunk-VG7RFQST.js";import{a as ye,b as xe}from"./chunk-L7DHXJYW.js";import{a as se,b as pe,c as ce,k as ue}from"./chunk-BEUMGSBU.js";import"./chunk-XWKUJA73.js";import{A as Ce,E as G,a as de,d as fe,h as k,k as ge,o as ve,p as he,s as Se,u as be,v as _e,x as Ee}from"./chunk-JABQIN56.js";import{N as re,O as me,Y as le,ba as A,ga as $}from"./chunk-COZCVVRH.js";import"./chunk-NFYLEJKB.js";import{a as P}from"./chunk-T2KHVOBS.js";import{f as oe,g as ne,i as ae,j as J,q as w}from"./chunk-LP47ZEUX.js";import{$ as D,Cb as a,Db as i,Eb as c,Fb as h,Gb as S,Ib as ee,Ob as b,Qb as H,Wa as Z,Xb as te,Yb as l,Za as o,Zb as _,_a as M,_b as W,cc as ie,dc as T,ea as v,fa as f,ka as I,lc as E,mc as C,pb as u,q as Y,rb as n,ua as F,va as N,yb as L}from"./chunk-5H7N2SGK.js";import{a as x,d as z}from"./chunk-NEB6MB4Y.js";var O=(()=>{let t=class t{constructor(r,m){this._http=r,this.appSettings=m}getEmpleados(){return this._http.get(this.appSettings.empleados.url.base)}postEmpleados(r){return delete r.id,this._http.post(this.appSettings.empleados.url.base,r)}putEmpleados(r){let m=r.id;return delete r.id,this._http.put(`${this.appSettings.empleados.url.base}/${m}`,r)}};t.\u0275fac=function(m){return new(m||t)(v(w),v(P))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $e=(()=>{let t=class t{constructor(r,m){this._http=r,this.appSettings=m}getCargos(){return this._http.get(this.appSettings.cargos.url.base)}postCargos(r){return delete r.id,this._http.post(this.appSettings.cargos.url.base,r)}putCargos(r){let m=r.id;return delete r.id,this._http.put(`${this.appSettings.cargos.url.base}/${m}`,r)}};t.\u0275fac=function(m){return new(m||t)(v(w),v(P))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Be(e,t){if(e&1&&c(0,"img",10),e&2){let s=H();n("src",s.profile.avatar,Z)("alt","Profile avatar")}}function Re(e,t){if(e&1&&(a(0,"div",11),l(1),i()),e&2){let s=H();o(),W(" ",s.profile.name.charAt(0)," ")}}function ze(e,t){if(e&1&&(a(0,"mat-option",24),l(1),i()),e&2){let s=t.$implicit;n("value",s.id),o(),_(s.nombre)}}function Le(e,t){if(e&1&&(h(0),u(1,ze,2,2,"mat-option",23),S()),e&2){let s=t.ngIf;o(),n("ngForOf",s.data)}}function He(e,t){if(e&1&&(a(0,"mat-option",24),l(1),i()),e&2){let s=t.$implicit;n("value",s.id),o(),_(s.nombre)}}function We(e,t){if(e&1&&(h(0),u(1,He,2,2,"mat-option",23),S()),e&2){let s=t.ngIf;o(),n("ngForOf",s.data)}}function Je(e,t){if(e&1&&(a(0,"mat-option",24),l(1),i()),e&2){let s=t.$implicit;n("value",s.id),o(),_(s.nombre)}}function Ue(e,t){if(e&1&&(h(0),u(1,Je,2,2,"mat-option",23),S()),e&2){let s=t.ngIf;o(),n("ngForOf",s.data)}}function qe(e,t){if(e&1&&(a(0,"mat-option",24),l(1),i()),e&2){let s=t.$implicit;n("value",s.id),o(),_(s.nombre)}}function Ke(e,t){if(e&1&&(h(0),u(1,qe,2,2,"mat-option",23),S()),e&2){let s=t.ngIf;o(),n("ngForOf",s.data)}}function Qe(e,t){if(e&1&&(a(0,"mat-option",24),l(1),i()),e&2){let s=t.$implicit;n("value",s.idEmpresa),o(),_(s.razonSocial)}}function Xe(e,t){if(e&1&&(h(0),u(1,Qe,2,2,"mat-option",23),S()),e&2){let s=t.ngIf;o(),n("ngForOf",s.data)}}var Q=(()=>{let t=class t{constructor(){this.fb=f(Ee),this.dialogRef=f(se),this.fuseService=f(ue),this.estadosDatosService=f(j),this.toasService=f(Ie),this.tiposDocumentosService=f(ke),this._locacionService=f(De),this.generoService=f(Ae),this.empresaClienteService=f(Te),this.datePipe=f(J),this.empleadosServices=f(O),this.cargosServices=f($e),this.departamentos$=this._locacionService.getDepartamentos(),this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos(),this.generos$=this.generoService.getGeneros(),this.empresasClientes$=this.empresaClienteService.getEmpresas(),this.cargos$=this.cargosServices.getCargos(),this._matData=f(pe),this.profile={avatar:"",name:"Pedro"}}ngOnInit(){this.createForm();let r=this._matData;if(r.edit){let m=r.data;this.form.patchValue(m);let{idDepartamento:p,fechaNacimiento:d}=m,g=new Date(d);this.form.patchValue({fechaNacimiento:g}),this.municipios$=this._locacionService.getMunicipio(p)}}getMunicipios(r){let m=r.value;this.municipios$=this._locacionService.getMunicipio(m)}onSave(){if(this.form.valid)if(this._matData.edit){let m=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:g}=m,y=z(m,["idDepartamento","fechaNacimiento"]),V=this.datePipe.transform(g,"dd/MM/yyyy"),B=x({fechaNacimiento:V},y);this.fuseService.open(x({},U)).afterClosed().subscribe(R=>{R==="confirmed"?this.empleadosServices.putEmpleados(B).subscribe(X=>{this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro actualizado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}else{let r=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:g}=r,y=z(r,["idDepartamento","fechaNacimiento"]),V=this.datePipe.transform(g,"dd/MM/yyyy"),B=x({fechaNacimiento:V},y);this.fuseService.open(x({},U)).afterClosed().subscribe(R=>{R==="confirmed"?this.empleadosServices.postEmpleados(B).subscribe(X=>{console.log(X),this.estadosDatosService.stateGrid.next(!0),this.toasService.toasAlertWarn({message:"Registro creado con exito!",actionMessage:"Cerrar",duration:3e3}),this.closeDialog()}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],primerNombre:[""],segundoNombre:[""],primerApellido:[""],segundoApellido:[""],idTipoDoc:[""],numDoc:[""],idDepartamento:[""],idMunicipio:[""],telefono:[""],telefono2:[""],direccion:[""],idGenero:[""],correo:[""],cargo:[""],fechaNacimiento:[""],foto:[""],firma:[""],idSubEmpresa:[""]})}closeDialog(){this.dialogRef.close()}};t.\u0275fac=function(m){return new(m||t)},t.\u0275cmp=I({type:t,selectors:[["app-form-empleados"]],standalone:!0,features:[ie([{provide:me,useClass:we},{provide:re,useValue:"en-GB"},J]),T],decls:105,vars:40,consts:[["picker",""],["data",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8",3,"formGroup"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full","mb-8"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],[1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"flex","gap-2.5"],[1,"w-full"],["matInput","",3,"formControlName"],[3,"formControlName"],[4,"ngIf"],["matInput","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],[3,"selectionChange","formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-credigray-100",3,"click","color"],["mat-flat-button","",1,"fuse-mat-button-large","mt-6","bg-crediblue-50",3,"click","color"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(m,p){if(m&1){let d=ee();a(0,"div",2)(1,"div",3)(2,"div",4),l(3),i(),a(4,"form",5)(5,"div",6)(6,"div",7),c(7,"mat-icon",8),a(8,"div",9),l(9," Cambiar foto "),i()(),u(10,Be,1,2,"img",10)(11,Re,2,1,"div",11),i(),a(12,"div",12)(13,"mat-form-field",13)(14,"mat-label"),l(15,"Primer nombre"),i(),c(16,"input",14),i(),a(17,"mat-form-field",13)(18,"mat-label"),l(19,"Segundo nombre"),i(),c(20,"input",14),i()(),a(21,"div",12)(22,"mat-form-field",13)(23,"mat-label"),l(24,"Primer apellido"),i(),c(25,"input",14),i(),a(26,"mat-form-field",13)(27,"mat-label"),l(28,"Segundo apellido"),i(),c(29,"input",14),i()(),a(30,"div",12)(31,"mat-form-field",13)(32,"mat-label"),l(33,"Tipo de documento"),i(),a(34,"mat-select",15),u(35,Le,2,1,"ng-container",16),E(36,"async"),i()(),a(37,"mat-form-field",13)(38,"mat-label"),l(39,"N\xFAmero de identificaci\xF3n"),i(),c(40,"input",14),i()(),a(41,"div",12)(42,"mat-form-field",13)(43,"mat-label"),l(44,"G\xE9nero"),i(),a(45,"mat-select",15),u(46,We,2,1,"ng-container",16),E(47,"async"),i()(),a(48,"mat-form-field",13)(49,"mat-label"),l(50,"Fecha de nacimiento"),i(),c(51,"input",17)(52,"mat-datepicker-toggle",18)(53,"mat-datepicker",null,0),i()(),a(55,"div",12)(56,"mat-form-field",13)(57,"mat-label"),l(58,"Departamento"),i(),a(59,"mat-select",19,1),b("selectionChange",function(y){return F(d),N(p.getMunicipios(y))}),u(61,Ue,2,1,"ng-container",16),E(62,"async"),i()(),a(63,"mat-form-field",13)(64,"mat-label"),l(65,"Ciudad"),i(),a(66,"mat-select",15),u(67,Ke,2,1,"ng-container",16),E(68,"async"),i()()(),a(69,"div",12)(70,"mat-form-field",13)(71,"mat-label"),l(72,"Direcci\xF3n"),i(),c(73,"input",14),i(),a(74,"mat-form-field",13)(75,"mat-label"),l(76,"Celular"),i(),c(77,"input",14),i()(),a(78,"div",12)(79,"mat-form-field",13)(80,"mat-label"),l(81,"Tel\xE9fono"),i(),c(82,"input",14),i(),a(83,"mat-form-field",13)(84,"mat-label"),l(85,"Email"),i(),c(86,"input",14),i()(),a(87,"div",12)(88,"mat-form-field",13)(89,"mat-label"),l(90,"Cargo"),i(),c(91,"input",14),i(),a(92,"mat-form-field",13)(93,"mat-label"),l(94,"Empresa"),i(),a(95,"mat-select",15),u(96,Xe,2,1,"ng-container",16),E(97,"async"),i()()(),a(98,"div",20)(99,"button",21),b("click",function(){return F(d),N(p.closeDialog())}),a(100,"span"),l(101," Cancelar "),i()(),a(102,"button",22),b("click",function(){return F(d),N(p.onSave())}),a(103,"span"),l(104," Guardar "),i()()()()()()}if(m&2){let d=te(54);o(3),W(" ",p._matData.edit?"Actualizar empleado":"Crear empleado"," "),o(),n("formGroup",p.form),o(3),n("svgIcon","heroicons_outline:camera"),o(3),L(p.profile.avatar?10:-1),o(),L(p.profile.avatar?-1:11),o(5),n("formControlName","primerNombre"),o(4),n("formControlName","segundoNombre"),o(5),n("formControlName","primerApellido"),o(4),n("formControlName","segundoApellido"),o(5),n("formControlName","idTipoDoc"),o(),n("ngIf",C(36,30,p.tiposDocumentos$)),o(5),n("formControlName","numDoc"),o(5),n("formControlName","idGenero"),o(),n("ngIf",C(47,32,p.generos$)),o(5),n("matDatepicker",d)("formControlName","fechaNacimiento"),o(),n("for",d),o(7),n("formControlName","idDepartamento"),o(2),n("ngIf",C(62,34,p.departamentos$)),o(5),n("formControlName","idMunicipio"),o(),n("ngIf",C(68,36,p.municipios$)),o(6),n("formControlName","direccion"),o(4),n("formControlName","telefono"),o(5),n("formControlName","telefono2"),o(4),n("formControlName","correo"),o(5),n("formControlName","cargo"),o(4),n("formControlName","idSubEmpresa"),o(),n("ngIf",C(97,38,p.empresasClientes$)),o(3),n("color","primary"),o(3),n("color","primary")}},dependencies:[A,k,G,de,Ce,Se,ge,ve,he,be,_e,ae,le,ye,oe,ne,Fe,Ne,Me,fe,$]});let e=t;return e})();var Pe=(()=>{let t=class t{constructor(r,m,p){this._matDialog=r,this.estadoDatosService=m,this.empleadoService=p,this.data=[],this.columns=["Tipo de documento","Identificaci\xF3n","Primer nombre","Segundo nombre","Primer apellido","Segundo apellido","Direcci\xF3n","Tel\xE9fono","Cargo"],this.columnPropertyMap={"Tipo de documento":"idTipoDoc",Identificaci\u00F3n:"numDoc","Primer nombre":"primerNombre","Segundo nombre":"segundoNombre","Primer apellido":"primerApellido","Segundo apellido":"segundoApellido",Direcci\u00F3n:"direccion",Tel\u00E9fono:"telefono",Cargo:"cargo"},this.buttons=[{label:"Edit",icon:"edit",action:d=>{console.log("Editing",d),this.selectedData=d,this.onEdit()}}]}onNew(){this._matDialog.open(Q,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",width:"50%",maxWidth:"100%"})}onEdit(){this._matDialog.open(Q,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",maxWidth:"100%"})}getEmpleados(){this.subcription$=this.empleadoService.getEmpleados().pipe(Y(r=>(r.data.forEach(m=>{m.estado?m.estado=q.ACTIVO:m.estado=q.INACTIVO}),r))).subscribe(r=>{this.data=r.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(m=>{m&&this.getEmpleados()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEmpleados(),this.listenGrid()}};t.\u0275fac=function(m){return new(m||t)(M(ce),M(j),M(O))},t.\u0275cmp=I({type:t,selectors:[["app-grid-empleados"]],standalone:!0,features:[T],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"ml-4","bg-crediblue-50",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(m,p){m&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),l(3,"Empleados"),i(),a(4,"div",3)(5,"mat-form-field",4),c(6,"mat-icon",5)(7,"input",6),i(),a(8,"button",7),b("click",function(){return p.onNew()}),c(9,"mat-icon",8),a(10,"span",9),l(11,"Crear empleado"),i()()()(),a(12,"div",10)(13,"div",11),c(14,"app-custom-table",12),i()()()),m&2&&(o(5),n("subscriptSizing","dynamic"),o(),n("svgIcon","heroicons_solid:magnifying-glass"),o(),n("autocomplete","off")("placeholder","Buscar"),o(),n("color","primary"),o(),n("svgIcon","heroicons_outline:plus"),o(5),n("columns",p.columns)("displayedColumns",p.columns)("columnPropertyMap",p.columnPropertyMap)("data",p.data)("buttons",p.buttons))},dependencies:[xe,A,k,$,G]});let e=t;return e})();var Ot=[{path:"",component:Pe}];export{Ot as default};
