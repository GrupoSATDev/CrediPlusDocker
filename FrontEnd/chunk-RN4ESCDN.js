import{a as H,b as Z,c as k}from"./chunk-E7PUDPFG.js";import{a as W}from"./chunk-CGPHN2IG.js";import{a as B}from"./chunk-LBLJGZM7.js";import{a as z}from"./chunk-OFEOPKCC.js";import"./chunk-55LFJ2HF.js";import"./chunk-CHOSRW5W.js";import"./chunk-7U4JZNVG.js";import{I as F,i as N}from"./chunk-CURMXRYA.js";import{ja as V}from"./chunk-DARKUWJB.js";import"./chunk-EENLYY7H.js";import"./chunk-EJW5UVWF.js";import{d as w}from"./chunk-DJAHQBBJ.js";import{g as O,j as C,l as y}from"./chunk-NP3GUERB.js";import{Cb as p,Db as d,Eb as f,Fb as _,Gb as x,Ib as P,Ob as S,Qb as c,Yb as D,Za as m,ac as E,bc as T,cc as M,dc as G,ec as R,fa as u,ka as v,pb as l,q as I,rb as i,ua as g,va as h}from"./chunk-32HXX3OB.js";import"./chunk-NEB6MB4Y.js";var r=function(e){return e.EN_REVISION="EnRevision",e.APROBADA="Aprobados",e.PAGADO="Pagados",e.RECHAZADA="Rechazados",e}(r||{});function $(e,a){if(e&1&&(_(0),f(1,"app-custom-table",17),x()),e&2){let t=c(2);m(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function L(e,a){if(e&1&&l(0,$,2,5,"ng-container",16),e&2){let t=c();i("ngIf",t.data.length)}}function q(e,a){if(e&1&&(_(0),f(1,"app-custom-table",17),x()),e&2){let t=c(2);m(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function J(e,a){if(e&1&&l(0,q,2,5,"ng-container",16),e&2){let t=c();i("ngIf",t.data.length)}}function K(e,a){if(e&1&&(_(0),f(1,"app-custom-table",17),x()),e&2){let t=c(2);m(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function Q(e,a){if(e&1&&l(0,K,2,5,"ng-container",16),e&2){let t=c();i("ngIf",t.data.length)}}function X(e,a){if(e&1&&(_(0),f(1,"app-custom-table",17),x()),e&2){let t=c(2);m(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function Y(e,a){if(e&1&&l(0,X,2,5,"ng-container",16),e&2){let t=c();i("ngIf",t.data.length)}}var j=(()=>{let a=class a{constructor(){this.datePipe=u(C),this.currencyPipe=u(y),this.router=u(w),this.estadoService=u(z),this.consumoService=u(W),this.selectedTab=r.APROBADA,this.data=[],this.columns=["Fecha","N\xFAmero de factura","Detalle compra","Valor factura","Valor cuotas","Cantidad cuotas","Estado"],this.columnPropertyMap={Fecha:"fechaCreacion","N\xFAmero de factura":"numeroFactura","Detalle compra":"detalleCompra","Valor factura":"montoConsumo","Valor cuotas":"montoCuotas","Cantidad cuotas":"cantidadCuotas",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:o=>{console.log("Approve",o),this.selectedData=o}}],this.tabChanged=o=>{console.log("tabChangeEvent => ",o),console.log("index => ",o.index),this.tabIndex=o.index,console.log(this.tabIndex),this.selectedTab=o.index==0?r.EN_REVISION:o.index==1?r.APROBADA:o.index==2?r.PAGADO:o.index==3?r.RECHAZADA:r.EN_REVISION,this.getDetalle(this.selectedTab)}}listenGrid(){this.estadoService.stateGridSolicitudes.asObservable().subscribe(n=>{n.state&&(console.log("Si entro"),console.log(n),this.selectedTab=n.tab==0?r.EN_REVISION:n.tab==1?r.APROBADA:n.tab==2?r.PAGADO:n.tab==3?r.RECHAZADA:r.EN_REVISION,this.tabIndex=n.tab,console.log(this.tabIndex),this.getDetalle(this.selectedTab))})}getDetalle(o){this.subcription$=this.consumoService.getDetalle(o).pipe(I(n=>(n.data.forEach(s=>{s.fechaCreacion=this.datePipe.transform(s.fechaCreacion,"dd/MM/yyyy"),s.montoConsumo=this.currencyPipe.transform(s.montoConsumo,"USD","symbol","1.2-2"),s.montoCuotas=this.currencyPipe.transform(s.montoCuotas,"USD","symbol","1.2-2")}),n))).subscribe(n=>{n?this.data=n.data:this.data=[]},n=>{this.data=[]})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getDetalle(this.selectedTab),this.listenGrid()}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=v({type:a,selectors:[["app-grid-consumos"]],standalone:!0,features:[G([C,y]),R],decls:20,vars:6,consts:[["tabGroup",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:overflow-y-auto","bg-gray-100"],["mat-stretch-tabs","false",1,"sm:px-2",3,"selectedIndexChange","selectedTabChange","animationDuration","selectedIndex"],["label","En revisi\xF3n"],["matTabContent",""],["label","Aprobados"],["label","Pagados"],["label","Rechazados"],[4,"ngIf"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(n,s){if(n&1){let A=P();p(0,"div",1)(1,"div",2)(2,"div",3),D(3,"Detalle consumos"),d(),p(4,"div",4)(5,"mat-form-field",5),f(6,"mat-icon",6)(7,"input",7),d()()(),p(8,"div",8)(9,"div",9)(10,"mat-tab-group",10,0),M("selectedIndexChange",function(b){return g(A),T(s.tabIndex,b)||(s.tabIndex=b),h(b)}),S("selectedTabChange",function(b){return g(A),h(s.tabChanged(b))}),p(12,"mat-tab",11),l(13,L,1,1,"ng-template",12),d(),p(14,"mat-tab",13),l(15,J,1,1,"ng-template",12),d(),p(16,"mat-tab",14),l(17,Q,1,1,"ng-template",12),d(),p(18,"mat-tab",15),l(19,Y,1,1,"ng-template",12),d()()()()()}n&2&&(m(5),i("subscriptSizing","dynamic"),m(),i("svgIcon","heroicons_solid:magnifying-glass"),m(),i("autocomplete","off")("placeholder","Buscar"),m(3),i("animationDuration","500"),E("selectedIndex",s.tabIndex))},dependencies:[B,N,V,F,Z,H,k,O]});let e=a;return e})();var xe=[{path:"",component:j}];export{xe as default};
