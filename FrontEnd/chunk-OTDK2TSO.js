import{a as $}from"./chunk-E7JXBWNK.js";import{a as c}from"./chunk-FAEUQIFQ.js";import{a as O,b}from"./chunk-P4PAYY2C.js";import{a as N}from"./chunk-DTORAJAR.js";import{a as q}from"./chunk-3R6HD5RM.js";import"./chunk-CJO6YW5P.js";import"./chunk-7YBFULQ5.js";import{g as V,h as z}from"./chunk-QVE5MGEQ.js";import{J as U,i as A}from"./chunk-4PVPKBBG.js";import"./chunk-YKJB7XET.js";import{h as X}from"./chunk-FUOI65R5.js";import{a as B}from"./chunk-73F67TFK.js";import"./chunk-XTYNXB3F.js";import"./chunk-6TKQ7XQI.js";import{$a as g,Ad as R,Fb as m,Gb as E,Hb as _,Ka as s,Ob as F,Pb as I,Sb as P,bb as d,fe as G,ga as u,ib as w,ka as S,ke as L,mb as i,nb as l,ob as h,pc as M,q as C,vb as v,vc as y,xb as T,xc as j,yc as D,zd as k}from"./chunk-ODJKW74N.js";import{a as x}from"./chunk-NEB6MB4Y.js";var J=(r,n)=>({"bg-green-700":r,"bg-credigray-100":n});function K(r,n){if(r&1&&h(0,"app-custom-table",12),r&2){let p=T();d("columns",p.columns)("displayedColumns",p.columns)("columnPropertyMap",p.columnPropertyMap)("data",p.data)("searchTerm",p.searchTerm)}}function Q(r,n){r&1&&(i(0,"div",13)(1,"div",14)(2,"fuse-alert",15)(3,"span",16),m(4,"Informaci\xF3n"),l(),m(5," No hay informaci\xF3n hasta el momento. "),l()()()),r&2&&(s(2),d("type","info")("appearance","outline"))}var H=(()=>{let n=class n{constructor(){this.searchTerm="",this.reportesService=u($),this.datePipe=u(y),this.fuseService=u(V),this.currencyPipe=u(D),this.title="Desembolsos",this.tabDescription="Este reporte muestra todos los desembolsos que se han realizado y el estado en que se encuentran.",this.data=[],this.exportData=[],this.columns=["Fecha de desembolso","Trabajador","Identificaci\xF3n","Empresa","Cantidad cuotas","Valor desembolso","Deuda a la fecha","Intereses a la fecha","Valor cuota","Deuda costos","Recaudado","Estado"],this.columnPropertyMap={"Fecha de desembolso":"fechaDesembolso",Trabajador:"nombreTrabajador",Identificaci\u00F3n:"documentoTrabajador",Empresa:"nombreSubEmpresa","Cantidad cuotas":"cantCuotas","Valor desembolso":"valorDesembolso","Deuda a la fecha":"deudaTotal","Intereses a la fecha":"deudaIntereses","Valor cuota":"valorCuota","Deuda costos":"deudaCobroFijo",Recaudado:"recaudado",Estado:"estado"}}onSearch(t){let e=t.target;this.searchTerm=e.value.trim().toLowerCase()}ngOnInit(){this.loadDeudas()}loadDeudas(){this.reportesService.getReporteGeneral().pipe(C(t=>(t.data.forEach(e=>{e.fechaDesembolso=this.datePipe.transform(e.fechaDesembolso,"dd/MM/yyyy"),e.valorDesembolso=this.currencyPipe.transform(e.valorDesembolso,"USD","symbol","1.2-2"),e.recaudado=this.currencyPipe.transform(e.recaudado,"USD","symbol","1.2-2"),e.deudaTotal=this.currencyPipe.transform(e.deudaTotal,"USD","symbol","1.2-2"),e.deudaIntereses=this.currencyPipe.transform(e.deudaIntereses,"USD","symbol","1.2-2"),e.valorCuota=this.currencyPipe.transform(e.valorCuota,"USD","symbol","1.2-2"),e.deudaCobroFijo=this.currencyPipe.transform(e.deudaCobroFijo,"USD","symbol","1.2-2")}),t))).subscribe(t=>{t.data?(this.data=t.data,this.convertDataExport(t.data)):this.data=[]})}exportToExcel(t){this.fuseService.open(x({},z)).afterClosed().subscribe(o=>{if(o==="confirmed"){let a=b.json_to_sheet(t),f=b.book_new();b.book_append_sheet(f,a,"Sheet1"),O(f,`Reporte general desembolsos ${this.datePipe.transform(new Date,"dd/MM/yyyy")}.xlsx`)}})}convertDataExport(t){let e=t.map(o=>{let a={FechaDeDesembolso:o.fechaDesembolso,Trabajador:o.nombreTrabajador,Identificacion:o.documentoTrabajador,Empresa:o.nombreSubEmpresa};return a.CantidadCuotas=o.cantCuotas,a.ValorDesembolso=c(o.valorDesembolso),a.DeudaAlaFecha=c(o.deudaTotal),a.InteresesAlaFecha=c(o.deudaIntereses),a.ValorCuota=c(o.valorCuota),a.DeudaCostos=c(o.deudaCobroFijo),a.Recaudado=c(o.recaudado),a.Estado=o.estado,a});this.exportData=e}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=S({type:n,selectors:[["app-reporte-desembolsos-general"]],standalone:!0,features:[F([{provide:R,useClass:N},{provide:k,useValue:"en-GB"},y,D,j]),I],decls:19,vars:13,consts:[["cdkScrollable","",1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"text-md","text-gray-600","mt-2","w-2/3"],[1,"font-bold"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"input","autocomplete","placeholder"],["mat-flat-button","",1,"w-full","mt-2","sm:mt-0","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color","ngClass","disabled"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","searchTerm"],[1,"inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-4","sm:p-2","print:p-0","w-full"],[3,"type","appearance"],["fuseAlertTitle",""]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),m(3,"General desembolsos "),i(4,"div",3)(5,"span",4),m(6),l(),m(7),l()(),i(8,"div",5)(9,"mat-form-field",6),h(10,"mat-icon",7),i(11,"input",8),v("input",function(f){return o.onSearch(f)}),l()(),i(12,"button",9),v("click",function(){return o.exportToExcel(o.exportData)}),i(13,"span"),m(14," Exportar "),l()()()(),i(15,"div",10)(16,"div",11),g(17,K,1,5,"app-custom-table",12)(18,Q,6,2,"div",13),l()()()),e&2&&(s(6),E(o.title),s(),_(" ",o.tabDescription," "),s(2),d("subscriptSizing","dynamic"),s(),d("svgIcon","heroicons_solid:magnifying-glass"),s(),d("autocomplete","off")("placeholder","Buscar"),s(),d("color","primary")("ngClass",P(10,J,o.exportData.length,!o.exportData.length))("disabled",!o.exportData.length),s(5),w(o.data.length>0?17:18))},dependencies:[X,q,B,G,A,L,U,M]});let r=n;return r})();var De=[{path:"",component:H}];export{De as default};
