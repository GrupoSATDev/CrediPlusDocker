import{a as re}from"./chunk-KCF3ZMA6.js";import{a as C}from"./chunk-6IEWE3OU.js";import{a as oe}from"./chunk-QE3E4OX7.js";import{a as ie}from"./chunk-OFEOPKCC.js";import{a as te}from"./chunk-QYSIOB6Y.js";import{a as ee}from"./chunk-33XH4PMS.js";import"./chunk-ISHIQJYM.js";import{c as L}from"./chunk-3P4FUJJD.js";import{h as V}from"./chunk-4CCKGQO6.js";import{B as X,C as Y,G as Z,b as z,i as U,p as J,s as K,v as Q,z as W}from"./chunk-7YVLRDAA.js";import{$ as R,fa as H,ja as T}from"./chunk-T34F2ICN.js";import"./chunk-XMIUBE2U.js";import{a as q}from"./chunk-XHZ6JD3E.js";import{b as A,d as w,e as B}from"./chunk-HGIHZLIS.js";import{f as E,g as G,j as v,m as g,s as N}from"./chunk-YH7HM3TK.js";import{$ as D,Cb as r,Db as a,Eb as b,Ob as j,Qb as F,Yb as d,Za as s,Zb as c,_a as P,dc as O,ea as _,ec as y,fa as p,fc as $,ka as x,mc as S,nc as M,oc as k,pb as u,q as h,rb as l}from"./chunk-32HXX3OB.js";import"./chunk-NEB6MB4Y.js";var I=(()=>{let o=class o{constructor(t,e){this._http=t,this.appSettings=e}getCobros(){return this._http.get(this.appSettings.cobroTrabajadores.url.base)}getCobroEmpleado(t){return this._http.get(`${this.appSettings.cobroTrabajadores.url.base}/${t}`)}getCobrosGrid(t){return this._http.get(`${this.appSettings.cobroTrabajadores.url.baseTabla}/${t}`)}};o.\u0275fac=function(e){return new(e||o)(_(N),_(q))},o.\u0275prov=D({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();function le(i,o){if(i&1&&(r(0,"mat-option",13),d(1),a()),i&2){let m=o.$implicit;l("value",m.id),s(),c(m.nombre)}}var ne=(()=>{let o=class o{constructor(t){this._matDialog=t,this.datePipe=p(v),this.router=p(w),this.estadoDatosService=p(ie),this.currencyPipe=p(g),this.cobroTrabadorService=p(I),this.estadoCreditosService=p(re),this.fb=p(W),this.estados=new K("e626ea69-e995-4462-be2a-905326714782"),this.searchTerm="",this.estadpCreditos=[],this.data=[],this.columns=["Nombre completo","Deuda total","Empresa","Estado"],this.columnPropertyMap={"Nombre completo":"nombreTrabajador","Deuda total":"deudaTotal",Empresa:"nombreSubEmpresa",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:e=>{console.log("Editing",e),this.selectedData=e,this.router.navigate(["pages/gestion-cobros/cobros/cobro",this.selectedData.idTrabajador])}}]}getEstadoCreditos(){this.subcription$=this.estadoCreditosService.getEstadoCobros().subscribe(t=>{this.estadpCreditos=t.data})}onSelect(t){let e=t.value;this.subcription$=this.cobroTrabadorService.getCobrosGrid(e).pipe(h(n=>(n.data.forEach(f=>{f.estado?f.estado=C.ACTIVO:f.estado=C.INACTIVO}),n)),h(n=>(n.data.forEach(f=>{f.deudaTotal=this.currencyPipe.transform(f.deudaTotal,"USD","symbol","1.2-2")}),n))).subscribe(n=>{n?this.data=n.data:this.data=[]},n=>{this.data=[]})}getCobros(){this.subcription$=this.cobroTrabadorService.getCobros().pipe(h(t=>(t.data.forEach(e=>{e.estado?e.estado=C.ACTIVO:e.estado=C.INACTIVO}),t)),h(t=>(t.data.forEach(e=>{e.fechaCobro=this.datePipe.transform(e.fechaCobro,"dd/MM/yyyy"),e.valorPendiente=this.currencyPipe.transform(e.valorPendiente,"USD","symbol","1.2-2"),e.valorPago=e.valorPago?this.currencyPipe.transform(e.valorPago,"USD","symbol","1.2-2"):"-"}),t))).subscribe(t=>{t?this.data=t.data:this.data=[]},t=>{this.data=[]})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEstadoCreditos(),this.listenGrid()}};o.\u0275fac=function(e){return new(e||o)(P(L))},o.\u0275cmp=x({type:o,selectors:[["app-grid-cobros-empleados"]],standalone:!0,features:[O([v,g]),y],decls:16,vars:12,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0","w-1/2","gap-2.5"],[1,"fuse-mat-dense","rounded-lg","w-1/2",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"w-1/2"],[3,"selectionChange","formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons","searchTerm"],[3,"value"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),d(3,"Cobro Trabajadores"),a(),r(4,"div",3)(5,"mat-form-field",4),b(6,"mat-icon",5)(7,"input",6),a(),r(8,"mat-form-field",7)(9,"mat-label"),d(10,"Estados"),a(),r(11,"mat-select",8),j("selectionChange",function(de){return n.onSelect(de)}),u(12,le,2,2,"mat-option",9),a()()()(),r(13,"div",10)(14,"div",11),b(15,"app-custom-table",12),a()()()),e&2&&(s(5),l("subscriptSizing","dynamic"),s(),l("svgIcon","heroicons_solid:magnifying-glass"),s(),l("autocomplete","off")("placeholder","Buscar"),s(4),l("formControl",n.estados),s(),l("ngForOf",n.estadpCreditos),s(3),l("columns",n.columns)("displayedColumns",n.columns)("columnPropertyMap",n.columnPropertyMap)("data",n.data)("buttons",n.buttons)("searchTerm",n.searchTerm))},dependencies:[oe,U,T,Z,z,R,te,E,Y,J,Q,X]});let i=o;return i})();var me=()=>["/pages/gestion-cobros/cobros"];function pe(i,o){if(i&1&&(r(0,"div",13),b(1,"mat-divider"),r(2,"div",14)(3,"div")(4,"h3",15),d(5,"Fecha de compra"),a()(),r(6,"p",16),d(7),S(8,"date"),a()(),r(9,"div",14)(10,"div")(11,"h3",15),d(12,"Valor pendiente"),a()(),r(13,"p",16),d(14),S(15,"currency"),a()(),r(16,"div",17)(17,"p",15),d(18,"Valor cuota"),a(),r(19,"p",16),d(20),S(21,"currency"),a()(),r(22,"div",18)(23,"p",15),d(24,"Cantidad cuotas"),a(),r(25,"p",16),d(26),a()(),r(27,"div",19)(28,"p",15),d(29,"Estado "),a(),r(30,"p",16),d(31),a()()()),i&2){let m=o.$implicit;s(7),c(k(8,5,m.fechaCobro,"dd/MM/yyyy")),s(7),c(M(15,8,m.valorPendiente)),s(6),c(M(21,10,m.montoCuota)),s(6),c(m.numCuota),s(5),c(m.nombreEstadoCredito)}}function ce(i,o){if(i&1&&(r(0,"div",10)(1,"div",11),u(2,pe,32,12,"div",12),a()()),i&2){let m=F(2);s(2),l("ngForOf",m.detalle)}}function fe(i,o){if(i&1&&(r(0,"div",8),u(1,ce,3,1,"div",9),a()),i&2){let m=F();s(),l("ngIf",m.detalle)}}var se=(()=>{let o=class o{constructor(){this.router=p(w),this.activatedRoute=p(A),this.cobroTrabadorService=p(I),this.idCredito=""}ngOnDestroy(){}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getDetalle(this.idCredito)}getDetalle(t){this.subcription$=this.cobroTrabadorService.getCobroEmpleado(t).subscribe(e=>{console.log(e),this.detalle=e.data})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=x({type:o,selectors:[["app-form-cobros-empleados"]],standalone:!0,features:[y],decls:10,vars:4,consts:[["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","print:p-0","w-full"],[1,"bg-card","shadow","print:bg-transparent","print:p-0","print:shadow-none","rounded-2xl","max-w-xl","mx-auto","overflow-hidden"],[1,"bg-crediblue-50","px-6","py-4","flex","items-center","justify-between"],["mat-button","",1,"flex","items-center",3,"routerLink"],[1,"text-white",3,"svgIcon"],[1,"text-xl","font-bold","text-white"],["class","p-6",4,"ngIf"],[1,"p-6"],["class","w-full h-full px-4",4,"ngIf"],[1,"w-full","h-full","px-4"],[1,"max-w-2xl","mx-auto","p-4","bg-white","shadow-lg","rounded-lg"],["class","space-y-4 mb-12",4,"ngFor","ngForOf"],[1,"space-y-4","mb-12"],[1,"flex","justify-between","items-center","border-b","pb-2"],[1,"text-lg","font-semibold","text-gray-700"],[1,"text-lg","font-bold","text-gray-800"],[1,"flex","justify-between","items-center"],[1,"flex","justify-between","items-center","pt-4","border-t"],[1,"flex","justify-between","items-center","border-t","pt-4"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),b(6,"mat-icon",5),a()(),r(7,"h2",6),d(8,"Cobro trabajadores"),a()(),u(9,fe,2,1,"div",7),a()()()),e&2&&(s(5),l("routerLink",$(3,me)),s(),l("svgIcon","heroicons_outline:arrow-long-left"),s(3),l("ngIf",n.detalle))},dependencies:[V,g,v,H,T,G,B,E,ee]});let i=o;return i})();var Qe=[{path:"",component:ne},{path:"cobro/:id",component:se}];export{Qe as default};
