import{a as W,b as $,c as U}from"./chunk-E7PUDPFG.js";import{a as v}from"./chunk-YXU43BFI.js";import{a as Z}from"./chunk-LBLJGZM7.js";import{a as y,b as j}from"./chunk-TVROLQDL.js";import"./chunk-55LFJ2HF.js";import"./chunk-CHOSRW5W.js";import{k}from"./chunk-GIPKHLVS.js";import"./chunk-7U4JZNVG.js";import{I as H,i as B}from"./chunk-CURMXRYA.js";import{ja as z}from"./chunk-DARKUWJB.js";import"./chunk-EENLYY7H.js";import"./chunk-EJW5UVWF.js";import{b as V,d as F}from"./chunk-DJAHQBBJ.js";import{g as N,j as I,l as D}from"./chunk-NP3GUERB.js";import{Cb as l,Db as d,Eb as f,Fb as h,Gb as g,Ib as T,Ob as M,Qb as u,Yb as C,Za as c,ac as R,bc as w,cc as G,dc as O,ec as _,fa as m,ka as x,pb as p,q as E,rb as i,ua as S,va as A}from"./chunk-32HXX3OB.js";import"./chunk-NEB6MB4Y.js";var r=function(e){return e.EN_REVISION="EnRevision",e.APROBADA="Aprobados",e.PAGADO="Pagados",e.RECHAZADA="Rechazados",e}(r||{});function Q(e,n){if(e&1&&(h(0),f(1,"app-custom-table",17),g()),e&2){let t=u(2);c(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function X(e,n){if(e&1&&p(0,Q,2,5,"ng-container",16),e&2){let t=u();i("ngIf",t.data.length)}}function Y(e,n){if(e&1&&(h(0),f(1,"app-custom-table",17),g()),e&2){let t=u(2);c(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function ee(e,n){if(e&1&&p(0,Y,2,5,"ng-container",16),e&2){let t=u();i("ngIf",t.data.length)}}function te(e,n){if(e&1&&(h(0),f(1,"app-custom-table",17),g()),e&2){let t=u(2);c(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function oe(e,n){if(e&1&&p(0,te,2,5,"ng-container",16),e&2){let t=u();i("ngIf",t.data.length)}}function ne(e,n){if(e&1&&(h(0),f(1,"app-custom-table",17),g()),e&2){let t=u(2);c(),i("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)}}function ae(e,n){if(e&1&&p(0,ne,2,5,"ng-container",16),e&2){let t=u();i("ngIf",t.data.length)}}var L=(()=>{let n=class n{constructor(){this.datePipe=m(I),this.currencyPipe=m(D),this.router=m(F),this.estadoService=m(y),this.consumoService=m(v),this.selectedTab=r.APROBADA,this.data=[],this.columns=["Fecha","N\xFAmero de factura","Detalle compra","Valor factura","Valor cuotas","Cantidad cuotas","Estado"],this.columnPropertyMap={Fecha:"fechaCreacion","N\xFAmero de factura":"numeroFactura","Detalle compra":"detalleCompra","Valor factura":"montoConsumo","Valor cuotas":"montoCuotas","Cantidad cuotas":"cantidadCuotas",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:a=>{console.log("Approve",a),this.selectedData=a,this.router.navigate(["pages/gestion-creditos/consumos/detalle",this.selectedData.id])}}],this.tabChanged=a=>{console.log("tabChangeEvent => ",a),console.log("index => ",a.index),this.tabIndex=a.index,console.log(this.tabIndex),this.selectedTab=a.index==0?r.EN_REVISION:a.index==1?r.APROBADA:a.index==2?r.PAGADO:a.index==3?r.RECHAZADA:r.EN_REVISION,this.getDetalle(this.selectedTab)}}listenGrid(){this.estadoService.stateGridSolicitudes.asObservable().subscribe(o=>{o.state&&(console.log("Si entro"),console.log(o),this.selectedTab=o.tab==0?r.EN_REVISION:o.tab==1?r.APROBADA:o.tab==2?r.PAGADO:o.tab==3?r.RECHAZADA:r.EN_REVISION,this.tabIndex=o.tab,console.log(this.tabIndex),this.getDetalle(this.selectedTab))})}getDetalle(a){this.subcription$=this.consumoService.getDetalle(a).pipe(E(o=>(o.data.forEach(s=>{s.fechaCreacion=this.datePipe.transform(s.fechaCreacion,"dd/MM/yyyy"),s.montoConsumo=this.currencyPipe.transform(s.montoConsumo,"USD","symbol","1.2-2"),s.montoCuotas=this.currencyPipe.transform(s.montoCuotas,"USD","symbol","1.2-2")}),o))).subscribe(o=>{o?this.data=o.data:this.data=[]},o=>{this.data=[]})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getDetalle(this.selectedTab),this.listenGrid()}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=x({type:n,selectors:[["app-grid-consumos"]],standalone:!0,features:[O([I,D]),_],decls:20,vars:6,consts:[["tabGroup",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","shrink-0","items-center","sm:ml-4","sm:mt-0"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:overflow-y-auto","bg-gray-100"],["mat-stretch-tabs","false",1,"sm:px-2",3,"selectedIndexChange","selectedTabChange","animationDuration","selectedIndex"],["label","En revisi\xF3n"],["matTabContent",""],["label","Aprobados"],["label","Pagados"],["label","Rechazados"],[4,"ngIf"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(o,s){if(o&1){let P=T();l(0,"div",1)(1,"div",2)(2,"div",3),C(3,"Detalle consumos"),d(),l(4,"div",4)(5,"mat-form-field",5),f(6,"mat-icon",6)(7,"input",7),d()()(),l(8,"div",8)(9,"div",9)(10,"mat-tab-group",10,0),G("selectedIndexChange",function(b){return S(P),w(s.tabIndex,b)||(s.tabIndex=b),A(b)}),M("selectedTabChange",function(b){return S(P),A(s.tabChanged(b))}),l(12,"mat-tab",11),p(13,X,1,1,"ng-template",12),d(),l(14,"mat-tab",13),p(15,ee,1,1,"ng-template",12),d(),l(16,"mat-tab",14),p(17,oe,1,1,"ng-template",12),d(),l(18,"mat-tab",15),p(19,ae,1,1,"ng-template",12),d()()()()()}o&2&&(c(5),i("subscriptSizing","dynamic"),c(),i("svgIcon","heroicons_solid:magnifying-glass"),c(),i("autocomplete","off")("placeholder","Buscar"),c(3),i("animationDuration","500"),R("selectedIndex",s.tabIndex))},dependencies:[Z,B,z,H,$,W,U,N]});let e=n;return e})();var q=(()=>{let n=class n{constructor(){this.toasService=m(j),this.fuseService=m(k),this.estadosDatosService=m(y),this.detalleConsumoService=m(v),this.activatedRoute=m(V),this.idCredito=""}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getDetalle(this.idCredito)}getDetalle(a){this.subcription$=this.detalleConsumoService.getConsumo(a).subscribe(o=>{console.log(o)})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=x({type:n,selectors:[["app-form-consumos"]],standalone:!0,features:[_],decls:2,vars:0,template:function(o,s){o&1&&(l(0,"p"),C(1,"form-consumos works!"),d())}});let e=n;return e})();var Me=[{path:"",component:L},{path:"detalle/:id",component:q}];export{Me as default};
