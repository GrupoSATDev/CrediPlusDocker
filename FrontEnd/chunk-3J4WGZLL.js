import{a as J}from"./chunk-KUZAVRVO.js";import{a as We}from"./chunk-C6WGJZGF.js";import{a as Ze}from"./chunk-ZS22S3VX.js";import{a as Xe}from"./chunk-34YYEJBQ.js";import{a as Ye}from"./chunk-3L6CDPYN.js";import{a as et}from"./chunk-GK56UXII.js";import{a as ze,b as Ue,c as qe}from"./chunk-VMONEH2L.js";import{a as Je,b as Ke}from"./chunk-5E3BI53K.js";import{a as He}from"./chunk-HCQY566C.js";import{a as tt}from"./chunk-5FKKWCWN.js";import{a as ae}from"./chunk-6IEWE3OU.js";import{a as Qe}from"./chunk-24W6POED.js";import{a as Ge}from"./chunk-HKOJEADL.js";import{a as Le}from"./chunk-UFLWJOQO.js";import{a as ne}from"./chunk-4WJQLHI3.js";import{a as Y}from"./chunk-HDKW2ETT.js";import{a as Be}from"./chunk-YRFWKKCQ.js";import{a as Oe}from"./chunk-W4ZGSDEU.js";import"./chunk-ZVTEZKTX.js";import{g as Te}from"./chunk-WPQBWK4Z.js";import{a as De,b as Ie,c as Ne}from"./chunk-4EGREALI.js";import"./chunk-D266PZ43.js";import{C as Re,G as Z,b as Fe,e as we,i as z,l as ke,p as Me,q as je,u as Ae,w as $e,x as Ve,z as Pe}from"./chunk-BFUN2CON.js";import{$ as xe,Q as ye,R as Ee,ea as U,ja as q}from"./chunk-PKP5UGVL.js";import"./chunk-NSFGWBZH.js";import{a as N}from"./chunk-QLANGENB.js";import{f as Ce,g as be,i as _e,j as oe,s as I}from"./chunk-D7SIZTGA.js";import{$b as c,Ea as B,Fb as l,Gb as o,Hb as p,Ib as v,Jb as S,Lb as ge,Rb as D,Tb as ie,W as de,Y as b,Za as ue,_b as j,aa as x,ab as n,ac as E,bb as G,bc as H,c as pe,cc as he,fa as C,ga as f,hc as ve,ic as L,la as O,q as te,qc as _,rc as y,sb as u,tc as Se,ua as fe,ub as a,wa as k,xa as M}from"./chunk-KIIQGHZ6.js";import{a as T,d as R}from"./chunk-NEB6MB4Y.js";var it=(()=>{let t=class t{constructor(r,i){this._http=r,this.appSettings=i}getCargos(){return this._http.get(this.appSettings.cargos.url.base)}postCargos(r){return delete r.id,this._http.post(this.appSettings.cargos.url.base,r)}putCargos(r){let i=r.id;return delete r.id,this._http.put(`${this.appSettings.cargos.url.base}/${i}`,r)}};t.\u0275fac=function(i){return new(i||t)(C(I),C(N))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ot=(()=>{let t=class t{constructor(r,i){this._http=r,this.appSettings=i}getRiesgos(){return this._http.get(this.appSettings.riesgos.url.base)}getRiesgo(r){return this._http.get(`${this.appSettings.riesgos.url.base}/${r}`)}};t.\u0275fac=function(i){return new(i||t)(C(I),C(N))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var nt=(()=>{let t=class t{constructor(r,i){this._http=r,this.appSettings=i}getContratos(){return this._http.get(this.appSettings.tipoContratos.url.base)}};t.\u0275fac=function(i){return new(i||t)(C(I),C(N))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var at=(()=>{let t=class t{constructor(r,i){this._http=r,this.appSettings=i}getDeducciones(){return this._http.get(this.appSettings.deduccionesLegales.url.base)}};t.\u0275fac=function(i){return new(i||t)(C(I),C(N))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function K(e){e||(fe(K),e=f(B));let t=new pe(m=>e.onDestroy(m.next.bind(m)));return m=>m.pipe(de(t))}function mt(e,t){if(e&1&&(v(0),p(1,"img",56),S()),e&2){let m=ie();n(),a("src",m.image,ue)("alt","Profile avatar")}}function st(e,t){if(e&1&&(l(0,"div",57),c(1),o()),e&2){let m,r=ie();n(),H(" ",(m=r.form.get("primerNombre").value.charAt(0))!==null&&m!==void 0?m:"P"," ")}}function ct(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function pt(e,t){if(e&1&&(v(0),u(1,ct,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function dt(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function ft(e,t){if(e&1&&(v(0),u(1,dt,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function ut(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function gt(e,t){if(e&1&&(v(0),u(1,ut,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function ht(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function vt(e,t){if(e&1&&(v(0),u(1,ht,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function St(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.razonSocial)}}function Ct(e,t){if(e&1&&(v(0),u(1,St,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function bt(e,t){if(e&1&&(v(0),l(1,"mat-form-field",22)(2,"mat-label"),c(3,"Fin de contrato"),o(),p(4,"input",31)(5,"mat-datepicker-toggle",32)(6,"mat-datepicker",null,5),o(),S()),e&2){let m=j(7);n(4),a("matDatepicker",m)("formControlName","fechaFinContrato"),n(),a("for",m)}}function _t(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function yt(e,t){if(e&1&&(v(0),u(1,_t,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function Et(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),he("Porcentaje salud: ",m.porcentajeSalud,"% - Porcentaje pensi\xF3n: ",m.porcentajePension,"%")}}function xt(e,t){if(e&1&&(v(0),u(1,Et,2,3,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function Dt(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function It(e,t){if(e&1&&(v(0),u(1,Dt,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function Nt(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function Ft(e,t){if(e&1&&(v(0),u(1,Nt,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}function wt(e,t){if(e&1&&(l(0,"mat-option",59),c(1),o()),e&2){let m=t.$implicit;a("value",m.id),n(),E(m.nombre)}}function Tt(e,t){if(e&1&&(v(0),u(1,wt,2,2,"mat-option",58),S()),e&2){let m=t.ngIf;n(),a("ngForOf",m.data)}}var kt={validation:!1},me=(()=>{let t=class t{constructor(){this.fb=f(Pe),this.dialogRef=f(De),this.fuseService=f(Te),this.estadosDatosService=f(Y),this.toasService=f(Le),this.tiposDocumentosService=f(et),this._locacionService=f(He),this.generoService=f(tt),this.empresaClienteService=f(Ze),this.datePipe=f(oe),this.empleadosServices=f(J),this.cargosServices=f(it),this.riesgosServices=f(ot),this.bancosServices=f(We),this.swalService=f(Qe),this.destroyedRef=f(B),this.departamentos$=this._locacionService.getDepartamentos().pipe(b(r=>{let i=r.data,s=this._matData;if(i&&!s.edit){this.form.get("idDepartamento").setValue(i[0].id);let d=this.form.get("idDepartamento").value;this.getMunicipios(d)}})),this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&this.form.get("idTipoDoc").setValue(i[3].id)})),this.generos$=this.generoService.getGeneros().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&this.form.get("idGenero").setValue(i[1].id)})),this.empresasClientes$=this.empresaClienteService.getEmpresasClientes().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&this.form.get("idSubEmpresa").setValue(i[0].id)})),this.cargos$=this.cargosServices.getCargos(),this.riesgos$=this.riesgosServices.getRiesgos().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&this.form.get("idNivelRiesgo").setValue(i[0].id)})),this.bancos$=this.bancosServices.getBancos().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&this.form.get("idBanco").setValue(i[0].id)})),this._matData=f(Ie),this.tipoCuentasService=f(Xe),this.tipoCuentas$=this.tipoCuentasService.getTipoCuentas().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&this.form.get("idTipoCuenta").setValue(i[0].id)})),this.tipoContratosService=f(nt),this.tipoContratos$=this.tipoContratosService.getContratos().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&this.form.get("idTipoContrato").setValue(i[0].id)})),this.deduccioLegalService=f(at),this.deduccion$=this.deduccioLegalService.getDeducciones().pipe(b(r=>{let i=r.data,s=this._matData;i&&!s.edit&&(this.form.get("idDeduccionLegal").setValue(i[0].id),this.porcentajeSalud=i[0].porcentajeSalud,this.porcentajePension=i[0].porcentajePension,this.sumaPorcentaje=this.porcentajePension+this.porcentajeSalud)})),this.profile={avatar:"",name:"Pedro"}}ngOnInit(){this.createForm();let r=this._matData;if(r.edit){let s=r.data,i=s,{estado:d,idDepartamento:g,fechaNacimiento:h,fechaInicioContrato:$,fechaFinContrato:Q}=i,W=R(i,["estado","idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato"]),X=new Date(h),F=new Date($),w=new Date(Q);this.municipios$=this._locacionService.getMunicipio(g),this.form.patchValue(T({fechaNacimiento:X,fechaInicioContrato:new Date(F.getFullYear(),F.getMonth(),F.getDate()),fechaFinContrato:new Date(w.getFullYear(),w.getMonth(),w.getDate()),idDepartamento:g,estado:d=="Activo"},W)),console.log(this.form.getRawValue()),this.image=`data:image/png;base64,  ${s.foto}`}this.setCampoValue()}setCampoValue(){this.form.get("salarioBase").valueChanges.pipe(K(this.destroyedRef)).subscribe(()=>this.calcularCampo()),this.form.get("otroIngreso").valueChanges.pipe(K(this.destroyedRef)).subscribe(()=>this.calcularCampo())}calcularCampo(){let r=this.form.get("salarioBase")?.value||0,i=this.form.get("otroIngreso")?.value||0,s=r+i-r*this.sumaPorcentaje/100,d=(r+i)*this.porcentajeSalud/100,g=(r+i)*this.porcentajePension/100,h=s*30/100;this.form.get("salarioDevengado").setValue(s),this.form.get("salud").setValue(d),this.form.get("pension").setValue(g),this.form.get("capacidadEndeudamiento").setValue(h)}onFileSelected(r){let i=r.target;if(i.files&&i.files.length>0){let s=i.files[0],d=new FileReader;d.onload=()=>{let g=d.result;this.image=g;let h=g.split(",")[1];this.form.get("foto").setValue(h)},d.readAsDataURL(s)}}onSelected(r){let i=r.value;this.getMunicipios(i)}getMunicipios(r){this.municipios$=this._locacionService.getMunicipio(r).pipe(b(i=>{let s=i.data,d=this._matData;s&&!d.edit&&this.form.get("idMunicipio").setValue(s[0].id)}))}onSave(){if(this.form.valid)if(this._matData.edit){let i=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:g,fechaInicioContrato:h,fechaFinContrato:$,salarioDevengado:Q,salud:W,pension:X}=i,F=R(i,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado","salud","pension"]),w=this.datePipe.transform(g,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),ee=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),V=this.datePipe.transform($,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),se=T({fechaNacimiento:w,fechaInicioContrato:ee,fechaFinContrato:V},F);this.fuseService.open(T({},ne)).afterClosed().subscribe(P=>{P==="confirmed"?this.empleadosServices.putEmpleados(se).subscribe(lt=>{this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro actualizado con exito!",timer:4e3}),this.closeDialog()},lt=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al actualizar el registro!",timer:4e3})}):this.closeDialog()})}else{let r=this.form.getRawValue(),{idDepartamento:d,fechaNacimiento:g,fechaInicioContrato:h,fechaFinContrato:$,salarioDevengado:Q,salud:W,pension:X}=r,F=R(r,["idDepartamento","fechaNacimiento","fechaInicioContrato","fechaFinContrato","salarioDevengado","salud","pension"]),w=this.datePipe.transform(g,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),ee=this.datePipe.transform(h,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),V=T({fechaNacimiento:w,fechaInicioContrato:ee,fechaFinContrato:"0001-01-01T00:00:00+00:00"},F);console.log(V),this.fuseService.open(T({},ne)).afterClosed().subscribe(ce=>{ce==="confirmed"?this.empleadosServices.postEmpleados(V).subscribe(P=>{console.log(P),this.estadosDatosService.stateGrid.next(!0),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.closeDialog()},P=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})}):this.closeDialog()})}}createForm(){this.form=this.fb.group({id:[null],primerNombre:[""],segundoNombre:[""],primerApellido:[""],segundoApellido:[""],idTipoDoc:[""],numDoc:[""],idDepartamento:[""],idMunicipio:[""],telefono:[""],telefono2:[""],direccion:[""],idGenero:[""],correo:[""],cargo:[""],fechaNacimiento:[""],fechaInicioContrato:[""],fechaFinContrato:["null"],numCuentaBancaria:[""],capacidadEndeudamiento:[""],idNivelRiesgo:[""],idBanco:[""],idTipoCuenta:[""],foto:[""],firma:[""],idSubEmpresa:[""],idTipoContrato:[""],salarioBase:[0],otroIngreso:[0],idDeduccionLegal:[""],salarioDevengado:[0],salud:[0],pension:[0],estado:["true"]})}closeDialog(){this.dialogRef.close()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=O({type:t,selectors:[["app-form-empleados"]],standalone:!0,features:[ve([{provide:Ee,useClass:Ye},{provide:ye,useValue:"en-GB"},oe,Je(kt)]),L],decls:200,vars:79,consts:[["noAvatar",""],["twoStepToggle",""],["picker",""],["data",""],["inicio",""],["fin",""],[1,"w-full","sm:bg-card","sm:rounded-2xl","sm:mx-0","mx-auto"],[1,""],[1,"mt-8","text-3xl","font-semibold","leading-tight","tracking-tight","text-center"],[1,"mt-8","space-y-8",3,"formGroup"],[1,"group","relative","mx-auto","mt-8","flex","h-40","w-40","flex-0","rounded-full","mb-8"],[1,"absolute","inset-0","hidden","cursor-pointer","flex-col","items-center","justify-center","rounded-full","bg-gray-800","bg-opacity-80","backdrop-blur","backdrop-filter","group-hover:flex"],[1,"text-white",3,"svgIcon"],[1,"mx-6","mt-2","text-center","font-medium","text-white"],["type","file",1,"absolute","inset-0","opacity-0","cursor-pointer",3,"change"],[4,"ngIf","ngIfElse"],[1,"font-bold","mb-4","text-2xl"],[1,"flex","mb-4"],[1,"fcursor-pointer",3,"click"],[1,"font-medium","leading-6"],[1,"ml-4",3,"color","formControlName"],[1,"flex","flex-col","sm:flex-row","gap-2.5"],["floatLabel","always",1,"w-full"],["matInput","","placeholder","Primer nombre",3,"formControlName"],["matInput","","placeholder","Segundo nombre",3,"formControlName"],["matInput","","placeholder","Primer apellido",3,"formControlName"],["matInput","","placeholder","Segundo apellido",3,"formControlName"],["placeholder","Tipo de documento",3,"formControlName"],[4,"ngIf"],["matInput","","placeholder","N\xFAmero de identificaci\xF3n",3,"formControlName"],["placeholder","G\xE9nero",3,"formControlName"],["matInput","","placeholder","dd/mm/yyyy",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["placeholder","Departamento",3,"selectionChange","formControlName"],["placeholder","Ciudad",3,"formControlName"],["matInput","","placeholder","Direcci\xF3n",3,"formControlName"],["matInput","","placeholder","Celular",3,"formControlName"],["matInput","","placeholder","Tel\xE9fono",3,"formControlName"],["matInput","","placeholder","Correo electronico",3,"formControlName"],["placeholder","Empresa",3,"formControlName"],["matInput","","placeholder","Cargo",3,"formControlName"],["placeholder","Tipo de contrato",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario base",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Otros ingresos",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salario devengdado",3,"readonly","formControlName"],["placeholder","Deducciones legales",3,"formControlName","disabled"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Salud",3,"readonly","formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Pensi\xF3n",3,"readonly","formControlName"],["placeholder","Nivel de riesgo",3,"formControlName"],["matInput","","mask","separator.0","thousandSeparator",".","placeholder","Capacidad de endeudamiento",3,"formControlName","readonly"],["placeholder","Tipo de cuenta",3,"formControlName"],["placeholder","Bancos",3,"formControlName"],["matInput","","placeholder","N\xFAmero de cuenta",3,"formControlName"],[1,"flex","flex-wrap","justify-end","gap-2.5"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-credigray-100","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold",3,"click","color"],[1,"h-full","w-full","rounded-full","object-cover",3,"src","alt"],[1,"flex","h-full","w-full","items-center","justify-center","rounded-full","bg-gray-200","text-8xl","font-semibold","uppercase","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,s){if(i&1){let d=ge();l(0,"div",6)(1,"div",7)(2,"div",8),c(3),o(),l(4,"form",9)(5,"div",10)(6,"div",11),p(7,"mat-icon",12),l(8,"div",13),c(9," Cambiar foto "),o(),l(10,"input",14),D("change",function(h){return k(d),M(s.onFileSelected(h))}),o()(),u(11,mt,2,2,"ng-container",15)(12,st,2,1,"ng-template",null,0,Se),o(),l(14,"div")(15,"p",16),c(16,"Informaci\xF3n general"),o(),l(17,"div",17)(18,"div",18),D("click",function(){k(d);let h=j(22);return M(h.toggle())}),l(19,"div",19),c(20),o()(),p(21,"mat-slide-toggle",20,1),o(),l(23,"div",21)(24,"mat-form-field",22)(25,"mat-label"),c(26,"Primer nombre"),o(),p(27,"input",23),o(),l(28,"mat-form-field",22)(29,"mat-label"),c(30,"Segundo nombre"),o(),p(31,"input",24),o()(),l(32,"div",21)(33,"mat-form-field",22)(34,"mat-label"),c(35,"Primer apellido"),o(),p(36,"input",25),o(),l(37,"mat-form-field",22)(38,"mat-label"),c(39,"Segundo apellido"),o(),p(40,"input",26),o()(),l(41,"div",21)(42,"mat-form-field",22)(43,"mat-label"),c(44,"Tipo de documento"),o(),l(45,"mat-select",27),u(46,pt,2,1,"ng-container",28),_(47,"async"),o()(),l(48,"mat-form-field",22)(49,"mat-label"),c(50,"N\xFAmero de identificaci\xF3n"),o(),p(51,"input",29),o()(),l(52,"div",21)(53,"mat-form-field",22)(54,"mat-label"),c(55,"G\xE9nero"),o(),l(56,"mat-select",30),u(57,ft,2,1,"ng-container",28),_(58,"async"),o()(),l(59,"mat-form-field",22)(60,"mat-label"),c(61,"Fecha de nacimiento"),o(),p(62,"input",31)(63,"mat-datepicker-toggle",32)(64,"mat-datepicker",null,2),o()()(),l(66,"div")(67,"p",16),c(68,"Informaci\xF3n demogr\xE1fica"),o(),l(69,"div",21)(70,"mat-form-field",22)(71,"mat-label"),c(72,"Departamento"),o(),l(73,"mat-select",33,3),D("selectionChange",function(h){return k(d),M(s.onSelected(h))}),u(75,gt,2,1,"ng-container",28),_(76,"async"),o()(),l(77,"mat-form-field",22)(78,"mat-label"),c(79,"Ciudad"),o(),l(80,"mat-select",34),u(81,vt,2,1,"ng-container",28),_(82,"async"),o()()(),l(83,"div",21)(84,"mat-form-field",22)(85,"mat-label"),c(86,"Direcci\xF3n"),o(),p(87,"input",35),o(),l(88,"mat-form-field",22)(89,"mat-label"),c(90,"Celular"),o(),p(91,"input",36),o()(),l(92,"div",21)(93,"mat-form-field",22)(94,"mat-label"),c(95,"Tel\xE9fono"),o(),p(96,"input",37),o(),l(97,"mat-form-field",22)(98,"mat-label"),c(99,"Email"),o(),p(100,"input",38),o()(),l(101,"div")(102,"p",16),c(103,"Informaci\xF3n contractual"),o(),l(104,"div",21)(105,"mat-form-field",22)(106,"mat-label"),c(107,"Empresa"),o(),l(108,"mat-select",39),u(109,Ct,2,1,"ng-container",28),_(110,"async"),o()(),l(111,"mat-form-field",22)(112,"mat-label"),c(113,"Cargo"),o(),p(114,"input",40),o()(),l(115,"div",21)(116,"mat-form-field",22)(117,"mat-label"),c(118,"Inicio de contrato"),o(),p(119,"input",31)(120,"mat-datepicker-toggle",32)(121,"mat-datepicker",null,4),o(),u(123,bt,8,3,"ng-container",28),o(),l(124,"div",21)(125,"mat-form-field",22)(126,"mat-label"),c(127,"Tipo de contrato"),o(),l(128,"mat-select",41),u(129,yt,2,1,"ng-container",28),_(130,"async"),o()()(),l(131,"div",21)(132,"mat-form-field",22)(133,"mat-label"),c(134,"Salario base"),o(),p(135,"input",42),o(),l(136,"mat-form-field",22)(137,"mat-label"),c(138,"Otros ingresos"),o(),p(139,"input",43),o()(),l(140,"div",21)(141,"mat-form-field",22)(142,"mat-label"),c(143,"Salario devengado"),o(),p(144,"input",44),o()(),l(145,"div",21)(146,"mat-form-field",22)(147,"mat-label"),c(148,"Deducciones legales"),o(),l(149,"mat-select",45),u(150,xt,2,1,"ng-container",28),_(151,"async"),o()()(),l(152,"div",21)(153,"mat-form-field",22)(154,"mat-label"),c(155,"Salud"),o(),p(156,"input",46),o(),l(157,"mat-form-field",22)(158,"mat-label"),c(159,"Pensi\xF3n"),o(),p(160,"input",47),o()(),l(161,"div",21)(162,"mat-form-field",22)(163,"mat-label"),c(164,"Nivel de riesgo"),o(),l(165,"mat-select",48),u(166,It,2,1,"ng-container",28),_(167,"async"),o()(),l(168,"mat-form-field",22)(169,"mat-label"),c(170,"Capacidad de endeudamiento"),o(),p(171,"input",49),o()()(),l(172,"div")(173,"p",16),c(174,"Informaci\xF3n bancaria"),o(),l(175,"div",21)(176,"mat-form-field",22)(177,"mat-label"),c(178,"Tipo de cuenta"),o(),l(179,"mat-select",50),u(180,Ft,2,1,"ng-container",28),_(181,"async"),o()()(),l(182,"div",21)(183,"mat-form-field",22)(184,"mat-label"),c(185,"Bancos"),o(),l(186,"mat-select",51),u(187,Tt,2,1,"ng-container",28),_(188,"async"),o()(),l(189,"mat-form-field",22)(190,"mat-label"),c(191,"N\xFAmero de cuenta bancaria"),o(),p(192,"input",52),o()()()(),l(193,"div",53)(194,"button",54),D("click",function(){return k(d),M(s.closeDialog())}),l(195,"span"),c(196," Cancelar "),o()(),l(197,"button",55),D("click",function(){return k(d),M(s.onSave())}),l(198,"span"),c(199," Guardar "),o()()()()()()}if(i&2){let d=j(13),g=j(65),h=j(122);n(3),H(" ",s._matData.edit?"Actualizar trabajador":"Agregar trabajador"," "),n(),a("formGroup",s.form),n(3),a("svgIcon","heroicons_outline:camera"),n(4),a("ngIf",s.form.get("foto").value)("ngIfElse",d),n(9),H(" Estado ",s.form.get("estado").value?"Activo":"Inactivo"," "),n(),a("color","primary")("formControlName","estado"),n(6),a("formControlName","primerNombre"),n(4),a("formControlName","segundoNombre"),n(5),a("formControlName","primerApellido"),n(4),a("formControlName","segundoApellido"),n(5),a("formControlName","idTipoDoc"),n(),a("ngIf",y(47,59,s.tiposDocumentos$)),n(5),a("formControlName","numDoc"),n(5),a("formControlName","idGenero"),n(),a("ngIf",y(58,61,s.generos$)),n(5),a("matDatepicker",g)("formControlName","fechaNacimiento"),n(),a("for",g),n(10),a("formControlName","idDepartamento"),n(2),a("ngIf",y(76,63,s.departamentos$)),n(5),a("formControlName","idMunicipio"),n(),a("ngIf",y(82,65,s.municipios$)),n(6),a("formControlName","direccion"),n(4),a("formControlName","telefono"),n(5),a("formControlName","telefono2"),n(4),a("formControlName","correo"),n(8),a("formControlName","idSubEmpresa"),n(),a("ngIf",y(110,67,s.empresasClientes$)),n(5),a("formControlName","cargo"),n(5),a("matDatepicker",h)("formControlName","fechaInicioContrato"),n(),a("for",h),n(3),a("ngIf",s.form.get("estado").value==!1),n(5),a("formControlName","idTipoContrato"),n(),a("ngIf",y(130,69,s.tipoContratos$)),n(6),a("formControlName","salarioBase"),n(4),a("formControlName","otroIngreso"),n(5),a("readonly",!0)("formControlName","salarioDevengado"),n(5),a("formControlName","idDeduccionLegal")("disabled",!0),n(),a("ngIf",y(151,71,s.deduccion$)),n(6),a("readonly",!0)("formControlName","salud"),n(4),a("readonly",!0)("formControlName","pension"),n(5),a("formControlName","idNivelRiesgo"),n(),a("ngIf",y(167,73,s.riesgos$)),n(5),a("formControlName","capacidadEndeudamiento")("readonly",!0),n(8),a("formControlName","idTipoCuenta"),n(),a("ngIf",y(181,75,s.tipoCuentas$)),n(6),a("formControlName","idBanco"),n(),a("ngIf",y(188,77,s.bancos$)),n(5),a("formControlName","numCuentaBancaria"),n(2),a("color","primary"),n(3),a("color","primary")}},dependencies:[U,z,Z,Fe,Re,Ae,ke,Me,je,$e,Ve,_e,xe,Be,Ce,be,ze,Ue,qe,we,q,Ke,Oe],styles:[".custom-dialog-container{width:100%}@media (min-width: 1280px){  .custom-dialog-container{width:50%}}"]});let e=t;return e})();var rt=(()=>{let t=class t{constructor(r,i,s){this._matDialog=r,this.estadoDatosService=i,this.empleadoService=s,this.data=[],this.columns=["Estado","Documento","Identificaci\xF3n","Nombre completo","Tel\xE9fono","Cargo"],this.columnPropertyMap={Estado:"estado",Documento:"nombreTipoDocumento",Identificaci\u00F3n:"numDoc","Nombre completo":"nombreCompleto",Tel\u00E9fono:"telefono",Cargo:"cargo"},this.buttons=[{label:"Edit",icon:"edit",action:d=>{console.log("Editing",d),this.selectedData=d,this.onEdit()}}]}onNew(){this._matDialog.open(me,{autoFocus:!1,data:{edit:!1},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}onEdit(){this._matDialog.open(me,{autoFocus:!1,data:{edit:!0,data:this.selectedData},maxHeight:"90vh",disableClose:!0,panelClass:"custom-dialog-container"})}getEmpleados(){this.subcription$=this.empleadoService.getEmpleados().pipe(te(r=>(r.data.forEach(i=>{i.estado?i.estado=ae.ACTIVO:i.estado=ae.INACTIVO}),r)),te(r=>(r.data.forEach(i=>{i&&(i.nombreCompleto=i.primerNombre.concat(" ",i.segundoNombre?i.segundoNombre+" ":"",i.primerApellido," ",i.segundoApellido))}),r))).subscribe(r=>{this.data=r.data})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(i=>{i&&this.getEmpleados()})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getEmpleados(),this.listenGrid()}};t.\u0275fac=function(i){return new(i||t)(G(Ne),G(Y),G(J))},t.\u0275cmp=O({type:t,selectors:[["app-grid-empleados"]],standalone:!0,features:[L],decls:15,vars:11,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],["mat-flat-button","",1,"mt-2","w-full","bg-crediblue-50","rounded-lg","transition","duration-200","text-white","font-semibold","sm:ml-4","sm:mt-0","sm:w-auto",3,"click","color"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"]],template:function(i,s){i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),c(3,"Trabajadores"),o(),l(4,"div",3)(5,"mat-form-field",4),p(6,"mat-icon",5)(7,"input",6),o(),l(8,"button",7),D("click",function(){return s.onNew()}),p(9,"mat-icon",8),l(10,"span",9),c(11,"Agregar"),o()()()(),l(12,"div",10)(13,"div",11),p(14,"app-custom-table",12),o()()()),i&2&&(n(5),a("subscriptSizing","dynamic"),n(),a("svgIcon","heroicons_solid:magnifying-glass"),n(),a("autocomplete","off")("placeholder","Buscar"),n(),a("color","primary"),n(),a("svgIcon","heroicons_outline:plus"),n(5),a("columns",s.columns)("displayedColumns",s.columns)("columnPropertyMap",s.columnPropertyMap)("data",s.data)("buttons",s.buttons))},dependencies:[Ge,U,z,q,Z]});let e=t;return e})();var Ui=[{path:"",component:rt}];export{Ui as default};
