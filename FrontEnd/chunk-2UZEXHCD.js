import{a as Z}from"./chunk-PAE36YAW.js";import{a as b}from"./chunk-6IEWE3OU.js";import{a as P}from"./chunk-FMZRTJU7.js";import{a as Y}from"./chunk-OFEOPKCC.js";import{a as X}from"./chunk-33XTDNRI.js";import"./chunk-UHDIKLYJ.js";import"./chunk-CHOSRW5W.js";import{c as U}from"./chunk-JND367CQ.js";import"./chunk-7U4JZNVG.js";import{C as W,G as E,b as L,i as S,p as q,s as J,v as K,z as Q}from"./chunk-JLNARVDU.js";import{$ as B,ja as x}from"./chunk-DARKUWJB.js";import"./chunk-EENLYY7H.js";import{a as H}from"./chunk-DDPHQILY.js";import{b as z,d as y}from"./chunk-DJAHQBBJ.js";import{f as A,g as G,i as N,j as f,l as u,r as R}from"./chunk-NP3GUERB.js";import{$ as I,Cb as m,Db as l,Eb as c,Fb as _,Gb as j,Ob as O,X as D,Yb as p,Za as n,Zb as $,_a as F,dc as g,ea as T,ec as C,fa as a,ka as v,mc as V,nc as k,pb as w,q as d,rb as s}from"./chunk-32HXX3OB.js";import"./chunk-NEB6MB4Y.js";var M=(()=>{let r=class r{constructor(o,e){this._http=o,this.appSettings=e}getCobros(){return this._http.get(this.appSettings.cobroTrabajadores.url.base)}getCobroEmpleado(o){return this._http.get(`${this.appSettings.cobroTrabajadores.url.base}/${o}`)}getCobrosGrid(o){return this._http.get(`${this.appSettings.cobroTrabajadores.url.baseTabla}/${o}`)}};r.\u0275fac=function(e){return new(e||r)(T(R),T(H))},r.\u0275prov=I({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();function ie(i,r){if(i&1&&(m(0,"mat-option",14),p(1),l()),i&2){let h=r.$implicit;s("value",h.id),n(),$(h.nombre)}}function ae(i,r){if(i&1&&(_(0),w(1,ie,2,2,"mat-option",13),j()),i&2){let h=r.ngIf;n(),s("ngForOf",h.data)}}var te=(()=>{let r=class r{constructor(o){this._matDialog=o,this.datePipe=a(f),this.router=a(y),this.estadoDatosService=a(Y),this.currencyPipe=a(u),this.cobroTrabadorService=a(M),this.estadoCreditosService=a(Z),this.fb=a(Q),this.estados=new J([""]),this.searchTerm="",this.estadoCreditos$=this.estadoCreditosService.getEstadoCobros().pipe(D(e=>{let t=e.data;t&&(this.estados.setValue(t[1].id),this.cobros(t[1].id))})),this.data=[],this.columns=["Nombre completo","Deuda total","Empresa","Estado"],this.columnPropertyMap={"Nombre completo":"nombreTrabajador","Deuda total":"deudaTotal",Empresa:"nombreSubEmpresa",Estado:"nombreEstadoCredito"},this.buttons=[{label:"View",icon:"visibility",action:e=>{console.log("Editing",e),this.selectedData=e,this.router.navigate(["pages/gestion-cobros/cobros/cobro",this.selectedData.idTrabajador])}}]}onSelect(o){let e=o.value;this.cobros(e)}cobros(o){this.subcription$=this.cobroTrabadorService.getCobrosGrid(o).pipe(d(e=>(e.data.forEach(t=>{t.estado?t.estado=b.ACTIVO:t.estado=b.INACTIVO}),e)),d(e=>(e.data.forEach(t=>{t.deudaTotal=this.currencyPipe.transform(t.deudaTotal,"USD","symbol","1.2-2")}),e))).subscribe(e=>{e?this.data=e.data:this.data=[]},e=>{this.data=[]})}getCobros(){this.subcription$=this.cobroTrabadorService.getCobros().pipe(d(o=>(o.data.forEach(e=>{e.estado?e.estado=b.ACTIVO:e.estado=b.INACTIVO}),o)),d(o=>(o.data.forEach(e=>{e.fechaCobro=this.datePipe.transform(e.fechaCobro,"dd/MM/yyyy"),e.valorPendiente=this.currencyPipe.transform(e.valorPendiente,"USD","symbol","1.2-2"),e.valorPago=e.valorPago?this.currencyPipe.transform(e.valorPago,"USD","symbol","1.2-2"):"-"}),o))).subscribe(o=>{o?this.data=o.data:this.data=[]},o=>{this.data=[]})}listenGrid(){this.estadoDatosService.stateGrid.asObservable().subscribe(e=>{})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.listenGrid()}};r.\u0275fac=function(e){return new(e||r)(F(U))},r.\u0275cmp=v({type:r,selectors:[["app-grid-cobros-empleados"]],standalone:!0,features:[g([f,u]),C],decls:17,vars:14,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","gap-2.5","sm:ml-4","sm:mt-0","sm:flex-row","sm:w-1/2"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-1/2",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"w-full","sm:w-1/2"],[3,"selectionChange","formControl"],[4,"ngIf"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons","searchTerm"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"div",1)(2,"div",2),p(3,"Cobro Trabajadores"),l(),m(4,"div",3)(5,"mat-form-field",4),c(6,"mat-icon",5)(7,"input",6),l(),m(8,"mat-form-field",7)(9,"mat-label"),p(10,"Estados"),l(),m(11,"mat-select",8),O("selectionChange",function(re){return t.onSelect(re)}),w(12,ae,2,1,"ng-container",9),V(13,"async"),l()()()(),m(14,"div",10)(15,"div",11),c(16,"app-custom-table",12),l()()()),e&2&&(n(5),s("subscriptSizing","dynamic"),n(),s("svgIcon","heroicons_solid:magnifying-glass"),n(),s("autocomplete","off")("placeholder","Buscar"),n(4),s("formControl",t.estados),n(),s("ngIf",k(13,12,t.estadoCreditos$)),n(4),s("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.data)("buttons",t.buttons)("searchTerm",t.searchTerm))},dependencies:[P,S,x,E,L,B,X,A,G,N,W,q,K]});let i=r;return i})();var oe=(()=>{let r=class r{constructor(){this.router=a(y),this.activatedRoute=a(z),this.cobroTrabadorService=a(M),this.idCredito="",this.datePipe=a(f),this.currencyPipe=a(u),this.columns=["Fecha de compra","Valor pendiente","Valor cuota","Cantidad cuotas","Estado"],this.columnPropertyMap={"Fecha de compra":"fechaCobro","Valor pendiente":"valorPendiente","Valor cuota":"montoCuota","Cantidad cuotas":"numCuota",Estado:"nombreEstadoCredito"}}ngOnDestroy(){}ngOnInit(){this.idCredito=this.activatedRoute.snapshot.paramMap.get("id"),this.getDetalle(this.idCredito)}getDetalle(o){this.subcription$=this.cobroTrabadorService.getCobroEmpleado(o).pipe(d(e=>(e.data.forEach(t=>{t.fechaCobro=this.datePipe.transform(t.fechaCobro,"dd/MM/yyyy"),t.valorPendiente=this.currencyPipe.transform(t.valorPendiente,"USD","symbol","1.2-2"),t.montoCuota=this.currencyPipe.transform(t.montoCuota,"USD","symbol","1.2-2")}),e))).subscribe(e=>{console.log(e),this.detalle=e.data})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v({type:r,selectors:[["app-form-cobros-empleados"]],standalone:!0,features:[g([f,u]),C],decls:11,vars:8,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","gap-2.5","sm:ml-4","sm:mt-0","sm:flex-row","sm:w-1/2"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-1/2",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[3,"columns","displayedColumns","columnPropertyMap","data"]],template:function(e,t){e&1&&(m(0,"div",0)(1,"div",1)(2,"div",2),p(3,"Cobro Trabajadores"),l(),m(4,"div",3)(5,"mat-form-field",4),c(6,"mat-icon",5)(7,"input",6),l()()(),m(8,"div",7)(9,"div",8),c(10,"app-custom-table",9),l()()()),e&2&&(n(5),s("subscriptSizing","dynamic"),n(),s("svgIcon","heroicons_solid:magnifying-glass"),n(),s("autocomplete","off")("placeholder","Buscar"),n(3),s("columns",t.columns)("displayedColumns",t.columns)("columnPropertyMap",t.columnPropertyMap)("data",t.detalle))},dependencies:[x,P,S,E]});let i=r;return i})();var Je=[{path:"",component:te},{path:"cobro/:id",component:oe}];export{Je as default};
