import{a as it}from"./chunk-ZDZCRNZ2.js";import{a as Ze,b}from"./chunk-NUDLMART.js";import{a as nt,b as at}from"./chunk-WQKAPECC.js";import{a as lt}from"./chunk-H25CSQ7Z.js";import{a as Je,b as Ue,c as Ke,d as Xe}from"./chunk-EIUXNWYD.js";import{a as Ye}from"./chunk-UTHMLIDY.js";import{a as et,b as tt,c as ot}from"./chunk-OPXIPHVN.js";import{a as rt}from"./chunk-XICZ7F6M.js";import{a as Qe}from"./chunk-W35ES4XE.js";import{a as Le}from"./chunk-3L6CDPYN.js";import{a as We}from"./chunk-4GDLIBBU.js";import{a as $e,b as He}from"./chunk-5E3BI53K.js";import{a as qe}from"./chunk-B3262OVV.js";import{a as U}from"./chunk-6IEWE3OU.js";import{a as ze}from"./chunk-24W6POED.js";import{a as ke}from"./chunk-HKOJEADL.js";import{a as Re}from"./chunk-UFLWJOQO.js";import{a as je}from"./chunk-4WJQLHI3.js";import{a as R}from"./chunk-HDKW2ETT.js";import{a as Be}from"./chunk-YRFWKKCQ.js";import"./chunk-ZVTEZKTX.js";import{g as De}from"./chunk-WPQBWK4Z.js";import{c as Se}from"./chunk-4EGREALI.js";import{h as ye}from"./chunk-D266PZ43.js";import{a as j}from"./chunk-DTC2A3GX.js";import"./chunk-QBODUMHZ.js";import{B as Ve,C as Oe,G as q,b as _e,c as Ee,i as B,l as Te,n as f,p as Ie,q as Ne,u as Ge,w as Ae,x as Me,z as Pe}from"./chunk-BFUN2CON.js";import{$ as Ce,Q as ve,R as xe,ea as k,ja as we}from"./chunk-PKP5UGVL.js";import"./chunk-WKKRDNHB.js";import"./chunk-NSFGWBZH.js";import{a as Fe}from"./chunk-X4MAXHGU.js";import{d as O,e as he}from"./chunk-EH2C4XHQ.js";import{e as ce,f as fe,g as V,i as be,j as C,m as J,s as ge}from"./chunk-D7SIZTGA.js";import{$b as a,Fb as i,Gb as e,Hb as u,Ib as w,Jb as D,Lb as G,Rb as T,Tb as h,Xb as re,Y as oe,Yb as ne,Zb as ae,_b as A,aa as ie,ab as n,ac as x,bc as W,ec as le,fa as H,fc as me,ga as p,gc as se,hc as M,ic as F,l as N,la as S,lc as de,q as $,qc as Z,rc as pe,sb as c,sc as ue,tc as P,ub as m,wa as _,xa as E,ya as z,za as Q}from"./chunk-KIIQGHZ6.js";import{a as L,d as te}from"./chunk-NEB6MB4Y.js";var mt=(()=>{let l=class l{};l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=S({type:l,selectors:[["app-main-desembolsos"]],standalone:!0,features:[F],decls:24,vars:0,consts:[[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","border-b","px-6","py-8","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-row","items-baseline","flex-wrap","gap-6","justify-center","overflow-hidden","sm:overflow-y-auto","bg-gray-100","sm:p-2"],[1,"filter-list","flex","w-full","max-w-lg","flex-col","p-8","sm:p-10","mt-6","shadow-xl","rounded-xl","bg-white","hover:shadow-2xl","transition-all","duration-300","transform","hover:scale-105"],[1,"flex","justify-between","items-center","mb-6"],[1,"flex","items-center","space-x-3"],[1,"font-semibold","text-2xl","text-blue-900"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7H7v6m6 0h5m-8 4H7m6 0h5"],["routerLink","/pages/gestion-creditos/desembolsos/listar",1,"w-full","py-3","text-white","bg-crediblue-50","hover:bg-blue-600","rounded-lg","font-semibold","text-sm","transition-all","duration-300","shadow-lg","hover:shadow-xl"],["routerLink","/pages/gestion-creditos/desembolsos/registrar",1,"w-full","py-3","text-white","bg-crediblue-50","hover:bg-blue-600","rounded-lg","font-semibold","text-sm","transition-all","duration-300","shadow-lg","hover:shadow-xl"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),a(3,"Desembolsos"),e()(),i(4,"div",3)(5,"div",4)(6,"fuse-card",5)(7,"div",6)(8,"div",7)(9,"span",8),a(10,"Listado de Desembolsos"),e(),z(),i(11,"svg",9),u(12,"path",10),e()()(),Q(),i(13,"button",11),a(14," Listado "),e()(),i(15,"fuse-card",5)(16,"div",6)(17,"div",7)(18,"span",8),a(19,"Solicitud de Desembolso"),e(),z(),i(20,"svg",9),u(21,"path",10),e()()(),Q(),i(22,"button",12),a(23," Solicitud desembolso "),e()()()()())},dependencies:[it,he]});let t=l;return t})();var st=(()=>{let l=class l{constructor(s,o){this._http=s,this.AppSettings=o}postDesembolso(s){return this._http.post(this.AppSettings.detalleConsumos.url.desembolsoBase,s)}};l.\u0275fac=function(o){return new(o||l)(H(ge),H(Fe))},l.\u0275prov=ie({token:l,factory:l.\u0275fac,providedIn:"root"});let t=l;return t})();var ut=["stepper"],ct=(t,l)=>({"bg-crediblue-50":t,"bg-credigray-100":l});function ft(t,l){if(t&1&&(i(0,"mat-option",34),a(1),e()),t&2){let d=l.$implicit;m("value",d.id),n(),x(d.nombre)}}function bt(t,l){if(t&1&&(w(0),c(1,ft,2,2,"mat-option",29),D()),t&2){let d=l.ngIf;n(),m("ngForOf",d.data)}}function gt(t,l){t&1&&(i(0,"mat-error"),a(1," El n\xFAmero de identificaci\xF3n es requerido!. "),e())}function ht(t,l){if(t&1&&(i(0,"fuse-alert",35),a(1),e()),t&2){let d=h();m("appearance","outline")("showIcon",!1)("type",d.alert.type)("@shake",d.alert.type==="error"),n(),W(" ",d.alert.message," ")}}function vt(t,l){t&1&&(i(0,"mat-error"),a(1,"El campo es requerido!"),e())}function xt(t,l){t&1&&(i(0,"mat-error"),a(1,"El valor es requerido!"),e())}function Ct(t,l){t&1&&(i(0,"mat-error"),a(1,"El valor ingresado no puede superar el cupo disponible!"),e())}function yt(t,l){if(t&1&&(i(0,"mat-option",34),a(1),e()),t&2){let d=l.$implicit;m("value",d.idTipoCuenta),n(),x(d.nombreBanco)}}function St(t,l){t&1&&(i(0,"mat-error"),a(1,"El campo es requerido!"),e())}function _t(t,l){if(t&1&&(i(0,"div",36)(1,"div",37)(2,"div",38)(3,"h2",39),a(4,"Resumen de desembolso"),e(),i(5,"p",40),a(6,"Revise los detalles"),e()(),i(7,"div",41)(8,"div",42)(9,"div")(10,"h3",43),a(11,"Fecha"),e()(),i(12,"p",44),a(13),Z(14,"date"),e()(),i(15,"div",42)(16,"div")(17,"h3",43),a(18,"N\xFAmero de comprobante"),e()(),i(19,"p",44),a(20),e()(),i(21,"div",42)(22,"div")(23,"h3",43),a(24,"Valor"),e()(),i(25,"p",44),a(26),e()(),i(27,"div",42)(28,"div")(29,"h3",43),a(30,"Cuenta de origen"),e()(),i(31,"p",44),a(32),e()(),i(33,"div",45)(34,"div")(35,"h3",43),a(36,"Cuenta destino"),e()(),i(37,"p",44),a(38),e()()()()()),t&2){let d=h();n(13),x(ue(14,5,d.detaleConsumo.fechaCreacion,"dd/MM/yyyy")),n(7),x(d.detaleConsumo.numeroFactura),n(6),x(d.detaleConsumo.montoConsumo),n(6),x(d.detaleConsumo.cuentaOrigen),n(6),x(d.detaleConsumo.cuentaDestino)}}var Et={validation:!1},dt=(()=>{let l=class l{constructor(){this.tiposDocumentosService=p(We),this.fuseService=p(De),this.estadosDatosService=p(R),this.toasService=p(Re),this.empleadosServices=p(Ye),this.tipoConsumosService=p(at),this.cuentasServices=p(lt),this.tipoCuentaService=p(Qe),this.datePipe=p(C),this.router=p(O),this.fb=p(Pe),this._locacionService=p(qe),this.detalleConsumo=p(rt),this.cuentas=[],this.tipoCuentas$=this.tipoCuentaService.getTipoCuentas(),this.desembolsoService=p(st),this.swalService=p(ze),this.showAlert=!1,this.alert={type:"success",message:""},this.tiposDocumentos$=this.tiposDocumentosService.getTiposDocumentos().pipe(oe(s=>{let o=s.data[3];o&&this.firstFormGroup.get("idTipoDoc").setValue(o.id)})),this.creditos=[],this.focus=focus,this.FormatoOptionsPipe=nt}ngOnDestroy(){}ngOnInit(){this.createForm(),this.getCuentas()}getCuentas(){this.subscription$=this.cuentasServices.getCuentas().subscribe(s=>{this.cuentas=s.data})}selected(s){let o=s.value;this.compareValor=o.cupoDisponible,this.thirdFormGroup.get("montoConsumo").setValidators(wt(this.compareValor)),this.thirdFormGroup.get("montoConsumo").updateValueAndValidity()}compareWithConstants(s){let o=s.value,r=this.secondFormGroup.get("idCredito")?.value;return!r||!r.montoConsumo?(console.error("No se encontr\xF3 el objeto idCredito o montoConsumo"),N(null)):(console.log(o),console.log(r.montoConsumo),o>r.montoConsumo?N({notEqual:!0}):N(null))}get montoConsumo(){return this.thirdFormGroup.get("montoConsumo")}get comprobante(){return this.thirdFormGroup.get("numeroFactura")}get cuentaDestino(){return this.thirdFormGroup.get("cuentaDestino")}onSearch(){let s=this.firstFormGroup.getRawValue();this.empleadosServices.getEmpleadoParams(s).subscribe(o=>{if(console.log(o),o){this.showAlert=!1;let r={numDoc:o.data.numDoc,primerNombre:o.data.primerNombre,segundoNombre:o.data.segundoNombre,primerApellido:o.data.primerApellido,segundoApellido:o.data.segundoApellido,idTrabajador:o.data.id,correo:o.data.correo,credito:o.data.creditos[0].numCredito+" - "+o.data.creditos[0].cupoDisponible,idCredito:o.data.creditos[0].id,numCuentaBancaria:o.data.numCuentaBancaria,idTipoCuenta:o.data.idTipoCuenta};this.secondFormGroup.patchValue(r),console.log(r),console.log(this.thirdFormGroup.getRawValue()),this.thirdFormGroup.patchValue({idCuentaBancaria:r.idTipoCuenta,cuentaDestino:r.numCuentaBancaria}),this.creditos=o.data.creditos,setTimeout(()=>{this.stepper.next()},1200)}},o=>{this.alert={type:"error",message:"El trabajador no existe!"},this.showAlert=!0})}onSave(){if(this.thirdFormGroup.valid){let s=this.thirdFormGroup.getRawValue(),{montoConsumo:o,idCuentaBancaria:r}=s,g=te(s,["montoConsumo","idCuentaBancaria"]),{idCredito:y,idTrabajador:v}=this.secondFormGroup.getRawValue();console.log(y);let X=this.cuentas.filter(I=>{if(I.idTipoCuenta==r)return I.id});console.log(X[0].id);let Y=L({idCredito:y,idTrabajador:v,montoConsumo:Number(o),idCuentaBancaria:X[0].id},g);console.log(Y),this.fuseService.open(L({},je)).afterClosed().subscribe(I=>{I==="confirmed"&&this.desembolsoService.postDesembolso(Y).subscribe(ee=>{console.log(ee),this.swalService.ToastAler({icon:"success",title:"Registro Creado o Actualizado con Exito.",timer:4e3}),this.getResumenCompra(v)},ee=>{this.swalService.ToastAler({icon:"error",title:"Ha ocurrido un error al crear el registro!",timer:4e3})})})}}getResumenCompra(s){this.subscription$=this.detalleConsumo.getResumen(s).subscribe(o=>{o&&(console.log(o),this.detaleConsumo=o.data,this.stepper.next())})}createForm(){this.firstFormGroup=this.fb.group({idTipoDoc:[""],numDocumento:["",f.required]}),this.secondFormGroup=this.fb.group({numDoc:["",f.required],primerNombre:["",f.required],segundoNombre:["",f.required],primerApellido:["",f.required],segundoApellido:["",f.required],idTrabajador:[""],correo:["",f.required],credito:["",f.required],idCredito:["",f.required],numCuentaBancaria:[""],idTipoCuenta:[""]}),this.thirdFormGroup=this.fb.group({montoConsumo:["",[f.required]],numeroFactura:["",f.required],idCuentaBancaria:["",f.required],cuentaDestino:["",f.required],idCuenta:[""]})}};l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=S({type:l,selectors:[["app-form-desembolso"]],viewQuery:function(o,r){if(o&1&&re(ut,5),o&2){let g;ne(g=ae())&&(r.stepper=g.first)}},standalone:!0,features:[M([{provide:xe,useClass:Le},{provide:ve,useValue:"en-GB"},C,$e(Et)]),F],decls:96,vars:42,consts:[["stepper",""],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","items-center","overflow-y-auto","bg-gray-100","p-6","sm:p-8"],[1,"relative","w-full","flex-0","max-w-4xl","sm:rounded-lg","overflow-hidden"],[1,"p-2","text-3xl","font-semibold","text-center","text-gray-800"],[1,"w-full","px-6","py-4",3,"orientation","linear","animationDuration"],["label","Consultar trabajador",3,"stepControl"],[1,"flex","flex-col","items-center","w-full"],[1,"space-y-4","w-full","max-w-sm",3,"formGroup"],[1,"w-full"],[3,"formControlName"],[4,"ngIf"],["floatLabel","always",1,"w-full"],["matInput","","placeholder","Ingrese identificaci\xF3n",3,"formControlName"],["class","mb-4",3,"appearance","showIcon","type",4,"ngIf"],["mat-raised-button","",1,"w-full","py-2","text-white","rounded-lg","transition","hover:bg-opacity-80",3,"click","disabled","ngClass"],["label","Verificar informaci\xF3n",3,"stepControl"],[1,"space-y-4","w-full","max-w-lg","mx-auto",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","gap-4"],["matInput","","readonly","",3,"formControlName"],[1,"flex","flex-col"],[1,"flex","flex-wrap","justify-center","sm:justify-center","gap-4","mt-2"],["mat-button","","matStepperPrevious","",1,"sm:w-auto","w-full","py-2","px-4","text-white","bg-gray-500","rounded-lg","hover:bg-gray-600"],["mat-button","","matStepperNext","",1,"sm:w-auto","w-full","py-2","px-4","text-white","bg-crediblue-50","rounded-lg","hover:bg-opacity-80",3,"disabled"],["label","Confirmar desembolso",3,"stepControl"],[1,"w-full","h-full","p-4","sm:p-8"],[1,"flex","flex-col","sm:flex-row","items-baseline","gap-4"],["matInput","","placeholder","N\xFAmero de comprobante",3,"formControlName"],["matInput","","thousandSeparator",".","placeholder","Valor",3,"formControlName","mask"],["placeholder","Cuenta de origen",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Cuenta destino",3,"formControlName"],["mat-button","",1,"sm:w-auto","w-full","py-2","px-4","text-white","bg-crediblue-50","rounded-lg","hover:bg-opacity-80",3,"click","disabled"],["label","Resumen de desembolso"],["class","w-full px-4 sm:px-8",4,"ngIf"],[3,"value"],[1,"mb-4",3,"appearance","showIcon","type"],[1,"w-full","px-4","sm:px-8"],[1,"max-w-2xl","mx-auto","p-6","bg-white","shadow-lg","rounded-lg"],[1,"border-b","pb-4","mb-4","text-center"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-sm","text-gray-500"],[1,"space-y-4"],[1,"flex","justify-between","items-center","border-b","pb-2"],[1,"text-lg","font-semibold","text-gray-700"],[1,"text-lg","font-bold","text-gray-800"],[1,"flex","justify-between","items-center"]],template:function(o,r){if(o&1){let g=G();i(0,"div",1)(1,"div",2)(2,"div",3),a(3),e(),i(4,"mat-stepper",4,0)(6,"mat-step",5)(7,"div",6)(8,"form",7)(9,"mat-form-field",8)(10,"mat-label"),a(11,"Tipo de documento"),e(),i(12,"mat-select",9),c(13,bt,2,1,"ng-container",10),Z(14,"async"),e()(),i(15,"mat-form-field",11)(16,"mat-label"),a(17,"N\xFAmero de identificaci\xF3n"),e(),u(18,"input",12),c(19,gt,2,0,"mat-error",10),e(),c(20,ht,2,5,"fuse-alert",13),i(21,"button",14),T("click",function(){return _(g),E(r.onSearch())}),a(22," Consultar "),e()()()(),i(23,"mat-step",15)(24,"div",8)(25,"form",16)(26,"div",17)(27,"mat-form-field",8)(28,"mat-label"),a(29,"Primer nombre"),e(),u(30,"input",18),e(),i(31,"mat-form-field",8)(32,"mat-label"),a(33,"Segundo nombre"),e(),u(34,"input",18),e()(),i(35,"div",17)(36,"mat-form-field",8)(37,"mat-label"),a(38,"Primer apellido"),e(),u(39,"input",18),e(),i(40,"mat-form-field",8)(41,"mat-label"),a(42,"Segundo apellido"),e(),u(43,"input",18),e()(),i(44,"div",17)(45,"mat-form-field",8)(46,"mat-label"),a(47,"Identificaci\xF3n"),e(),u(48,"input",18),e(),i(49,"mat-form-field",8)(50,"mat-label"),a(51,"Email"),e(),u(52,"input",18),e()(),i(53,"div",19)(54,"mat-form-field",8)(55,"mat-label"),a(56,"Cr\xE9dito"),e(),u(57,"input",18),e()()(),i(58,"div",20)(59,"button",21),a(60,"Anterior"),e(),i(61,"button",22),a(62,"Siguiente"),e()()()(),i(63,"mat-step",23)(64,"div",24)(65,"form",16)(66,"div",25)(67,"mat-form-field",11)(68,"mat-label"),a(69,"N\xFAmero de comprobante"),e(),u(70,"input",26),c(71,vt,2,0,"mat-error",10),e(),i(72,"mat-form-field",11)(73,"mat-label"),a(74,"Valor de la transferencia"),e(),u(75,"input",27),c(76,xt,2,0,"mat-error",10)(77,Ct,2,0,"mat-error",10),e()(),i(78,"div",17)(79,"mat-form-field",11)(80,"mat-label"),a(81,"Cuenta de origen"),e(),i(82,"mat-select",28),c(83,yt,2,2,"mat-option",29),e()(),i(84,"mat-form-field",11)(85,"mat-label"),a(86,"Cuenta destino"),e(),u(87,"input",30),c(88,St,2,0,"mat-error",10),e()()(),i(89,"div",20)(90,"button",21),a(91,"Anterior"),e(),i(92,"button",31),T("click",function(){return _(g),E(r.onSave())}),a(93,"Confirmar"),e()()()(),i(94,"mat-step",32),c(95,_t,39,8,"div",33),e()()()()}o&2&&(n(3),W(" ","Desembolso"," "),n(),m("orientation","vertical")("linear",!0)("animationDuration","1500"),n(2),m("stepControl",r.firstFormGroup),n(2),m("formGroup",r.firstFormGroup),n(4),m("formControlName","idTipoDoc"),n(),m("ngIf",pe(14,37,r.tiposDocumentos$)),n(5),m("formControlName","numDocumento"),n(),m("ngIf",r.firstFormGroup.get("numDocumento").dirty||r.firstFormGroup.get("numDocumento").touched&&r.firstFormGroup.get("numDocumento").errors.required),n(),m("ngIf",r.showAlert),n(),m("disabled",r.firstFormGroup.invalid)("ngClass",de(39,ct,r.firstFormGroup.valid,r.firstFormGroup.invalid)),n(2),m("stepControl",r.secondFormGroup),n(2),m("formGroup",r.secondFormGroup),n(5),m("formControlName","primerNombre"),n(4),m("formControlName","segundoNombre"),n(5),m("formControlName","primerApellido"),n(4),m("formControlName","segundoApellido"),n(5),m("formControlName","numDoc"),n(4),m("formControlName","correo"),n(5),m("formControlName","credito"),n(4),m("disabled",r.secondFormGroup.invalid),n(2),m("stepControl",r.thirdFormGroup),n(2),m("formGroup",r.thirdFormGroup),n(5),m("formControlName","numeroFactura"),n(),m("ngIf",(r.comprobante.touched||r.comprobante.dirty)&&r.comprobante.hasError("required")),n(4),m("formControlName","montoConsumo")("mask","separator.0"),n(),m("ngIf",(r.montoConsumo.touched||r.montoConsumo.dirty)&&r.montoConsumo.hasError("required")),n(),m("ngIf",(r.montoConsumo.touched||r.montoConsumo.dirty)&&r.montoConsumo.hasError("notEqual")),n(5),m("formControlName","idCuentaBancaria"),n(),m("ngForOf",r.cuentas),n(4),m("formControlName","cuentaDestino"),n(),m("ngIf",(r.cuentaDestino.touched||r.cuentaDestino.dirty)&&r.cuentaDestino.hasError("required")),n(4),m("disabled",r.thirdFormGroup.invalid),n(3),m("ngIf",r.detaleConsumo))},dependencies:[be,ye,C,Ve,Ge,Te,Ie,Ne,j,k,Ee,B,q,_e,Ce,Be,Je,Ue,Ke,Xe,fe,V,He,Oe,Ae,Me,ce]});let t=l;return t})();function wt(t){return l=>{let d=l.value;return console.log(t),d>t?{notEqual:!0}:null}}function Dt(t,l){if(t&1&&(w(0),u(1,"app-custom-table",19),D()),t&2){let d=h(2);n(),m("columns",d.columns)("displayedColumns",d.columns)("columnPropertyMap",d.columnPropertyMap)("data",d.data)("buttons",d.buttons)}}function Ft(t,l){t&1&&(i(0,"div",20)(1,"div",21)(2,"fuse-alert",22)(3,"span",23),a(4,"Informaci\xF3n"),e(),a(5," No hay solicitudes hasta el momento. "),e()()()),t&2&&(n(2),m("type","info")("appearance","outline"))}function Tt(t,l){if(t&1&&c(0,Dt,2,5,"ng-container",18)(1,Ft,6,2,"ng-template",null,1,P),t&2){let d=A(2),s=h();m("ngIf",s.data.length)("ngIfElse",d)}}function It(t,l){if(t&1&&(w(0),u(1,"app-custom-table",19),D()),t&2){let d=h(2);n(),m("columns",d.columns)("displayedColumns",d.columns)("columnPropertyMap",d.columnPropertyMap)("data",d.data)("buttons",d.buttons)}}function Nt(t,l){t&1&&(i(0,"div",20)(1,"div",21)(2,"fuse-alert",22)(3,"span",23),a(4,"Informaci\xF3n"),e(),a(5," No hay solicitudes rechazadas hasta el momento. "),e()()()),t&2&&(n(2),m("type","info")("appearance","outline"))}function Gt(t,l){if(t&1&&c(0,It,2,5,"ng-container",18)(1,Nt,6,2,"ng-template",null,1,P),t&2){let d=A(2),s=h();m("ngIf",s.data.length)("ngIfElse",d)}}function At(t,l){if(t&1&&(w(0),u(1,"app-custom-table",19),D()),t&2){let d=h(2);n(),m("columns",d.columns)("displayedColumns",d.columns)("columnPropertyMap",d.columnPropertyMap)("data",d.data)("buttons",d.buttons)}}function Mt(t,l){t&1&&(i(0,"div",20)(1,"div",21)(2,"fuse-alert",22)(3,"span",23),a(4,"Informaci\xF3n"),e(),a(5," No hay solicitudes aprobadas hasta el momento. "),e()()()),t&2&&(n(2),m("type","info")("appearance","outline"))}function Pt(t,l){if(t&1&&c(0,At,2,5,"ng-container",18)(1,Mt,6,2,"ng-template",null,1,P),t&2){let d=A(2),s=h();m("ngIf",s.data.length)("ngIfElse",d)}}var pt=(()=>{let l=class l{constructor(){this.datePipe=p(C),this.currencyPipe=p(J),this.router=p(O),this.selectedTab=b.PENDIENTE_DESEMBOLSO,this._matDialog=p(Se),this.estadoDatosService=p(R),this.solicitudService=p(Ze),this.data=[],this.columns=["Fecha de solicitud","Trabajador","Cupo solicitado","Empresa","Estado"],this.columnPropertyMap={"Fecha de solicitud":"fechaCreacion",Trabajador:"nombreTrabajador","Cupo solicitado":"cupo",Empresa:"nombreSubEmpresa",Estado:"nombreEstadoSolicitud"},this.buttons=[{label:"View",icon:"visibility",action:s=>{console.log("Approve",s),this.selectedData=s,this.router.navigate(["pages/gestion-creditos/solicitudes/estados",this.selectedData.id])}}],this.tabChanged=s=>{console.log("tabChangeEvent => ",s),console.log("index => ",s.index),this.tabIndex=s.index,console.log(this.tabIndex),this.selectedTab=s.index==0?b.PENDIENTE_DESEMBOLSO:s.index==1?b.RECHAZADA_DESEMBOLSO:s.index==2?b.APROBADO_DESEMBOLSO:b.PENDIENTE_DESEMBOLSO,this.getSolicitudes(this.selectedTab)}}getSolicitudes(s){this.subcription$=this.solicitudService.getSolicitudes(s).pipe($(o=>(o.data.forEach(r=>{r.estado?r.estado=U.ACTIVO:r.estado=U.INACTIVO}),o)),$(o=>(o.data.forEach(r=>{r.fechaCreacion=this.datePipe.transform(r.fechaCreacion,"dd/MM/yyyy"),r.cupo=this.currencyPipe.transform(r.cupo,"USD","symbol","1.2-2")}),o))).subscribe(o=>{o?this.data=o.data:this.data=[]},o=>{this.data=[]})}ngOnDestroy(){this.subcription$.unsubscribe()}ngOnInit(){this.getSolicitudes(this.selectedTab),this.listenGrid()}listenGrid(){this.estadoDatosService.stateGridSolicitudes.asObservable().subscribe(o=>{o.state&&(console.log("Si entro"),console.log(o),this.selectedTab=o.tab==0?b.PENDIENTE:o.tab==1?b.RECHAZADA:o.tab==2?b.APROBADA:o.tab==3?b.PENDIENTE_DESEMBOLSO:b.APROBADA,this.tabIndex=o.tab,console.log(this.tabIndex),this.getSolicitudes(this.selectedTab))})}};l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=S({type:l,selectors:[["app-grid-desembolsos"]],standalone:!0,features:[M([C,J]),F],decls:22,vars:7,consts:[["tabGroup",""],["noData",""],[1,"bg-card","flex","min-w-0","flex-auto","flex-col","dark:bg-transparent","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"relative","flex","flex-0","flex-col","px-6","py-6","sm:flex-row","sm:items-center","sm:justify-between","md:px-8"],[1,"text-3xl","font-semibold","tracking-tight"],[1,"mt-6","flex","w-full","shrink-0","flex-col","items-center","sm:ml-4","sm:mt-0","sm:flex-row","sm:space-x-2","sm:w-auto"],[1,"fuse-mat-dense","rounded-lg","w-full","sm:w-auto","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"autocomplete","placeholder"],[1,"border-b","flex","flex-col","justify-end","mb-4","md:px-8","pb-4","px-6","shrink-0","sm:flex-row","sm:w-auto","w-full"],["mat-flat-button","",1,"sm:w-auto","w-full","sm:mt-6","bg-green-700","rounded-lg","transition","duration-200","text-white","font-semibold",3,"color"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-auto","flex-col","overflow-hidden","sm:overflow-y-auto","bg-gray-100"],["mat-stretch-tabs","false",1,"sm:px-2",3,"selectedIndexChange","selectedTabChange","animationDuration","selectedIndex"],["label","Pendientes"],["matTabContent",""],["label","Rechazadas"],["label","Aprobadas"],[4,"ngIf","ngIfElse"],[3,"columns","displayedColumns","columnPropertyMap","data","buttons"],[1,"inset-0","min-w-0","overflow-auto","print:overflow-visible"],[1,"inline-block","p-4","sm:p-2","print:p-0","w-full"],[3,"type","appearance"],["fuseAlertTitle",""]],template:function(o,r){if(o&1){let g=G();i(0,"div",2)(1,"div",3)(2,"div",4),a(3,"Desembolsos"),e(),i(4,"div",5)(5,"mat-form-field",6),u(6,"mat-icon",7)(7,"input",8),e()()(),i(8,"div",9)(9,"button",10)(10,"span"),a(11," Exportar "),e()()(),i(12,"div",11)(13,"div",12)(14,"mat-tab-group",13,0),se("selectedIndexChange",function(v){return _(g),me(r.tabIndex,v)||(r.tabIndex=v),E(v)}),T("selectedTabChange",function(v){return _(g),E(r.tabChanged(v))}),i(16,"mat-tab",14),c(17,Tt,3,2,"ng-template",15),e(),i(18,"mat-tab",16),c(19,Gt,3,2,"ng-template",15),e(),i(20,"mat-tab",17),c(21,Pt,3,2,"ng-template",15),e()()()()()}o&2&&(n(5),m("subscriptSizing","dynamic"),n(),m("svgIcon","heroicons_solid:magnifying-glass"),n(),m("autocomplete","off")("placeholder","Buscar"),n(2),m("color","primary"),n(5),m("animationDuration","500"),le("selectedIndex",r.tabIndex))},dependencies:[ke,j,k,B,we,q,tt,et,ot,V]});let t=l;return t})();var Wo=[{path:"",component:mt},{path:"registrar",component:dt},{path:"listar",component:pt}];export{Wo as default};
